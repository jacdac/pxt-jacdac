{"version":3,"file":"350-be74bafd785bddc114be.js","mappings":";;;;;;;;;;;;;AAIe,iCAGZ,CACC,GAAM,eAAN,MACA,GAAM,CAAEA,EAAE,CAAJ,GAAWC,IAAI,CAAf,IAAN,OAEA,GAAMC,CAAAA,KAAK,CAAGC,kDAAW,CAAC,IAAM,CAC5B;AACA,GAAMC,CAAAA,CAAC,CAAGJ,EAAE,CAAFA,OAAAA,CAAV,MAAUA,CAAV,CACA,GAAMK,CAAAA,OAAO,CAAGL,EAAE,CAAFA,KAAAA,CAAAA,CAAAA,CAAhB,CAAgBA,CAAhB,CACA,GAAMM,CAAAA,IAAI,CAAGN,EAAE,CAAFA,KAAAA,CAASI,CAAC,CAAVJ,CAAAA,EAAb,IAAaA,EAAb,CAEA,GAAMO,CAAAA,OAAO,ggCAAb,KAgCA,GAAMC,CAAAA,SAAS,8CAGFC,KAAK,EAHH,8LAAf,sdA6BA,MAAO,CACH,eAAgB,CACZC,OAAO,CAAE,CACLC,IAAI,CADC,4BAELC,OAAO,CAFF,QAGLC,WAAW,CAHN,8DAKLC,IAAI,CALC,aAMLC,OAAO,CAAE,CACLC,KAAK,CADA,2BAELC,KAAK,CARJ,yBAMI,CANJ,CAULC,YAAY,CAAE,CACV,gBAAiBC,sEADP,CAEVC,SAAS,CAFC,SAGV,iBAbC,QAUS,CAVT,CAeLC,eAAe,CAAE,CACbC,UAAU,CAhBT,QAeY,CAfZ,CAkBLC,WAAW,CAAE,CACT,oBAnBC,SAkBQ,CAlBR,CAqBLC,QAAQ,CAAE,uBArBL,YAqBK,CArBL,CAsBLC,YAAY,CAAE,CAxBnB,UAwBmB,CAtBT,CADG,CADb,CA2BH,WAAY,CACRf,OAAO,CA5BR,OA2BS,CA3BT,CA8BH,aAAc,CACVA,OAAO,CA/Bf,SA8BkB,CA9BX,CAAP,CAnEqB,EAqGtB,iBArGH,IAqGG,CArGsB,CAAzB,CAuGA,mBAAO,sHAAmB,KAAK,CAA/B,KAAO,EAAP,CACH","sources":["webpack://jacdac-docs/./src/components/ui/VanillaCodeButton.tsx"],"sourcesContent":["import React, { useCallback } from \"react\"\nimport CodeSandboxButton from \"./CodeSandboxButton\"\nimport packageJson from \"../../../jacdac-ts/package.json\"\n\nexport default function VanillaCodeButton(props: {\n    title?: string\n    source: { js?: string; html?: string }\n}) {\n    const { title, source } = props\n    const { js = \"\", html = \"\" } = source\n\n    const files = useCallback(() => {\n        // find imports\n        const i = js.indexOf(\"\\n\\n\")\n        const imports = js.slice(0, i)\n        const code = js.slice(i + 2).trim()\n\n        const indexTs = `\nimport \"milligram\";\nimport { createWebBus, injectDevTools, CONNECTION_STATE, CHANGE } from \"jacdac-ts\";\n${imports}\n\nconst connectEl = document.getElementById(\"connectbtn\") as HTMLButtonElement;\nconst devtoolsEl = document.getElementById(\"devtoolsbtn\") as HTMLButtonElement;\nconst logEl = document.getElementById(\"log\") as HTMLPreElement;\nconst log = (msg: any) => {\n  console.log(msg);\n  logEl.innerText += msg + \"\\\\n\";\n};\n// create WebUSB bus\nconst bus = createWebBus();\n// track connection state and update button\nbus.on(CONNECTION_STATE, () => {\n  connectEl.innerText = bus.connected\n    ? \"connected ðŸŽ‰\"\n    : bus.disconnected\n    ? \"connect\"\n    : \"ðŸ‘€ðŸ‘€ðŸ‘€\";\n});\n// connect must be triggered by a user interaction\nconnectEl.onclick = async () =>\n  bus.connected ? bus.disconnect() : bus.connect();\n// inject dev tools window\ndevtoolsEl.onclick = () => injectDevTools(bus);\n// we're ready\nlog(\"click connect to start\")\n\n${code}\n`\n        const indexHtml = `\n<html>\n    <body>\n        <h1>Jacdac ${title || \"demo\"}</h1>\n        <div>\n        <button id=\"connectbtn\">connect</button>\n        <button id=\"devtoolsbtn\" class=\"button-clear\">dev tools</button>\n        </div>    \n\n${html}\n        <pre id=\"log\"></pre>\n\n    <footer>\n        <small>\n        Need to learn more about Jacdac?\n        <a target=\"_blank\" href=\"https://aka.ms/jacdac\">Read the docs</a>\n        or\n        <a\n            target=\"_blank\"\n            href=\"https://github.com/jacdac/jacdac/discussions\"\n            >start a discussion</a\n        >.\n        </small>\n    </footer>\n    <script src=\"./index.ts\"></script>\n    </body>\n</html>    \n        `\n\n        return {\n            \"package.json\": {\n                content: {\n                    name: \"vanilla-jacdac-typescript\",\n                    version: \"0.0.0\",\n                    description:\n                        \"Vanilla Jacdac + TypeScript sandbox - https://aka.ms/jacdac\",\n                    main: \"index.html\",\n                    scripts: {\n                        start: \"parcel index.html --open\",\n                        build: \"parcel build index.html\",\n                    },\n                    dependencies: {\n                        \"jacdac-ts\": `^${packageJson.version}`,\n                        milligram: \"^1.4.1\",\n                        \"parcel-bundler\": \"^2.0.0\",\n                    },\n                    devDependencies: {\n                        typescript: \"^4.4.3\",\n                    },\n                    resolutions: {\n                        \"@babel/preset-env\": \"^7.15.8\",\n                    },\n                    keywords: [\"jacdac\", \"typescript\", \"javascript\"],\n                    browserslist: [\"defaults\"],\n                },\n            },\n            \"index.ts\": {\n                content: indexTs,\n            },\n            \"index.html\": {\n                content: indexHtml,\n            },\n        }\n    }, [title, source, js, html])\n\n    return <CodeSandboxButton files={files} />\n}\n"],"names":["js","html","files","useCallback","i","imports","code","indexTs","indexHtml","title","content","name","version","description","main","scripts","start","build","dependencies","packageJson","milligram","devDependencies","typescript","resolutions","keywords","browserslist"],"sourceRoot":""}