{"version":3,"file":"36ac01238f33c59ef4bf5e573dc09d41bc1feb4f-041bb4dd31ab21f8611d.js","mappings":"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","sources":["webpack://jacdac-docs/./node_modules/@mui/icons-material/Add.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/Cable.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/Circle.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/DeviceThermostat.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/Devices.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/Fingerprint.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/Grass.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/LinearScale.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/MusicNote.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/RadioButtonChecked.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/RestartAlt.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/Settings.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/Tungsten.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/Water.js","webpack://jacdac-docs/./node_modules/core-js/internals/add-to-unscopables.js","webpack://jacdac-docs/./node_modules/core-js/internals/array-species-constructor.js","webpack://jacdac-docs/./node_modules/core-js/internals/array-species-create.js","webpack://jacdac-docs/./node_modules/core-js/internals/does-not-exceed-safe-integer.js","webpack://jacdac-docs/./node_modules/core-js/internals/flatten-into-array.js","webpack://jacdac-docs/./node_modules/core-js/internals/function-bind-context.js","webpack://jacdac-docs/./node_modules/core-js/internals/html.js","webpack://jacdac-docs/./node_modules/core-js/internals/is-array.js","webpack://jacdac-docs/./node_modules/core-js/internals/object-create.js","webpack://jacdac-docs/./node_modules/core-js/internals/object-define-properties.js","webpack://jacdac-docs/./node_modules/core-js/internals/object-keys.js","webpack://jacdac-docs/./node_modules/core-js/modules/es.array.flat-map.js","webpack://jacdac-docs/./node_modules/core-js/modules/es.array.unscopables.flat-map.js","webpack://jacdac-docs/./src/components/CmdButton.tsx","webpack://jacdac-docs/./src/components/widgets/ValueWithUnitWidget.tsx","webpack://jacdac-docs/./src/components/icons/HumidityIcon.tsx","webpack://jacdac-docs/./src/components/icons/TemperatureIcon.tsx","webpack://jacdac-docs/./src/components/hooks/useUnitIcon.tsx","webpack://jacdac-docs/./src/components/fields/MemberInput.tsx","webpack://jacdac-docs/./src/components/fields/MembersInput.tsx","webpack://jacdac-docs/./src/components/FieldDataSet.ts","webpack://jacdac-docs/./src/components/Trend.tsx","webpack://jacdac-docs/./src/components/useChartPalette.ts","webpack://jacdac-docs/./src/components/RegisterTrend.tsx","webpack://jacdac-docs/./src/components/hooks/useRegisterServer.ts","webpack://jacdac-docs/./src/components/hooks/useReadingAuxilliaryValue.ts","webpack://jacdac-docs/./src/components/RegisterInput.tsx","webpack://jacdac-docs/./src/components/buttons/StartMissingSimulatorsButton.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardServiceDefaultWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdLEDWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdPumpWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdServoWidget.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardFwdUniqueComponents.tsx","webpack://jacdac-docs/./src/components/widgets/FwdDialButtonWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdDialWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdLineWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdSoilMoistureWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdSolarWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdSonarWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdTouchWidget.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardFwdEduWidgets.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardButton.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardRotaryEncoder.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardSwitch.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardGamepad.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardServiceWidget.tsx","webpack://jacdac-docs/./src/components/services/StatusCodeAlert.tsx","webpack://jacdac-docs/./src/components/services/useServiceRole.ts","webpack://jacdac-docs/./src/components/services/ServiceRole.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardServiceWidgetItemHeader.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardServiceWidgetItem.tsx","webpack://jacdac-docs/./src/components/hooks/useIntersectionObserver.ts","webpack://jacdac-docs/./src/components/alert/DeviceLostAlert.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardDeviceCardHeader.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardDevice.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardDeviceItem.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardDeviceGroup.tsx","webpack://jacdac-docs/./src/components/alert/SimulateDeviceAlert.tsx","webpack://jacdac-docs/./src/components/buttons/StartSimulatorButton.tsx","webpack://jacdac-docs/./src/components/dashboard/filters.ts","webpack://jacdac-docs/./src/jacdac/useBusWithMode.ts","webpack://jacdac-docs/./src/components/devices/DevicePowerChips.tsx","webpack://jacdac-docs/./src/components/dashboard/Dashboard.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardRegisterValueFallback.tsx","webpack://jacdac-docs/./src/components/devices/DeviceActions.tsx","webpack://jacdac-docs/./src/components/dialogs/IdentifyDialog.tsx","webpack://jacdac-docs/./src/components/devices/DeviceAvatar.tsx","webpack://jacdac-docs/./src/components/devices/DeviceName.tsx","webpack://jacdac-docs/./src/components/devices/DeviceResetButton.tsx","webpack://jacdac-docs/./src/components/devices/useDeviceName.ts","webpack://jacdac-docs/./src/components/hooks/useAnimationFrame.ts","webpack://jacdac-docs/./src/components/hooks/useEvent.ts","webpack://jacdac-docs/./src/components/hooks/useInterval.ts","webpack://jacdac-docs/./src/components/hooks/useServiceServer.ts","webpack://jacdac-docs/./src/components/hooks/useSvgButtonProps.ts","webpack://jacdac-docs/./src/components/hooks/useThrottledValue.ts","webpack://jacdac-docs/./src/components/services/useInstanceName.ts","webpack://jacdac-docs/./src/components/services/useRoleManagerClient.ts","webpack://jacdac-docs/./src/components/services/useStatusCode.ts","webpack://jacdac-docs/./src/components/ui/LoadingProgress.tsx","webpack://jacdac-docs/./src/components/widgets/ButtonWidget.tsx","webpack://jacdac-docs/./src/components/widgets/ColorButtons.tsx","webpack://jacdac-docs/./src/components/widgets/GaugeWidget.tsx","webpack://jacdac-docs/./src/components/widgets/OptionalTooltip.tsx","webpack://jacdac-docs/./src/components/widgets/PowerButton.tsx","webpack://jacdac-docs/./src/components/widgets/SvgWidget.tsx","webpack://jacdac-docs/./src/components/widgets/svgutils.ts","webpack://jacdac-docs/./src/components/widgets/useWidgetSize.ts","webpack://jacdac-docs/./src/components/widgets/useWidgetTheme.ts","webpack://jacdac-docs/./src/jacdac/useDeviceDescription.ts"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 5V4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1v1h-1v4c0 .55.45 1 1 1h1v7c0 1.1-.9 2-2 2s-2-.9-2-2V7c0-2.21-1.79-4-4-4S5 4.79 5 7v7H4c-.55 0-1 .45-1 1v4h1v1c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-1h1v-4c0-.55-.45-1-1-1H7V7c0-1.1.9-2 2-2s2 .9 2 2v10c0 2.21 1.79 4 4 4s4-1.79 4-4v-7h1c.55 0 1-.45 1-1V5h-1z\"\n}), 'Cable');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z\"\n}), 'Circle');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M15 13V5c0-1.66-1.34-3-3-3S9 3.34 9 5v8c-1.21.91-2 2.37-2 4 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.09-2-4zm-4-8c0-.55.45-1 1-1s1 .45 1 1h-1v1h1v2h-1v1h1v2h-2V5z\"\n}), 'DeviceThermostat');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M4 6h18V4H4c-1.1 0-2 .9-2 2v11H0v3h14v-3H4V6zm19 2h-6c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zm-1 9h-4v-7h4v7z\"\n}), 'Devices');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z\"\n}), 'Fingerprint');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 20H2v-2h5.75c-.73-2.81-2.94-5.01-5.75-5.74.64-.16 1.31-.26 2-.26 4.42 0 8 3.58 8 8zm10-7.74c-.64-.16-1.31-.26-2-.26-2.93 0-5.48 1.58-6.88 3.93.29.66.53 1.35.67 2.07.13.65.2 1.32.2 2h8v-2h-5.75c.74-2.81 2.95-5.01 5.76-5.74zm-6.36-1.24c.78-2.09 2.23-3.84 4.09-5C15.44 6.16 12 9.67 12 14v.02c.95-1.27 2.2-2.3 3.64-3zm-4.22-2.17C10.58 6.66 8.88 4.89 6.7 4 8.14 5.86 9 8.18 9 10.71c0 .21-.03.41-.04.61.43.24.83.52 1.22.82.21-1.18.65-2.29 1.24-3.29z\"\n}), 'Grass');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19.5 9.5c-1.03 0-1.9.62-2.29 1.5h-2.92c-.39-.88-1.26-1.5-2.29-1.5s-1.9.62-2.29 1.5H6.79c-.39-.88-1.26-1.5-2.29-1.5C3.12 9.5 2 10.62 2 12s1.12 2.5 2.5 2.5c1.03 0 1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5s1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5 1.38 0 2.5-1.12 2.5-2.5s-1.12-2.5-2.5-2.5z\"\n}), 'LinearScale');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z\"\n}), 'MusicNote');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'RadioButtonChecked');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zm-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z\"\n}), 'RestartAlt');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\"\n}), 'Settings');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M11 19h2v3h-2zm-9-8h3v2H2zm17 0h3v2h-3zm-3.106 6.8014 1.4072-1.4071 2.1213 2.1213-1.4071 1.4071zm-11.3099.7071 2.1214-2.1213 1.4071 1.4072-2.1213 2.1213zM15 8.02V3H9v5.02c-1.21.92-2 2.35-2 3.98 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.06-2-3.98zM11 5h2v2.1c-.32-.06-.66-.1-1-.1s-.68.04-1 .1V5z\"\n}), 'Tungsten');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M21.98 14H22h-.02zM5.35 13c1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.4.98 3.31 1v-2c-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1v2c1.9 0 2.17-1 3.35-1zm13.32 2c-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.1 1-3.34 1-1.24 0-1.38-1-3.33-1-1.95 0-2.1 1-3.34 1v2c1.95 0 2.11-1 3.34-1 1.24 0 1.38 1 3.33 1 1.95 0 2.1-1 3.34-1 1.19 0 1.42 1 3.33 1 1.94 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1v-2c-1.24 0-1.38-1-3.33-1zM5.35 9c1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.4.98 3.31 1V8c-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1C3.38 7 3.24 8 2 8v2c1.9 0 2.17-1 3.35-1z\"\n}), 'Water');\nexports.default = _default;","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  defineProperty(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","var isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar $Array = Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? $Array : C;\n};\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg) : false;\n  var element, elementLen;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        elementLen = lengthOfArrayLike(element);\n        targetIndex = flattenIntoArray(target, original, element, elementLen, targetIndex, depth - 1) - 1;\n      } else {\n        doesNotExceedSafeInteger(targetIndex + 1);\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es-x/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es-x/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es-x/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es-x/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flatMap` method\n// https://tc39.es/ecma262/#sec-array.prototype.flatmap\n$({ target: 'Array', proto: true }, {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen = lengthOfArrayLike(O);\n    var A;\n    aCallable(callbackfn);\n    A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return A;\n  }\n});\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flatMap');\n","import { darken, lighten } from \"@mui/material\"\nimport { styled } from \"@mui/material/styles\"\nimport { Button } from \"gatsby-theme-material-ui\"\nimport React, { CSSProperties, ReactNode, useEffect, useState } from \"react\"\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport ErrorIcon from \"@mui/icons-material/Error\"\nimport IconButtonWithTooltip from \"./ui/IconButtonWithTooltip\"\nimport useAnalytics, { EventProperties } from \"./hooks/useAnalytics\"\nimport useMounted from \"./hooks/useMounted\"\nimport clsx from \"clsx\"\nimport useSnackbar from \"./hooks/useSnackbar\"\nimport useBus from \"../jacdac/useBus\"\nimport OptionalTooltip from \"./widgets/OptionalTooltip\"\n\nconst PREFIX = \"CmdButton\"\n\nconst classes = {\n    ack: `${PREFIX}Ack`,\n    error: `${PREFIX}Error`,\n}\n\nconst Root = styled(\"span\")(({ theme }) => ({\n    [`& .${classes.ack}`]: {\n        color: \"#fff\",\n        fontWeight: theme.typography.fontWeightMedium,\n        backgroundColor: theme.palette.success.main,\n    },\n\n    [`& .${classes.error}`]: {\n        color: \"#fff\",\n        backgroundColor: (theme.palette.mode === \"light\" ? lighten : darken)(\n            theme.palette.error.main,\n            0.6\n        ),\n    },\n}))\n\nconst ACK_RESET_DELAY = 500\nconst ERROR_RESET_DELAY = 2000\n\nexport default function CmdButton(props: {\n    onClick: (mounted: () => boolean) => Promise<void>\n    className?: string\n    style?: CSSProperties\n    title?: string\n    children?: ReactNode\n    icon?: JSX.Element\n    size?: \"small\" | \"large\" | undefined\n    variant?: \"outlined\" | \"contained\" | undefined\n    disabled?: boolean\n    disableReset?: boolean\n    autoRun?: boolean\n    trackName?: string\n    trackProperties?: EventProperties\n    ackResetDelay?: number\n    color?:\n        | \"inherit\"\n        | \"primary\"\n        | \"secondary\"\n        | \"error\"\n        | \"info\"\n        | \"success\"\n        | \"warning\"\n}) {\n    const {\n        onClick,\n        className,\n        style,\n        children,\n        icon,\n        title,\n        disabled,\n        disableReset,\n        autoRun,\n        trackName,\n        trackProperties,\n        ackResetDelay,\n        color,\n        ...others\n    } = props\n    const bus = useBus()\n    const { setError: setAppError } = useSnackbar()\n\n    const [working, setWorking] = useState(false)\n    const [ack, setAck] = useState(false)\n    const [error, setError] = useState(undefined)\n    const { trackEvent } = useAnalytics()\n    const mounted = useMounted()\n\n    const _disabled = disabled || working\n\n    const run = async () => {\n        if (working) return // already working\n\n        if (trackName) trackEvent(\"cmd.\" + trackName, trackProperties)\n        try {\n            setError(undefined)\n            setAck(false)\n            setWorking(true)\n            await onClick(mounted)\n            if (!mounted()) return\n            setAck(true)\n            if (!disableReset) {\n                await bus.delay(ackResetDelay || ACK_RESET_DELAY)\n                if (!mounted()) return\n                setAck(false)\n            }\n        } catch (e) {\n            if (!mounted()) return\n            setAppError(e)\n            setError(e)\n            if (!disableReset) {\n                await bus.delay(ERROR_RESET_DELAY)\n                if (!mounted()) return\n                setError(undefined)\n            }\n        } finally {\n            if (mounted()) setWorking(false)\n        }\n    }\n\n    const handleClick = async (ev: React.MouseEvent<HTMLButtonElement>) => {\n        ev.stopPropagation()\n        ev.preventDefault()\n        run()\n    }\n\n    const statusIcon = error ? <ErrorIcon /> : undefined\n    const modeClassName = error ? classes.error : ack ? classes.ack : undefined\n    const elClassName = clsx(className, modeClassName)\n\n    // run once\n    useEffect(() => {\n        if (autoRun && mounted()) run()\n    }, [autoRun])\n\n    return (\n        <Root>\n            {!children && icon ? (\n                <IconButtonWithTooltip\n                    className={elClassName}\n                    style={style}\n                    onClick={handleClick}\n                    aria-label={title}\n                    title={title}\n                    disabled={_disabled}\n                    color={color}\n                    {...others}\n                >\n                    {statusIcon || icon}\n                </IconButtonWithTooltip>\n            ) : (\n                <OptionalTooltip title={title} placement=\"bottom\">\n                    <Button\n                        className={elClassName}\n                        style={style}\n                        startIcon={icon}\n                        endIcon={statusIcon}\n                        onClick={handleClick}\n                        aria-label={title}\n                        title=\"\"\n                        disabled={_disabled}\n                        color={color}\n                        {...others}\n                    >\n                        {children}\n                    </Button>\n                </OptionalTooltip>\n            )}\n        </Root>\n    )\n}\n","import React, { CSSProperties, useRef } from \"react\"\nimport { Grid, Slider, Typography } from \"@mui/material\"\nimport { renderWithPrecision } from \"../../../jacdac-ts/src/jdom/utils\"\nimport useWidgetTheme from \"./useWidgetTheme\"\nimport useUnitConverter from \"../ui/useUnitConverter\"\n/// <reference path=\"../../../jacdac-ts/jacdac-spec/spectool/jdspec.d.ts\" />\n\nfunction useDebouncedValueTextLength(valueText: string) {\n    const valueTextLength = valueText.length\n    const debouncedRef = useRef(valueTextLength)\n    const alpha = 0.05\n    if (debouncedRef.current < valueTextLength)\n        debouncedRef.current = valueTextLength\n    else\n        debouncedRef.current =\n            debouncedRef.current * (1 - alpha) + valueTextLength * alpha\n    return Math.ceil(debouncedRef.current)\n}\n\nexport default function ValueWithUnitWidget(props: {\n    value: number\n    unit: jdspec.Unit\n    min?: number\n    max?: number\n    step?: number\n    icon?: JSX.Element\n    secondaryLabel?: string\n    tabIndex?: number\n    color?: \"primary\" | \"secondary\"\n    size?: string\n    onChange?: (newValue: number) => void\n}) {\n    const { step, secondaryLabel, icon, unit, tabIndex, color, onChange } =\n        props\n    const {\n        name: unitName,\n        converter: unitConverter,\n        inverter: unitInverter,\n    } = useUnitConverter(unit)\n\n    // map all values with unit converters\n    const { value, min, max } = {\n        value: unitConverter(props.value),\n        min: unitConverter(props.min),\n        max: unitConverter(props.max),\n    }\n\n    const precision =\n        step === undefined ? 1 : step < 1 ? Math.ceil(-Math.log10(step)) : 0\n    const hasValue = !isNaN(value)\n    const valueText = hasValue ? renderWithPrecision(value, precision) : \"--\"\n    const valueTextLength = useDebouncedValueTextLength(valueText)\n    const { textPrimary } = useWidgetTheme(color)\n    const valueVariant =\n        valueTextLength < 7\n            ? \"h2\"\n            : valueTextLength < 9\n            ? \"h3\"\n            : valueTextLength < 12\n            ? \"h4\"\n            : \"h6\"\n    const valueStyle: CSSProperties = {\n        color: textPrimary,\n        minWidth: `${valueTextLength / 2}em`,\n        fontVariantNumeric: \"tabular-nums\",\n    }\n    const unitStyle: CSSProperties = {\n        color: textPrimary,\n    }\n    const captionStyle: CSSProperties = {\n        color: textPrimary,\n    }\n\n    const handleChange = (event: unknown, newValue: number | number[]) => {\n        const v = newValue as number\n        const iv = unitInverter(v)\n        onChange(iv)\n    }\n\n    return (\n        <Grid\n            container\n            direction=\"column\"\n            tabIndex={tabIndex}\n            aria-label={`${valueText} ${unitName || \"\"}`}\n        >\n            <Grid item xs={12}>\n                <Grid container direction=\"row\" alignContent=\"flex-end\">\n                    <Grid item>\n                        <Typography\n                            role=\"timer\"\n                            align=\"right\"\n                            variant={valueVariant}\n                            style={valueStyle}\n                        >\n                            {icon}\n                            {valueText}\n                        </Typography>\n                    </Grid>\n                    <Grid item>\n                        <Grid\n                            container\n                            direction=\"column\"\n                            alignContent=\"space-between\"\n                        >\n                            {unitName && (\n                                <Grid item>\n                                    <Typography\n                                        style={unitStyle}\n                                        variant={\"caption\"}\n                                    >\n                                        {unitName}\n                                    </Typography>\n                                </Grid>\n                            )}\n                            {secondaryLabel && (\n                                <Grid item>\n                                    <Typography\n                                        style={captionStyle}\n                                        variant={\"caption\"}\n                                    >\n                                        {secondaryLabel}\n                                    </Typography>\n                                </Grid>\n                            )}\n                        </Grid>\n                    </Grid>\n                </Grid>\n            </Grid>\n            {onChange && value !== undefined && (\n                <Grid item xs={12}>\n                    <Slider\n                        valueLabelDisplay=\"off\"\n                        color=\"secondary\"\n                        min={min}\n                        max={max}\n                        step={step}\n                        value={value}\n                        onChange={handleChange}\n                        aria-label={unitName || secondaryLabel}\n                    />\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n","import { SvgIcon, SvgIconProps } from \"@mui/material\"\nimport React from \"react\"\n\nexport default (props: SvgIconProps) => (\n    <SvgIcon titleAccess=\"humidity logo\" {...props}>\n        <path d=\"M8.8-.03A49.327 49.327 0 00.956 11.112a8.824 8.824 0 1015.693 0A49.327 49.327 0 008.801-.029zm0 3.132a47.244 47.244 0 015.995 8.962 6.74 6.74 0 11-11.986 0A47.243 47.243 0 018.8 3.102z\" />\n    </SvgIcon>\n)\n","import { SvgIcon, SvgIconProps } from \"@mui/material\"\nimport React from \"react\"\n\nexport default (props: SvgIconProps) => (\n    <SvgIcon titleAccess=\"Temperature icon\" {...props}>\n        <path d=\"M11.365 14.761a.635.635 0 000-1.27h-1.35a.635.635 0 000 1.27zM11.365 12.062a.635.635 0 000-1.27h-1.35a.635.635 0 000 1.27zM11.365 9.363a.635.635 0 000-1.27h-1.35a.635.635 0 000 1.27zM11.365 6.663a.635.635 0 000-1.27h-1.35a.635.635 0 000 1.27zM11.365 3.964a.635.635 0 000-1.27h-1.35a.635.635 0 000 1.27zM4.04 3.26v14.207a1.979 1.978 0 101.284-.004V3.26a.642.642 0 00-1.285 0z\" />\n        <path d=\"M4.699 0a3.302 3.301 0 00-3.323 3.3v12.726a4.668 4.666 0 106.605.022V3.3A3.302 3.301 0 004.7 0zm-.047 1.303a2.01 2.008 0 012.041 2.009v13.37a3.354 3.352 0 11-4.017-.027V3.312a2.01 2.008 0 011.976-2.01z\" />\n    </SvgIcon>\n)\n","import React from \"react\"\nimport HumidityIcon from \"../icons/HumidityIcon\"\nimport TemperatureIcon from \"../icons/TemperatureIcon\"\nimport { resolveUnit } from \"../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\nimport { SvgIconProps } from \"@mui/material\"\n\nexport default (unit: string, props?: SvgIconProps) => {\n    const { unit: runit } = resolveUnit(unit) || {}\n    switch (runit) {\n        case \"%RH\":\n            return <HumidityIcon {...props} />\n        case \"°C\":\n        case \"K\":\n            return <TemperatureIcon {...props} />\n        default:\n            return null\n    }\n}\n","import React, { useEffect, useState } from \"react\"\n// tslint:disable-next-line: no-submodule-imports\nimport { FormControlLabel, Slider, SelectChangeEvent } from \"@mui/material\"\nimport { MenuItem, Select, Switch, TextField } from \"@mui/material\"\nimport {\n    flagsToValue,\n    prettyMemberUnit,\n    prettyUnit,\n    valueToFlags,\n} from \"../../../jacdac-ts/src/jdom/pretty\"\nimport {\n    isIntegerType,\n    isValueOrIntensity,\n    memberValueToString,\n    tryParseMemberValue,\n} from \"../../../jacdac-ts/src/jdom/spec\"\nimport {\n    isSet,\n    pick,\n    roundWithPrecision,\n} from \"../../../jacdac-ts/src/jdom/utils\"\nimport { RegisterInputVariant } from \"../RegisterInput\"\nimport ButtonWidget from \"../widgets/ButtonWidget\"\nimport GaugeWidget from \"../widgets/GaugeWidget\"\nimport useWidgetSize from \"../widgets/useWidgetSize\"\nimport ValueWithUnitWidget from \"../widgets/ValueWithUnitWidget\"\nimport useUnitIcon from \"../hooks/useUnitIcon\"\nimport { PackedSimpleValue } from \"../../../jacdac-ts/src/jdom/pack\"\nimport { useId } from \"react\"\nimport LoadingProgress from \"../ui/LoadingProgress\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\n\nexport default function MemberInput(props: {\n    specification: jdspec.PacketMember\n    serviceSpecification: jdspec.ServiceSpec\n    serviceMemberSpecification: jdspec.PacketInfo\n    value: PackedSimpleValue\n    setValue?: (v: PackedSimpleValue) => void\n    showDataType?: boolean\n    color?: \"primary\" | \"secondary\"\n    variant?: RegisterInputVariant\n    min?: number\n    max?: number\n    resolution?: number\n    error?: number\n    showLoading?: boolean\n    off?: boolean\n    toggleOff?: () => void\n    controlled?: boolean\n}) {\n    const {\n        specification,\n        serviceSpecification,\n        serviceMemberSpecification,\n        value,\n        setValue,\n        showDataType,\n        color,\n        variant,\n        min,\n        max,\n        resolution,\n        error,\n        showLoading,\n        off,\n        toggleOff,\n        controlled,\n    } = props\n    const { typicalMin, typicalMax, absoluteMin, absoluteMax, type } =\n        specification\n    const { kind } = serviceMemberSpecification\n    const enumInfo = serviceSpecification.enums?.[specification.type]\n    const disabled = !setValue\n    const readOnly = disabled || (controlled && kind !== \"ro\")\n    const [errorText, setErrorText] = useState(\"\")\n    const [textValue, setTextValue] = useState(\"\")\n    const valueString = memberValueToString(value, specification)\n    const name =\n        specification.name === \"_\"\n            ? serviceMemberSpecification.name\n            : specification.name\n    const label = name\n    const isWidget = variant === \"widget\"\n    const widgetSize = useWidgetSize()\n    const unitIcon = useUnitIcon(specification.unit, { \"aria-label\": label })\n    const { textPrimary } = useWidgetTheme(color)\n\n    const minValue = pick(\n        min,\n        typicalMin,\n        absoluteMin,\n        /^u/.test(type) ? 0 : undefined\n    )\n    const maxValue = pick(max, typicalMax, absoluteMax)\n    const errorValue = error\n        ? \"±\" +\n          roundWithPrecision(\n              error,\n              1 - Math.floor(Math.log10(error))\n          ).toLocaleString()\n        : undefined\n    const unit = prettyUnit(specification.unit)\n    const helperText =\n        errorText ||\n        [prettyMemberUnit(specification, showDataType), errorValue]\n            .filter(v => v !== undefined)\n            .join(\", \")\n    const inputId = useId()\n\n    const inputType =\n        specification.type === \"string\" || specification.type === \"string0\"\n            ? \"string\"\n            : specification.isSimpleType || isIntegerType(specification.type)\n            ? \"number\"\n            : \"\"\n\n    // update coming from device\n    useEffect(() => {\n        setTextValue(valueString)\n    }, [valueString])\n\n    const handleChecked = (ev, checked: boolean) => {\n        setValue(checked)\n    }\n    const handleChange = ev => {\n        const newValue = ev.target.value\n        setTextValue(newValue)\n        const r = tryParseMemberValue(newValue, specification)\n        if (r.value !== undefined) setValue(r.value)\n        setErrorText(r.error)\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const handleEnumChange = (event: SelectChangeEvent<number | number[]>) => {\n        const v = enumInfo.isFlags\n            ? flagsToValue(event.target.value as number[])\n            : (event.target.value as number)\n        setValue(v)\n    }\n    const handleSliderChange = (ev: unknown, newValue: number | number[]) =>\n        setValue(newValue as number)\n    const handleSliderWidgetChange = (newValue: number) => setValue(newValue)\n\n    const percentValueFormat = (value: number) => {\n        // avoid super long floats\n        return ((value * 100) >> 0) + \"%\"\n    }\n\n    const valueLabelFormat = (value: number) => {\n        // avoid super long floats\n        return roundWithPrecision(value, 1) + (unit || \"\")\n    }\n    const percentValueLabelFormat = (v: number) => {\n        return `${Math.round(v * 100)}%`\n    }\n    const offFormat = () => \"off\"\n\n    // value hasn't been loaded yet\n    if (serviceMemberSpecification.kind !== \"command\" && value === undefined) {\n        if (showLoading) return <LoadingProgress />\n        else return null\n    }\n\n    //\n    if (specification.type === \"pipe\") {\n        return (\n            <>\n                pipe <code>{specification.name}</code>\n            </>\n        )\n    } else if (specification.type === \"bool\") {\n        if (isWidget && !isValueOrIntensity(serviceMemberSpecification)) {\n            return (\n                <ButtonWidget\n                    label={!isWidget && label}\n                    checked={!!value}\n                    color={color}\n                    size={widgetSize}\n                />\n            )\n        }\n\n        return (\n            <FormControlLabel\n                control={\n                    <Switch\n                        checked={!!value}\n                        onChange={readOnly ? undefined : handleChecked}\n                        color={color}\n                    />\n                }\n                label={<span style={{ color: textPrimary }}>{label}</span>}\n            />\n        )\n    } else if (enumInfo !== undefined) {\n        return (\n            <Select\n                aria-label={label}\n                disabled={disabled}\n                multiple={enumInfo.isFlags}\n                value={\n                    enumInfo.isFlags\n                        ? valueToFlags(enumInfo, value as number)\n                        : (value as number)\n                }\n                onChange={!controlled ? handleEnumChange : undefined}\n            >\n                {Object.keys(enumInfo.members).map(n => (\n                    <MenuItem key={n} value={enumInfo.members[n]}>\n                        {n}\n                    </MenuItem>\n                ))}\n            </Select>\n        )\n    } else if (specification.unit === \"/\") {\n        const signed = specification.storage < 0\n        const min = signed ? -1 : 0\n        const max = 1\n        const step = resolution !== undefined ? resolution : 0.01\n        const digits = Math.ceil(-Math.log10(step))\n        const nvalue = roundWithPrecision(value as number, digits)\n        if (isWidget) {\n            const size = `clamp(6rem, 12vw, 12vh)`\n            return (\n                <GaugeWidget\n                    tabIndex={0}\n                    label={label}\n                    size={size}\n                    value={nvalue}\n                    color={color}\n                    variant={signed ? \"fountain\" : undefined}\n                    min={min}\n                    max={max}\n                    step={step}\n                    valueLabel={percentValueLabelFormat}\n                    onChange={readOnly ? undefined : handleSliderWidgetChange}\n                    off={off}\n                    toggleOff={readOnly ? undefined : toggleOff}\n                />\n            )\n        }\n\n        return (\n            <Slider\n                aria-label={label}\n                color={color}\n                value={nvalue}\n                valueLabelFormat={percentValueFormat}\n                onChange={readOnly ? undefined : handleSliderChange}\n                min={min}\n                max={max}\n                step={step}\n                valueLabelDisplay=\"auto\"\n            />\n        )\n    } else if (isSet(minValue) && isSet(maxValue)) {\n        const hasTypicalRange = isSet(typicalMin) && isSet(typicalMax)\n        let step =\n            resolution !== undefined\n                ? resolution\n                : hasTypicalRange\n                ? (specification.typicalMax - specification.typicalMin) / 100\n                : (maxValue - minValue) / 100\n        if (step === 0 || isNaN(step))\n            // edge case\n            step = undefined\n        const marks =\n            hasTypicalRange &&\n            (typicalMin !== minValue || typicalMax !== maxValue)\n                ? [\n                      {\n                          value: typicalMin,\n                      },\n                      {\n                          value: typicalMax,\n                      },\n                  ]\n                : undefined\n        if (isWidget)\n            return (\n                <ValueWithUnitWidget\n                    tabIndex={0}\n                    unit={specification.unit}\n                    value={value as number}\n                    min={minValue}\n                    max={maxValue}\n                    icon={unitIcon}\n                    step={step}\n                    secondaryLabel={errorValue}\n                    color={color}\n                    onChange={readOnly ? undefined : handleSliderWidgetChange}\n                />\n            )\n\n        return (\n            <Slider\n                value={value as number}\n                color={color}\n                valueLabelFormat={off ? offFormat : valueLabelFormat}\n                onChange={readOnly ? undefined : handleSliderChange}\n                min={minValue}\n                max={maxValue}\n                step={step}\n                marks={marks}\n                valueLabelDisplay=\"auto\"\n            />\n        )\n    } else if (specification.type === \"bytes\") {\n        return (\n            <TextField\n                id={inputId}\n                spellCheck={false}\n                value={textValue}\n                label={label}\n                inputProps={{\n                    [\"aria-label\"]: label,\n                    [\"aria-readonly\"]: disabled,\n                    readOnly: disabled,\n                }}\n                helperText={helperText}\n                onChange={readOnly ? undefined : handleChange}\n                required={value === undefined}\n                error={!!errorText}\n                type={\"text\"}\n            />\n        )\n    } else {\n        // numbers or string or uintarrays\n        if (isWidget)\n            // we need min/max to support a slider\n            return (\n                <ValueWithUnitWidget\n                    tabIndex={0}\n                    value={roundWithPrecision(value as number, 1)}\n                    unit={specification.unit}\n                    color={color}\n                    size={widgetSize}\n                />\n            )\n\n        return (\n            <TextField\n                id={inputId}\n                spellCheck={false}\n                value={textValue}\n                label={label}\n                inputProps={{\n                    \"aria-label\": label,\n                    \"aria-readonly\": disabled,\n                    readOnly: disabled,\n                }}\n                helperText={helperText}\n                onChange={readOnly ? undefined : handleChange}\n                required={value === undefined}\n                error={!!errorText}\n                type={inputType}\n            />\n        )\n    }\n}\n","import { Grid } from \"@mui/material\"\nimport React from \"react\"\nimport { PackedSimpleValue } from \"../../../jacdac-ts/src/jdom/pack\"\nimport { RegisterInputVariant } from \"../RegisterInput\"\nimport MemberInput from \"./MemberInput\"\n\nexport default function MembersInput(props: {\n    serviceSpecification: jdspec.ServiceSpec\n    serviceMemberSpecification?: jdspec.PacketInfo\n    specifications: jdspec.PacketMember[]\n    values?: PackedSimpleValue[]\n    setValues?: (values: PackedSimpleValue[]) => void\n    showDataType?: boolean\n    color?: \"primary\" | \"secondary\"\n    variant?: RegisterInputVariant\n    min?: number[]\n    max?: number[]\n    resolution?: number[]\n    error?: number[]\n    off?: boolean\n    toggleOff?: () => void\n    controlled?: boolean\n}) {\n    const {\n        serviceSpecification,\n        serviceMemberSpecification,\n        specifications,\n        values,\n        setValues,\n        showDataType,\n        color,\n        variant,\n        min,\n        max,\n        resolution,\n        error,\n        off,\n        toggleOff,\n        controlled,\n    } = props\n    const setValue = (index: number) => (value: PackedSimpleValue) => {\n        const c = values.slice(0)\n        c[index] = value\n        setValues(c)\n    }\n\n    return (\n        <Grid container spacing={1} direction=\"column\">\n            {specifications.map((field, fieldi) => {\n                const value = values?.[fieldi]\n                return (\n                    <Grid item key={fieldi} xs={12}>\n                        <MemberInput\n                            serviceSpecification={serviceSpecification}\n                            serviceMemberSpecification={\n                                serviceMemberSpecification\n                            }\n                            specification={field}\n                            showDataType={showDataType}\n                            value={value}\n                            color={color}\n                            setValue={values && setValues && setValue(fieldi)}\n                            variant={variant}\n                            min={min?.[fieldi]}\n                            max={max?.[fieldi]}\n                            resolution={resolution?.[fieldi]}\n                            error={error?.[fieldi]}\n                            off={off}\n                            toggleOff={toggleOff}\n                            controlled={controlled}\n                        />\n                    </Grid>\n                )\n            })}\n        </Grid>\n    )\n}\n","import { JDBus } from \"../../jacdac-ts/src/jdom/bus\"\nimport { CHANGE } from \"../../jacdac-ts/src/jdom/constants\"\nimport { JDEventSource } from \"../../jacdac-ts/src/jdom/eventsource\"\nimport { JDField } from \"../../jacdac-ts/src/jdom/field\"\nimport { JDRegister } from \"../../jacdac-ts/src/jdom/register\"\nimport {\n    arrayConcatMany,\n    roundWithPrecision,\n} from \"../../jacdac-ts/src/jdom/utils\"\n\nexport class Example {\n    label: string\n    constructor(\n        public readonly timestamp: number,\n        public readonly data: number[]\n    ) {}\n\n    toVector(startTimestamp?: number): number[] {\n        const t = this.timestamp - (startTimestamp || 0)\n        const s = roundWithPrecision(t / 1000, 3)\n        return [s].concat(this.data)\n    }\n}\n\nexport class Recording {\n    constructor(\n        public readonly name: string,\n        public readonly colors: string[],\n        public readonly headers: string[],\n        public readonly rows: Example[],\n        public readonly units: string[]\n    ) {}\n}\n\nexport default class FielddataSet extends JDEventSource {\n    readonly id = Math.random().toString()\n    readonly rows: Example[]\n    headers: string[]\n    units: string[]\n    interval: number\n    maxRows = -1\n\n    // maintain computed min/max/rms/sd to avoid recomputation\n    mins: number[]\n    maxs: number[]\n    rms: number[] // rms is the root mean squared, or average value of the sample\n    sd: number[] // sd is the standard deviation of the sample, a measure of volatility\n\n    static create(\n        bus: JDBus,\n        registers: JDRegister[],\n        name: string,\n        palette: string[],\n        maxRows?: number\n    ): FielddataSet {\n        const fields = arrayConcatMany(registers.map(reg => reg.fields))\n        const colors = fields.map((f, i) => palette[i % palette.length])\n        const set = new FielddataSet(bus, name, fields, colors)\n        if (maxRows !== undefined) set.maxRows = maxRows\n        return set\n    }\n\n    static createFromFile(dataSet: {\n        name: string\n        rows: Example[]\n        headers: string[]\n        units: string[]\n        colors?: string[]\n    }): FielddataSet {\n        const set = new FielddataSet(null, dataSet.name, null, dataSet.colors)\n\n        dataSet.rows.forEach(row => {\n            const { timestamp, data } = row\n            set.addExample(timestamp, data)\n        })\n        set.units = dataSet.units\n        set.headers = dataSet.headers\n        set.colors = dataSet.colors\n\n        return set\n    }\n\n    constructor(\n        public readonly bus: JDBus,\n        public readonly name: string,\n        public readonly fields?: JDField[],\n        public colors: string[] = [\"#000\"]\n    ) {\n        super()\n        this.rows = []\n        if (fields !== undefined && fields !== null) {\n            this.headers = fields.map(field => field.name)\n            this.units = fields.map(field => field.unit)\n        }\n    }\n\n    get startTimestamp() {\n        const row = this.rows[0]\n        return row?.timestamp\n    }\n\n    get duration() {\n        const first = this.rows[0]\n        const last = this.rows[this.rows.length - 1]\n        return (first && last && last.timestamp - first.timestamp) || 0\n    }\n\n    get length() {\n        return this.rows.length\n    }\n\n    get width() {\n        return this.headers.length\n    }\n\n    data(flatten?: boolean) {\n        if (flatten && this.headers.length == 1)\n            return this.rows.map(row => row.data[0])\n        else return this.rows.map(row => row.data)\n    }\n\n    indexOf(field: JDField) {\n        return this.fields.indexOf(field)\n    }\n\n    colorOf(field?: JDField, header?: string) {\n        if (field) return this.colors[this.indexOf(field)]\n        if (header) return this.colors[this.headers.indexOf(header)]\n        return [\"#000\"]\n    }\n\n    addRow(data?: number[]) {\n        const timestamp = this.bus.timestamp\n        if (!data) data = this.fields.map(f => f.value)\n        this.addExample(timestamp, data)\n    }\n\n    addData(data: number[]) {\n        this.addExample(Date.now(), data)\n    }\n\n    private addExample(timestamp: number, data: number[]) {\n        this.rows.push(new Example(timestamp, data))\n\n        // drop rows if needed\n        let refreshminmax = false\n        while (this.maxRows > 0 && this.rows.length > this.maxRows * 1.1) {\n            this.rows.shift()\n            refreshminmax = true\n        }\n\n        if (refreshminmax) {\n            // refresh entire mins/max\n            for (let r = 0; r < this.rows.length; ++r) {\n                const row = this.rows[r]\n                if (r == 0) {\n                    this.mins = row.data.slice(0)\n                    this.maxs = row.data.slice(0)\n                    this.rms = row.data.slice(0)\n                    this.sd = new Array(row.data.length).fill(0)\n                } else {\n                    const n = r\n                    for (let i = 0; i < row.data.length; ++i) {\n                        this.mins[i] = Math.min(this.mins[i], row.data[i])\n                        this.maxs[i] = Math.max(this.maxs[i], row.data[i])\n                        this.rms[i] = Math.sqrt(\n                            (Math.pow(this.rms[i], 2) * (n - 1) +\n                                Math.pow(row.data[i], 2)) /\n                                n\n                        )\n                        this.sd[i] = Math.sqrt(\n                            (Math.pow(this.sd[i], 2) * (n - 1) +\n                                Math.pow(this.rms[i] - row.data[i], 2)) /\n                                n\n                        )\n                    }\n                }\n            }\n        } else {\n            // incremental update\n            if (!this.mins) {\n                this.mins = data.slice(0)\n                this.maxs = data.slice(0)\n                this.rms = data.slice(0)\n                this.sd = new Array(data.length).fill(0)\n            } else {\n                const n = this.rows.length\n                for (let i = 0; i < data.length; ++i) {\n                    this.mins[i] = Math.min(this.mins[i], data[i])\n                    this.maxs[i] = Math.max(this.maxs[i], data[i])\n                    this.rms[i] = Math.sqrt(\n                        (Math.pow(this.rms[i], 2) * (n - 1) +\n                            Math.pow(data[i], 2)) /\n                            n\n                    )\n                    this.sd[i] = Math.sqrt(\n                        (Math.pow(this.sd[i], 2) * (n - 1) +\n                            Math.pow(this.rms[i] - data[i], 2)) /\n                            n\n                    )\n                }\n            }\n        }\n\n        this.emit(CHANGE)\n    }\n\n    toCSV(sep = \",\", options?: { units?: boolean }) {\n        const allheaders = [\"time\", ...this.headers].join(sep)\n        const start = this.startTimestamp\n        const csv: string[] = [allheaders]\n        if (options?.units) csv.push([\"s\", ...this.units].join(sep))\n        this.rows.forEach(row =>\n            csv.push(\n                row\n                    .toVector(start)\n                    .map(cell => (cell !== undefined ? cell.toString() : \"\"))\n                    .join(sep)\n            )\n        )\n        return csv.join(\"\\n\")\n    }\n\n    toJSON() {\n        return {\n            name: this.name,\n            rows: this.rows,\n            headers: this.headers,\n            units: this.units,\n            colors: this.colors,\n        }\n    }\n}\n","import React from \"react\"\nimport { styled } from \"@mui/material/styles\"\nimport FieldDataSet, { Example } from \"./FieldDataSet\"\nimport { roundWithPrecision, unique } from \"../../jacdac-ts/src/jdom/utils\"\nimport { Paper } from \"@mui/material\"\nimport useWidgetTheme from \"./widgets/useWidgetTheme\"\nimport useUnitConverter from \"./ui/useUnitConverter\"\nimport useChange from \"../jacdac/useChange\"\n\nconst PREFIX = \"Trend\"\n\nconst classes = {\n    graph: `${PREFIX}graph`,\n    mini: `${PREFIX}mini`,\n}\n\nconst Root = styled(\"div\")(({ theme }) => ({\n    [`& .${classes.graph}`]: {\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n    },\n\n    [`& .${classes.mini}`]: {\n        display: \"inline-block\",\n        width: \"10rem\",\n    },\n}))\n\nexport interface TrendProps {\n    dataSet: FieldDataSet\n    dot?: boolean\n    gradient?: boolean\n}\n\nfunction UnitTrendChart(\n    props: {\n        data: Example[]\n        useGradient: boolean\n        unit: string\n        vpw: number\n        vph: number\n        yAxis?: boolean\n    } & TrendProps\n) {\n    const { dataSet, useGradient, data, unit, vpw, vph, dot, yAxis } = props\n    const { name: unitName, converter: unitConverter } = useUnitConverter(unit)\n    const { textPrimary } = useWidgetTheme(\"primary\")\n    const shape = unit == \"#\" ? \"step\" : \"line\"\n    const symmetric = unit == \"g\" ? true : false\n\n    useChange(dataSet)\n    const indexes = dataSet.units\n        .map((u, index) => ((u || \"/\") === unit ? index : undefined))\n        .filter(index => index !== undefined)\n    const colors = indexes.map(i => dataSet.colors[i])\n    const times = data.map(ex => ex.timestamp)\n    const maxt = Math.max.apply(null, times)\n    const mint = Math.min.apply(null, times)\n    let minv = unitConverter(\n        unit == \"/\"\n            ? 0\n            : Math.min.apply(\n                  null,\n                  indexes.map(i => dataSet.mins[i])\n              )\n    )\n    let maxv = unitConverter(\n        unit == \"/\"\n            ? 1\n            : Math.max.apply(\n                  null,\n                  indexes.map(i => dataSet.maxs[i])\n              )\n    )\n    const opposite = unit != \"/\" && Math.sign(minv) != Math.sign(maxv)\n    if (isNaN(minv) && isNaN(maxv)) {\n        minv = 0\n        maxv = 1\n    }\n    if (symmetric) {\n        maxv = Math.max(Math.abs(minv), Math.abs(maxv))\n        minv = -maxv\n    }\n\n    const step = undefined\n    const precision =\n        step === undefined ? 1 : step < 1 ? Math.ceil(-Math.log10(step)) : 0\n    minv = roundWithPrecision(minv, precision, Math.floor)\n    maxv = roundWithPrecision(maxv, precision, Math.ceil)\n    const rv = maxv - minv\n\n    const margin = 2\n    const h = maxv - minv || 10\n    const w = maxt - mint || 10\n\n    const strokeWidth = 0.25\n    const axisWidth = 0.2\n    const axisColor = \"#ccc\"\n    const pointRadius = strokeWidth * 1.5\n    const toffset = -pointRadius * 3\n    const fontSize = \"0.3rem\"\n\n    const x = (t: number) => {\n        return ((t - mint) / w) * vpw\n    }\n    const y = (v: number) => {\n        if (v === undefined || isNaN(v)) v = minv\n        // adding random for lineragradient bug workaround\n        // which does not render perfectly\n        // horizontal lines\n        return (\n            ((Math.random() * 0.0001 * rv - (unitConverter(v) - minv)) / h) *\n            (vph - 2 * margin)\n        )\n    }\n    const lastRow = data[data.length - 1]\n\n    return (\n        <>\n            {useGradient && (\n                <defs>\n                    <linearGradient\n                        key={`gradaxis`}\n                        id={`gradientaxis`}\n                        x1=\"0%\"\n                        y1=\"0%\"\n                        x2=\"100%\"\n                        y2=\"0%\"\n                    >\n                        <stop\n                            offset=\"0%\"\n                            stopOpacity=\"0\"\n                            stopColor={axisColor}\n                        />\n                        <stop\n                            offset=\"5%\"\n                            stopOpacity=\"0\"\n                            stopColor={axisColor}\n                        />\n                        <stop\n                            offset=\"40%\"\n                            stopOpacity=\"1\"\n                            stopColor={axisColor}\n                        />\n                        <stop\n                            offset=\"100%\"\n                            stopOpacity=\"1\"\n                            stopColor={axisColor}\n                        />\n                    </linearGradient>\n                    {indexes.map((index, i) => (\n                        <linearGradient\n                            key={`grad${i}`}\n                            id={`gradient${index}`}\n                            x1=\"0%\"\n                            y1=\"0%\"\n                            x2=\"100%\"\n                            y2=\"0%\"\n                        >\n                            <stop\n                                offset=\"0%\"\n                                stopOpacity=\"0\"\n                                stopColor={colors[i]}\n                            />\n                            <stop\n                                offset=\"5%\"\n                                stopOpacity=\"0\"\n                                stopColor={colors[i]}\n                            />\n                            <stop\n                                offset=\"40%\"\n                                stopOpacity=\"1\"\n                                stopColor={colors[i]}\n                            />\n                            <stop\n                                offset=\"100%\"\n                                stopOpacity=\"1\"\n                                stopColor={colors[i]}\n                            />\n                        </linearGradient>\n                    ))}\n                </defs>\n            )}\n            <g transform={`translate(${toffset}, ${vph - margin})`}>\n                {yAxis && (\n                    <g>\n                        <text\n                            x={margin}\n                            y={-vph + margin + margin / 2}\n                            dominantBaseline=\"hanging\"\n                            fontSize={fontSize}\n                            fill={textPrimary}\n                        >\n                            {maxv}\n                            {unitName}\n                        </text>\n                        <text\n                            x={margin}\n                            y={margin - margin / 2}\n                            fontSize={fontSize}\n                            fill={textPrimary}\n                        >\n                            {minv}\n                            {unitName}\n                        </text>\n                    </g>\n                )}\n                {opposite && (\n                    <line\n                        x1={x(mint)}\n                        x2={x(maxt)}\n                        y1={y(0)}\n                        y2={y(0)}\n                        strokeWidth={axisWidth}\n                        stroke={useGradient ? `url(#gradientaxis)` : axisColor}\n                    />\n                )}\n                {indexes.map((index, i) => {\n                    const color = colors[i]\n                    const path =\n                        shape == \"step\"\n                            ? data\n                                  .map((row, ri) =>\n                                      ri == 0\n                                          ? `M ${x(row.timestamp)} ${y(\n                                                row.data[index]\n                                            )}`\n                                          : `H ${x(row.timestamp)} V ${y(\n                                                row.data[index]\n                                            )}`\n                                  )\n                                  .join(\" \")\n                            : data\n                                  .map(\n                                      (row, ri) =>\n                                          `${ri == 0 ? `M` : `L`} ${x(\n                                              row.timestamp\n                                          )} ${y(row.data[index])}`\n                                  )\n                                  .join(\" \")\n                    return (\n                        <g key={`line${index}`}>\n                            <path\n                                d={path}\n                                fill=\"none\"\n                                stroke={\n                                    useGradient\n                                        ? `url(#gradient${index})`\n                                        : color\n                                }\n                                strokeWidth={strokeWidth}\n                                strokeLinejoin=\"round\"\n                            />\n                            {dot && (\n                                <circle\n                                    cx={x(lastRow.timestamp)}\n                                    cy={y(lastRow.data[index])}\n                                    r={pointRadius}\n                                    fill={color}\n                                />\n                            )}\n                        </g>\n                    )\n                })}\n            </g>\n        </>\n    )\n}\n\nfunction UnitTrend(\n    props: {\n        unit: string\n        horizon?: number\n        width?: number\n        height?: number\n        mini?: boolean\n        yAxis?: boolean\n    } & TrendProps\n) {\n    const { dataSet, horizon, width, height, mini, gradient, yAxis } = props\n    const rows = useChange(dataSet, _ => _?.rows)\n\n    const vpw = width || 80\n    const vph = height || 15\n    const data = rows.slice(-horizon)\n    const useGradient = gradient || data.length < rows.length\n    return (\n        <Paper\n            className={classes.graph}\n            variant=\"outlined\"\n            elevation={0}\n            square\n        >\n            <svg\n                viewBox={`0 0 ${vpw} ${vph}`}\n                style={{ maxHeight: mini ? \"5vh\" : \"10vh\", maxWidth: \"100%\" }}\n            >\n                {data.length > 1 && (\n                    <UnitTrendChart\n                        data={data}\n                        useGradient={useGradient}\n                        vpw={vpw}\n                        vph={vph}\n                        dot={true}\n                        yAxis={yAxis}\n                        {...props}\n                    />\n                )}\n            </svg>\n        </Paper>\n    )\n}\n\nexport default function Trend(\n    props: {\n        horizon?: number\n        width?: number\n        height?: number\n        mini?: boolean\n        yAxis?: boolean\n    } & TrendProps\n) {\n    const { dataSet, mini, yAxis } = props\n\n    const units = useChange(dataSet, _ => unique(_?.units.filter(u => !!u)))\n    return (\n        <Root className={mini ? classes.mini : undefined}>\n            {units.map(unit => (\n                <UnitTrend\n                    key={`graph${unit}`}\n                    mini={mini}\n                    yAxis={yAxis}\n                    unit={unit}\n                    {...props}\n                />\n            ))}\n        </Root>\n    )\n}\n","import { useContext, useMemo } from \"react\"\nimport DarkModeContext from \"./ui/DarkModeContext\"\n\nexport default function useChartPalette(): string[] {\n    const { darkMode } = useContext(DarkModeContext)\n    const palette = useMemo(() => {\n        if (darkMode == \"light\")\n            return [\n                \"#003f5c\",\n                \"#ffa600\",\n                \"#665191\",\n                \"#a05195\",\n                \"#ff7c43\",\n                \"#d45087\",\n                \"#f95d6a\",\n                \"#2f4b7c\",\n            ]\n        else\n            return [\n                \"#60ccfe\",\n                \"#ffdd9e\",\n                \"#c3b9d8\",\n                \"#dcbbd7\",\n                \"#fecdb7\",\n                \"#eebcd1\",\n                \"#fcc1c6\",\n                \"#a1b6db\",\n            ]\n    }, [darkMode])\n    return palette\n}\n","import React, { useCallback, useContext, useEffect, useMemo } from \"react\"\nimport { REPORT_RECEIVE } from \"../../jacdac-ts/src/jdom/constants\"\nimport { JDRegister } from \"../../jacdac-ts/src/jdom/register\"\nimport JacdacContext, { JacdacContextProps } from \"../jacdac/Context\"\nimport FieldDataSet from \"./FieldDataSet\"\nimport Trend from \"./Trend\"\nimport useChartPalette from \"./useChartPalette\"\nimport useInterval from \"./hooks/useInterval\"\n\nconst DEFAULT_HORIZON = 255\nconst DEFAULT_HEIGHT = 12\n\nexport default function RegisterTrend(props: {\n    register: JDRegister\n    showName?: boolean\n    horizon?: number\n    height?: number\n    mini?: boolean\n    interval?: number\n}) {\n    const {\n        register,\n        mini,\n        horizon = DEFAULT_HORIZON,\n        height,\n        interval,\n    } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const palette = useChartPalette()\n    const dataSet = useMemo(\n        () =>\n            FieldDataSet.create(\n                bus,\n                [register],\n                \"output\",\n                palette,\n                horizon * 1.2\n            ),\n        [register, palette]\n    )\n    const addRow = useCallback(() => dataSet.addRow(), [dataSet])\n    // register on change if no intervals\n    useEffect(\n        () =>\n            interval ? undefined : register?.subscribe(REPORT_RECEIVE, addRow),\n        [interval, register, addRow]\n    )\n    useInterval(!!interval, addRow, interval)\n\n    return (\n        <Trend\n            dataSet={dataSet}\n            horizon={horizon}\n            gradient={true}\n            height={height || DEFAULT_HEIGHT}\n            mini={mini}\n            yAxis={true}\n        />\n    )\n}\n","import { JDRegister } from \"../../../jacdac-ts/src/jdom/register\"\nimport useServiceServer from \"./useServiceServer\"\n\nexport default function useRegisterServer(register: JDRegister) {\n    const server = useServiceServer(register?.service)\n    return server?.register(register?.code)\n}\n","import { SystemReg } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { JDRegister } from \"../../../jacdac-ts/src/jdom/register\"\nimport { useRegisterUnpackedValue } from \"../../jacdac/useRegisterValue\"\nimport useRegister from \"./useRegister\"\n\nexport default function useReadingAuxilliaryValue(\n    register: JDRegister,\n    identifier: number = SystemReg.ReadingError |\n        SystemReg.ReadingResolution |\n        SystemReg.MaxReading |\n        SystemReg.MinReading |\n        SystemReg.MinValue |\n        SystemReg.MaxValue |\n        SystemReg.StreamingInterval |\n        SystemReg.StreamingPreferredInterval,\n    options?: { visible?: boolean }\n): number[] {\n    const { service, code } = register || {}\n    const { visible } = options || { visible: true }\n    const reading = code === SystemReg.Reading || code === SystemReg.Value\n    const auxilliaryRegister = useRegister(reading ? service : undefined, identifier)\n    return useRegisterUnpackedValue<[number]>(auxilliaryRegister, { visible })\n}\n","import { Box, Typography } from \"@mui/material\"\nimport DeviceName from \"./devices/DeviceName\"\nimport Alert from \"./ui/Alert\"\nimport React, { useEffect, useState } from \"react\"\n// tslint:disable-next-line: no-submodule-imports\nimport { JDRegister } from \"../../jacdac-ts/src/jdom/register\"\nimport { REPORT_UPDATE, SystemReg } from \"../../jacdac-ts/src/jdom/constants\"\nimport MembersInput from \"./fields/MembersInput\"\nimport RegisterTrend from \"./RegisterTrend\"\nimport IconButtonWithProgress from \"./ui/IconButtonWithProgress\"\nimport useRegisterServer from \"./hooks/useRegisterServer\"\nimport useReadingAuxilliaryValue from \"./hooks/useReadingAuxilliaryValue\"\nimport useChange from \"../jacdac/useChange\"\nimport { isReadOnlyRegister } from \"../../jacdac-ts/src/jdom/spec\"\nimport useSnackbar from \"./hooks/useSnackbar\"\nimport { humanify } from \"../../jacdac-ts/jacdac-spec/spectool/jdspec\"\n\nexport type RegisterInputVariant = \"widget\" | \"\"\n\nexport default function RegisterInput(props: {\n    register: JDRegister\n    showDeviceName?: boolean\n    showServiceName?: boolean\n    showRegisterName?: boolean\n    hideMissingValues?: boolean\n    showTrend?: boolean\n    showDataType?: boolean\n    variant?: RegisterInputVariant\n    off?: boolean\n    toggleOff?: () => void\n    visible?: boolean\n    controlled?: boolean\n}) {\n    const {\n        register,\n        showRegisterName,\n        showDeviceName,\n        showServiceName,\n        hideMissingValues,\n        showTrend,\n        showDataType,\n        variant,\n        off,\n        toggleOff,\n        visible,\n        controlled,\n    } = props\n    const { service, specification } = register\n    const { device } = service\n    const { fields, code } = register\n    const { setError: setAppError } = useSnackbar()\n    const [working, setWorking] = useState(false)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const [args, setArgs] = useState<any[]>(register.unpackedValue || [])\n    const server = useRegisterServer(register)\n    const hasSet =\n        specification.kind === \"rw\" ||\n        (server && specification.kind !== \"const\")\n    const hasData = useChange(register, _ => !!_.data)\n    const color = hasSet ? \"secondary\" : \"primary\"\n    const regProps = visible !== undefined ? { visible } : undefined\n    const isReading = code === SystemReg.Reading\n    const isValue = !isReading && code === SystemReg.Value\n    const min = useReadingAuxilliaryValue(\n        register,\n        isReading\n            ? SystemReg.MinReading\n            : isValue\n            ? SystemReg.MinValue\n            : undefined,\n        regProps\n    )\n    const max = useReadingAuxilliaryValue(\n        register,\n        isReading\n            ? SystemReg.MaxReading\n            : isValue\n            ? SystemReg.MaxValue\n            : undefined,\n        regProps\n    )\n    const readingError = useReadingAuxilliaryValue(\n        register,\n        SystemReg.ReadingError,\n        regProps\n    )\n    const resolution = useReadingAuxilliaryValue(\n        register,\n        SystemReg.ReadingResolution,\n        regProps\n    )\n\n    useEffect(() => {\n        const vs = register.unpackedValue\n        if (vs !== undefined) setArgs(vs)\n        return visible\n            ? register.subscribe(REPORT_UPDATE, () => {\n                  const vs = register.unpackedValue\n                  if (vs !== undefined) setArgs(vs)\n              })\n            : undefined\n    }, [register, visible])\n    const handleRefresh = () => {\n        register.refresh(true)\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const sendArgs = async (values: any[]) => {\n        if (working) return\n        try {\n            setWorking(true)\n            if (server) server.setValues(values)\n            // don't send set commands to rw registers\n            if (!isReadOnlyRegister(register.specification))\n                await register.sendSetPackedAsync(values, true)\n            // force refresh in any case\n            register.scheduleRefresh()\n        } catch (e) {\n            setAppError(e)\n        } finally {\n            setWorking(false)\n        }\n    }\n\n    if (!specification)\n        return (\n            <Alert severity=\"error\">{`Unknown member ${register.service}:${register.code}`}</Alert>\n        )\n\n    if (!fields.length) return null // nothing to see here\n\n    if (hideMissingValues && !hasData) return null\n\n    const serviceName = register.service.name\n        .toLocaleLowerCase()\n        .replace(/_/g, \" \")\n    const registerName = humanify(specification.name)\n    return (\n        <>\n            {showDeviceName && (\n                <Typography component=\"span\" key=\"devicenamename\">\n                    <DeviceName device={device} />/\n                </Typography>\n            )}\n            {showServiceName && specification && (\n                <Typography\n                    variant=\"caption\"\n                    key=\"servicename\"\n                    aria-label={serviceName}\n                >\n                    {serviceName}\n                </Typography>\n            )}\n            {showRegisterName &&\n                specification &&\n                serviceName !== registerName && (\n                    <Typography\n                        variant=\"caption\"\n                        key=\"registername\"\n                        aria-label={registerName}\n                    >\n                        {\" \" + registerName}\n                    </Typography>\n                )}\n            {!hasData && (\n                <Box>\n                    <IconButtonWithProgress\n                        title={`refresh ${registerName}`}\n                        indeterminate={true}\n                        onClick={handleRefresh}\n                    />\n                </Box>\n            )}\n            {showTrend && hasData && (\n                <RegisterTrend register={register} mini={false} horizon={24} />\n            )}\n            {hasData && (\n                <MembersInput\n                    color={color}\n                    serviceSpecification={service.specification}\n                    serviceMemberSpecification={specification}\n                    specifications={fields.map(f => f.specification)}\n                    values={args}\n                    setValues={hasSet && sendArgs}\n                    showDataType={showDataType}\n                    variant={variant}\n                    min={min}\n                    max={max}\n                    resolution={resolution}\n                    error={readingError}\n                    off={off}\n                    toggleOff={toggleOff}\n                    controlled={controlled}\n                />\n            )}\n        </>\n    )\n}\n","import React, { ReactNode } from \"react\"\nimport DevicesIcon from \"@mui/icons-material/Devices\"\nimport useRoleManagerClient from \"../services/useRoleManagerClient\"\nimport useChange from \"../../jacdac/useChange\"\nimport CmdButton from \"../CmdButton\"\nimport { delay } from \"../../../jacdac-ts/src/jdom/utils\"\n\nexport default function StartMissingSimulatorsButton(props: {\n    variant?: \"contained\" | \"outlined\"\n    trackName?: string\n    children?: ReactNode\n    disabledChildren?: ReactNode\n    hideOnDisabled?: boolean\n}) {\n    const {\n        trackName,\n        children,\n        disabledChildren,\n        variant = \"outlined\",\n        hideOnDisabled,\n    } = props\n    const roleManagerClient = useRoleManagerClient()\n    const allRolesBound = useChange(roleManagerClient, _ => _?.allRolesBound())\n    const handleStartSimulators = async () => {\n        roleManagerClient?.startSimulators()\n        await delay(1000)\n    }\n    const disabled = !roleManagerClient || allRolesBound\n\n    if (disabled && hideOnDisabled) return null\n\n    // TODO: i18n\n    const enabledTooltip =\n        \"Create a simulator for each Role without an assigned device\"\n    const disabledTooltip =\n        \"This button becomes available if there are Roles without assignable devices\"\n\n    return (\n        <CmdButton\n            size=\"small\"\n            title={disabled ? disabledTooltip : enabledTooltip}\n            variant={variant}\n            trackName={trackName}\n            onClick={handleStartSimulators}\n            disabled={disabled}\n            icon={<DevicesIcon />}\n        >\n            {disabled && disabledChildren !== undefined\n                ? disabledChildren\n                : children}\n        </CmdButton>\n    )\n}\n","import React, { useMemo } from \"react\"\nimport { SystemReg } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { isRegister } from \"../../../jacdac-ts/src/jdom/spec\"\nimport RegisterInput from \"../RegisterInput\"\nimport { JDRegister } from \"../../../jacdac-ts/src/jdom/register\"\nimport {\n    useRegisterBoolValue,\n    useRegisterUnpackedValue,\n} from \"../../jacdac/useRegisterValue\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\n\nconst collapsedRegisters = [\n    SystemReg.Reading,\n    SystemReg.Value,\n    SystemReg.Intensity,\n]\n\nfunction ValueWidget(\n    props: {\n        valueRegister: JDRegister\n        intensityRegister: JDRegister\n    } & DashboardServiceProps\n) {\n    const { valueRegister, intensityRegister, controlled, ...others } = props\n    const { visible } = others\n    const hasIntensityBool =\n        intensityRegister?.specification?.fields[0]?.type === \"bool\"\n    const intensity = useRegisterBoolValue(\n        hasIntensityBool && intensityRegister,\n        others\n    )\n    const off = hasIntensityBool ? !intensity : undefined\n    const toggleOff = async () => {\n        await intensityRegister.sendSetBoolAsync(off, true)\n    }\n\n    return (\n        <RegisterInput\n            register={valueRegister}\n            variant={\"widget\"}\n            showServiceName={false}\n            showRegisterName={false}\n            hideMissingValues={true}\n            off={off}\n            toggleOff={hasIntensityBool ? toggleOff : undefined}\n            visible={visible}\n            controlled={controlled}\n        />\n    )\n}\n\nfunction IntensityWidget(\n    props: { intensityRegister: JDRegister } & DashboardServiceProps\n) {\n    const { intensityRegister, controlled, ...others } = props\n    const { visible } = others\n\n    const hasIntensityBool =\n        intensityRegister?.specification?.fields[0]?.type === \"bool\"\n    const [intensity] = useRegisterUnpackedValue<[number | boolean]>(\n        intensityRegister,\n        others\n    )\n    const off = hasIntensityBool ? !intensity : undefined\n\n    return (\n        <RegisterInput\n            register={intensityRegister}\n            variant={\"widget\"}\n            showServiceName={false}\n            showRegisterName={false}\n            hideMissingValues={true}\n            off={off}\n            visible={visible}\n            controlled={controlled}\n        />\n    )\n}\n\nfunction DefaultRegisterWidget(\n    props: { register: JDRegister } & DashboardServiceProps\n) {\n    const { register, controlled, ...rest } = props\n    if (register.specification.identifier == SystemReg.Value) {\n        const intensityRegister = props.service.register(SystemReg.Intensity)\n        return (\n            <ValueWidget\n                valueRegister={register}\n                intensityRegister={intensityRegister}\n                controlled={controlled}\n                {...rest}\n            />\n        )\n    } else if (register.specification.identifier === SystemReg.Intensity)\n        return (\n            <IntensityWidget\n                intensityRegister={register}\n                controlled={controlled}\n                {...rest}\n            />\n        )\n    else\n        return (\n            <RegisterInput\n                register={register}\n                variant={\"widget\"}\n                showServiceName={false}\n                showRegisterName={false}\n                hideMissingValues={true}\n                visible={props.visible}\n                controlled={controlled}\n            />\n        )\n}\n\nexport default function DashboardServiceDefaultWidget(\n    props: DashboardServiceProps\n) {\n    const { service } = props\n    const { specification } = service\n    const registers = useMemo(\n        () =>\n            specification?.packets\n                .filter(\n                    pkt =>\n                        isRegister(pkt) &&\n                        collapsedRegisters.indexOf(pkt.identifier) > -1\n                )\n                // if value, skip bool intensity\n                .filter(\n                    (pkt, i, pkts) =>\n                        !(\n                            pkt.identifier === SystemReg.Intensity &&\n                            pkt.fields.length == 1 &&\n                            pkt.fields[0].type === \"bool\"\n                        ) || !pkts.some(pk => pk.identifier === SystemReg.Value)\n                )\n                // map\n                .map(rspec => service.register(rspec.identifier)),\n        [service]\n    )\n\n    if (!registers?.length)\n        // nothing to see here\n        return null\n\n    return (\n        <>\n            {registers.map(register => (\n                <DefaultRegisterWidget\n                    key={register.id}\n                    register={register}\n                    {...props}\n                />\n            ))}\n        </>\n    )\n}\n","import React, { useCallback, useEffect, useRef } from \"react\"\nimport {\n    LedStripVariant,\n    LedVariant,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport useFireKey from \"../hooks/useFireKey\"\nimport \"./fwd-edu.css\"\n\nexport const MIN_VISIBLE_OPACITY = 0.5\n\nfunction rgbToHsl(r: number, g: number, b: number): [number, number, number] {\n    const [r$, g$, b$] = [r / 255, g / 255, b / 255]\n    const cMin = Math.min(r$, g$, b$)\n    const cMax = Math.max(r$, g$, b$)\n    const cDelta = cMax - cMin\n    let h: number\n    let s: number\n    let l: number\n    const maxAndMin = cMax + cMin\n\n    //lum\n    l = (maxAndMin / 2) * 100\n\n    if (cDelta === 0) s = h = 0\n    else {\n        //hue\n        if (cMax === r$) h = 60 * (((g$ - b$) / cDelta) % 6)\n        else if (cMax === g$) h = 60 * ((b$ - r$) / cDelta + 2)\n        else if (cMax === b$) h = 60 * ((r$ - g$) / cDelta + 4)\n\n        //sat\n        if (l > 50) s = 100 * (cDelta / (2 - maxAndMin))\n        else s = 100 * (cDelta / maxAndMin)\n    }\n\n    // at least 30% luminosity\n    l = Math.max(l, 40)\n    return [Math.floor(h), Math.floor(s), Math.floor(l)]\n}\n\nfunction setRgba(\n    el: SVGElement,\n    r: number,\n    g: number,\n    b: number,\n    a: number,\n    radius?: number\n) {\n    const hsl = rgbToHsl(r, g, b)\n    const [h, s, l] = hsl\n    const fill = `hsla(${h}, ${s}%, ${l}%, ${a})`\n    el.setAttribute(\"fill\", fill)\n    if (radius !== undefined) {\n        const nr = radius * (1 + (l - 60) / 200)\n        el.setAttribute(\"r\", \"\" + nr)\n    }\n}\n\nfunction setRgbaLeds(\n    pixelsContainer: SVGElement,\n    colors: Uint8Array,\n    alpha: number,\n    radius?: number\n) {\n    const pixels = pixelsContainer?.children\n    if (!colors || !pixels) return\n\n    const pn = Math.min(pixels.length, colors.length / 3)\n    let ci = 0\n    for (let i = 0; i < pn; ++i) {\n        const pixel = pixels.item(i) as SVGElement\n        setRgba(\n            pixel,\n            colors[ci],\n            colors[ci + 1],\n            colors[ci + 2],\n            alpha,\n            radius\n        )\n        ci += 3\n    }\n}\n\nfunction brightnessToOpacity(actualBrightness: number) {\n    // tune opacity to account for global opacity\n    const alpha = MIN_VISIBLE_OPACITY\n    const opacity =\n        actualBrightness <= 0\n            ? 0\n            : alpha + (1 - alpha) * (actualBrightness || 0)\n    return opacity\n}\n\nexport default function FwdLEDWidget(props: {\n    colors: () => Uint8Array\n    subscribeColors?: (handler: () => void) => () => void\n    lightVariant: LedStripVariant | LedVariant\n    numPixels: number\n    actualBrightness: number\n    widgetSize?: string\n    onLedClick?: (index: number) => void\n}) {\n    const {\n        lightVariant,\n        numPixels,\n        actualBrightness,\n        subscribeColors,\n        widgetSize,\n        onLedClick,\n        colors,\n    } = props\n    const { background, controlBackground } = useWidgetTheme()\n    const pathRef = useRef<SVGPathElement>(undefined)\n    const pixelsRef = useRef<SVGGElement>(undefined)\n    const neoradius = 6\n    const neocircleradius = neoradius + 1\n    const isJewel = lightVariant === LedStripVariant.Jewel\n    const isRing = lightVariant === LedStripVariant.Ring\n    const opacity = brightnessToOpacity(actualBrightness)\n\n    // paint svg via dom\n    const paint = useCallback(() => {\n        setRgbaLeds(pixelsRef.current, colors(), opacity, neocircleradius)\n    }, [colors, opacity, neocircleradius])\n\n    // reposition pixels along the path\n    useEffect(() => {\n        const p = pathRef.current\n        const pixelGroup = Object.values(pixelsRef.current?.children).map(\n            g => g.children\n        )\n        const pixels = pixelGroup.map(g => g[1])\n        const pixelBoxes = pixelGroup.map(g => g[0])\n        if (!p || !pixels) return\n\n        const offset = isJewel ? 1 : 0\n        const pn = pixels.length\n        const length = p.getTotalLength()\n        const extra = isRing || isJewel ? 0 : 1\n        const step = length / (pn - offset)\n        const MAGIC_NUMBER = length * (1 / 16 + 0.25)\n\n        for (let i = offset; i < pn; ++i) {\n            const pixel = pixels[i] as SVGCircleElement\n            const box = pixelBoxes[i] as SVGRectElement\n            const boxSize = 1.3 * pixel.r.baseVal.value\n            const rotation = 360 * (i / pn + 9 / 16)\n            const pos = i - offset\n            const point = p.getPointAtLength(\n                (MAGIC_NUMBER + step * (pos + extra / 2.0)) % length\n            )\n            pixel.setAttribute(\"cx\", `${point.x}`)\n            pixel.setAttribute(\"cy\", `${point.y}`)\n            box.setAttribute(\"x\", `${point.x - boxSize}`)\n            box.setAttribute(\"y\", `${point.y - boxSize}`)\n            box.setAttribute(\"width\", `${2 * boxSize}`)\n            box.setAttribute(\"height\", `${2 * boxSize}`)\n            box.setAttribute(\n                \"transform\",\n                `rotate(${rotation}, ${point.x}, ${point.y})`\n            )\n        }\n\n        paint()\n    }, [lightVariant, numPixels, paint, pathRef.current, pixelsRef.current])\n\n    // render when new colors are in\n    useEffect(() => subscribeColors?.(paint), [paint, subscribeColors])\n\n    let d = \"\"\n    const n = numPixels - (isJewel ? 1 : 0)\n    const neoperimeter = n * (2.7 * neoradius)\n    const margin = 1.8 * neoradius\n    const ringradius = (2.2 * neoperimeter) / (2 * Math.PI)\n    const width = 2 * (margin + ringradius)\n    const height = width\n    const hm = height - 2 * margin\n    d = `M ${\n        width >> 1\n    },${margin} a ${ringradius},${ringradius} 0 0,1 0,${hm} a ${ringradius},${ringradius} 0 0,1 0, -${hm}`\n\n    return (\n        <SvgWidget width={width} height={height} size={widgetSize}>\n            <g className={\"fwdEduWidget\"}>\n                <g\n                    transform={`scale(${\n                        width /\n                        (1 +\n                            117 +\n                            2 * 15.5 -\n                            2 * 9.5 +\n                            2 * 3.25 +\n                            2 * (8 - 3.25))\n                    })`}\n                >\n                    <defs>\n                        <g id=\"jacdac-connector\">\n                            <path\n                                fill=\"#AAA\"\n                                d=\"M22.369 14.045H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 12c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.656.173h18.332c.9 0 1.631.712 1.631 1.59v.91c0 .878-.73 1.59-1.631 1.59zM4.124 12c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 12c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077zM4.187 18c0-.404-.167-.791-.464-1.077a1.618 1.618 0 0 0-1.121-.446c-.42 0-.824.16-1.12.446A1.493 1.493 0 0 0 1.016 18c0 .404.167.791.464 1.077.297.285.7.446 1.121.446.42 0 .823-.16 1.12-.446.298-.286.465-.673.465-1.077zm16.157 2.045H4.098a2.692 2.692 0 0 1-2.695.173C.54 19.788 0 18.933 0 18s.54-1.788 1.403-2.218a2.692 2.692 0 0 1 2.695.173h16.246c.915 0 1.656.712 1.656 1.59v.91c0 .878-.741 1.59-1.656 1.59zM24 6.455c0 .878-.73 1.59-1.631 1.59H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 6c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.65.168l.006.005h18.332c.9 0 1.631.712 1.631 1.59ZM4.124 6c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 6c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077z\"\n                            />\n                        </g>\n                    </defs>\n                    <g>\n                        <path\n                            id=\"outline\"\n                            fill=\"white\"\n                            stroke=\"black\"\n                            strokeWidth=\"1\"\n                            d=\"\n                      M 0.5, 0.5\n                      m 5.25, 8\n                      a 8,8 0 0 1 8,-8\n                      h 117\n                      a 8,8 0 0 1 8,8\n                      v 32\n                      a 4.25,4.25 0 0 1 -4.25,4.25\n                      h -9.5\n                      a 4.25,4.25 0 0 0 -4.25,4.25\n                      v 3\n                      a 4.25,4.25 0 0 0 4.25,4.25\n                      h 15.5\n                      a 3.5,3.5 0 0 1 3.5,3.5\n                      v 19\n                      a 3.5,3.5 0 0 1 -3.5,3.5\n                      h -15.5\n                      a 4.25,4.25 0 0 0 -4.25,4.25\n                      v 3\n                      a 4.25,4.25 0 0 0 4.25,4.25\n                      h 9.5\n                      a 4.25,4.25 0 0 1 4.25,4.25\n                      v 32\n                      a 8,8 0 0 1 -8,8\n                      h -117\n                      a 8,8 0 0 1 -8,-8\n                      v -32\n                      a 4.25,4.25 0 0 1 4.25,-4.25\n                      h 9.5\n                      a 4.25,4.25 0 0 0 4.25,-4.25\n                      v -3\n                      a 4.25,4.25 0 0 0 -4.25,-4.25\n                      h -15.5\n                      a 3.5,3.5 0 0 1 -3.5,-3.5\n                      v -19\n                      a 3.5,3.5 0 0 1 3.5,-3.5\n                      h 15.5\n                      a 4.25,4.25 0 0 0 4.25,-4.25\n                      v -3\n                      a 4.25,4.25 0 0 0 -4.25,-4.25\n                      h -9.5\n                      a 4.25,4.25 0 0 1 -4.25,-4.25\n                      v -16.5\n                      a 4.25,4.25 0 0 0 0,-8.5\n                      z\n                    \"\n                        ></path>\n                    </g>\n                    <g transform=\"translate(125,12)\">\n                        <circle fill=\"black\" r=\"1.75\" />\n                        <path\n                            stroke=\"black\"\n                            strokeWidth=\"1.5\"\n                            fill=\"none\"\n                            d=\"\n                      m -2.5 -3\n                      a 4 4 0 0 0 0 6\n                      M -4 -4.5\n                      a 6.25 6.25 0 0 0 0 9\n                      M 2.5 -3\n                      a 4 4 0 0 1 0 6\n                      M 4 -4.5\n                      a 6.25 6.25 0 0 1 0 9\n                    \"\n                        />\n                    </g>\n                    <use\n                        href=\"#jacdac-connector\"\n                        transform=\"translate(120 60) scale(0.8)\"\n                    />\n                    <use\n                        href=\"#jacdac-connector\"\n                        transform=\"translate(24 60) translate(0 11) rotate(180) scale(0.8) translate(0 -11) \"\n                    />\n                    <text x={16} y={15} fontSize={10}>\n                        LED\n                    </text>\n                </g>\n                <path ref={pathRef} d={d} fill=\"transparent\" />\n                <g\n                    ref={pixelsRef}\n                    transform={`translate(${width / 2} ${\n                        height / 2\n                    }) scale(0.65) translate(${-width / 2} ${-height / 2})`}\n                >\n                    {Array(numPixels)\n                        .fill(0)\n                        .map((_, i) => {\n                            const handleClick = onLedClick\n                                ? () => onLedClick(i)\n                                : undefined\n                            const fireClick = useFireKey(handleClick)\n                            return (\n                                <g\n                                    className={`${\n                                        fireClick ? \"clickeable\" : \"\"\n                                    } pixel`}\n                                    key={\"pixel\" + i}\n                                    onPointerDown={handleClick}\n                                    onKeyDown={fireClick}\n                                >\n                                    <rect\n                                        x={\n                                            (width >> 1) -\n                                            (neocircleradius >> 1)\n                                        }\n                                        y={\n                                            (height >> 1) -\n                                            (neocircleradius >> 1)\n                                        }\n                                        rx={2}\n                                        fill=\"#fffde0\"\n                                        stroke=\"#5b5b5b\"\n                                        strokeWidth={1}\n                                    />\n                                    <circle\n                                        r={neocircleradius}\n                                        cx={width >> 1}\n                                        cy={height >> 1}\n                                        stroke={controlBackground}\n                                        strokeWidth={1 + (i == 0 ? 0.5 : 0)}\n                                        aria-label={`pixel ${i}`}\n                                    >\n                                        <title>pixel {i}</title>\n                                    </circle>\n                                </g>\n                            )\n                        })}\n                </g>\n            </g>\n        </SvgWidget>\n    )\n}\n\nexport interface LedServerRegs {\n    pixels?: number\n    numPixels: number\n    variant: number\n    actualBrightness: number\n    numColumns: number\n}\n","import React, {useRef} from \"react\"\nimport SvgWidget from \"./SvgWidget\"\nimport useAnimationFrame from \"../hooks/useAnimationFrame\"\nimport \"./fwd-edu.css\"\n\nexport default function FwdPumpWidget(props: {\n    size: string,\n    active: boolean\n}) {\n    const {\n        size,\n        active,\n    } = props\n    const svgDiameter = 110\n    const impellerRef = useRef<SVGGElement>()\n    const impellerRotationRef = useRef(0)\n    const impellerRotationRate = 190\n\n    useAnimationFrame(\n      active ? timeDelta => {\n        const impeller = impellerRef.current\n        impellerRotationRef.current = (impellerRotationRef.current + impellerRotationRate / timeDelta ) % 360\n        impeller.setAttribute(\"transform\", `rotate(${impellerRotationRef.current})`)\n        return true\n      } : undefined,\n      [active]\n    )\n\n    return (\n      <SvgWidget size={size} width={1} viewBox={`${svgDiameter / -2} ${svgDiameter / -2} ${svgDiameter} ${svgDiameter}`}>\n        <defs>\n          <g id=\"fwd-pump-strut\">\n            <rect x={-2} y={7} width={4} height={4} />\n          </g>\n        </defs>\n        <g ref={impellerRef}>\n          <circle r={6}  fill={\"transparent\"} stroke={\"black\"} strokeWidth={3} />\n          <circle r={12} fill={\"transparent\"} stroke={\"black\"} strokeWidth={5} />\n          <use href=\"#fwd-pump-strut\" x={0} y={0} transform=\"rotate(10)\" />\n          <use href=\"#fwd-pump-strut\" x={0} y={0} transform=\"rotate(-110)\" />\n          <use href=\"#fwd-pump-strut\" x={0} y={0} transform=\"rotate(130)\" />\n          <circle r={10} fill={\"transparent\"} stroke={\"white\"} strokeWidth={0.5} />\n  \n          <path id=\"fwd-pump-prop\" fill={\"black\"} stroke={\"#a2a2a2\"} strokeWidth={0.5} d=\"\n            M 14,-1\n            q 0,2 3,2\n            t 12,-0.5\n            t 14,3.6\n            t -1,11\n            t -16,9.5\n            t -18,-4\n            Q 4,16 3.5,13.5\n            z\n          \"/>\n          <use href=\"#fwd-pump-prop\" x={\"0\"} y={\"0\"} transform=\"rotate(90)\" />\n          <use href=\"#fwd-pump-prop\" x={\"0\"} y={\"0\"} transform=\"rotate(180)\" />\n          <use href=\"#fwd-pump-prop\" x={\"0\"} y={\"0\"} transform=\"rotate(270)\" />\n          <circle r={14} fill={\"transparent\"} stroke={\"white\"} strokeWidth={1} />\n \n        </g>\n        <circle r={45} stroke={\"#a2a2a2\"} strokeOpacity={\"60%\"} strokeWidth={12} fill=\"transparent\"/>\n      </SvgWidget>\n    )\n}\n","import React, { useRef } from \"react\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport PowerButton from \"./PowerButton\"\nimport useAnimationFrame from \"../hooks/useAnimationFrame\"\nimport { polarToCartesian } from \"./svgutils\"\nimport \"./fwd-edu.css\"\n\nexport default function FwdServoWidget(props: {\n    angle: number\n    offset: number\n    color: \"primary\" | \"secondary\"\n    enabled?: boolean\n    toggleOff?: () => void\n    widgetSize?: string\n    rotationRate?: number\n    visible?: boolean\n}) {\n    const {\n        widgetSize,\n        toggleOff,\n        angle,\n        offset,\n        color,\n        enabled,\n        rotationRate,\n        visible,\n    } = props\n    const { background, active, textProps } =\n        useWidgetTheme(color)\n    const continuous = rotationRate !== undefined\n    const offsetRef = useRef(0)\n    const armRef = useRef<SVGPathElement>()\n    const textRef = useRef<SVGTextElement>()\n\n    const cx = 78\n    const cy = 55\n\n    const a = enabled ? angle + (offset || 0) : 90\n    const transform = `rotate(${-a + 90}, ${cx}, ${cy})`\n    const h = 111.406\n    const w = 158.50195\n    const pr = 14\n    const pri = 6\n    const text = enabled ? `${Math.round(a)}°` : \"off\"\n\n    useAnimationFrame(\n        continuous && enabled && visible && rotationRate !== undefined\n            ? time => {\n                  const arm = armRef.current\n                  if (!arm) return\n                  const text = textRef.current\n\n                  let offset = offsetRef.current\n                  offset = (offset + (time / 1000) * rotationRate) % 360\n                  offsetRef.current = offset\n                  const transform = `rotate(${offset}, ${cx}, ${cy})`\n                  arm.setAttribute(\"transform\", transform)\n                  text.childNodes[0].nodeValue = `${Math.round(\n                      rotationRate / 360 * 60\n                  )} rpm`\n\n                  return true\n              }\n            : undefined,\n        [continuous, visible, enabled, rotationRate]\n    )\n\n    function generateGearPath (cx:number, cy: number, id: number, od: number, teeth: number) {\n      function* pathDiameter() { while (true) { yield id/2; yield od/2 } }\n      const drawDiameter = pathDiameter()\n      const makePoint = (dia: number, offset: number) => polarToCartesian(cx, cy, dia, offset)\n      const segmentOffset = 180/(2 * teeth)\n      let dia = 0\n      const updateDia = () => { dia = drawDiameter.next().value as number; return true }\n      updateDia()\n      const drawPoint = (dia:number, offset:number) => { const {x,y} = makePoint(dia, offset); return `${x},${y}` }\n      let gearPath = `M ${drawPoint(dia, 0)}`\n      gearPath += `C ${drawPoint(dia, segmentOffset)} ${updateDia() && drawPoint(dia, segmentOffset)} ${drawPoint(dia, 2*segmentOffset)}`\n      for ( let i=3; i<4*teeth; i+=2 ) {\n        updateDia()\n        gearPath += `S ${drawPoint(dia, i*segmentOffset)} ${drawPoint(dia, (i+1)*segmentOffset)}`\n      }\n      return gearPath\n    }\n    const fwdGearPaths = { small: generateGearPath(cx, cy, 18, 27, 10), large: generateGearPath(cx, cy, 66, 80, 30) }\n\n    return (\n        <SvgWidget\n            title={`servo at angle ${angle}`}\n            width={w}\n            height={h}\n            size={widgetSize}\n        >\n            <g className={\"fwdEduWidget\"}>\n              <rect\n                  fill={continuous ? \"#333\" : \"#666\"}\n                  x={0}\n                  y={10.687}\n                  width={158.62}\n                  height={89.75}\n                  rx={4}\n                  ry={4}\n              />\n              {!continuous && <path transform={transform} fill={\"white\"} d={fwdGearPaths.large}/>}\n              {!continuous && <g transform=\"translate(-51 0)\"><path transform={`rotate(${3*a}, ${cx}, ${cy})`} fill={\"white\"} d={fwdGearPaths.small}/></g>}\n              <path\n                  fill={continuous ? \"#555\" : \"#999\"}\n                  fillOpacity={continuous ? \"100%\" : \"70%\"}\n                  d=\"M123.8 55.641 c0-24.994-20.26-45.256-45.254-45.256-17.882.016-34.077 9.446-41.328 25.79-2.655.024-4.192.076-6.35.07-11.158 0-20.204 9.046-20.204 20.204 0 11.158 9.046 20.203 20.203 20.203 2.389-.005 4.354-.332 6.997-.256 7.56 15.59 23.356 24.485 40.682 24.5 24.992 0 45.254-20.264 45.254-45.256z\"\n              />\n              <path\n                  ref={armRef}\n                  fill={enabled ? \"#deddd8\" : background}\n                  stroke={active}\n                  transform={transform}\n                  d=\"M93.782 55.623c-.032-3.809-.19-6.403-.352-7.023h-.002c-.93-3.558-6.621-6.73-14.793-6.73-8.17 0-14.649 3.016-14.795 6.73-.25 6.419-4.049 62.795 13.561 62.806 14.308.008 16.52-39.277 16.38-55.783zm-8.05.08a7.178 7.178 0 010 .012 7.178 7.178 0 01-7.179 7.176 7.178 7.178 0 01-7.177-7.176 7.178 7.178 0 017.177-7.178 7.178 7.178 0 017.178 7.166z\"\n              />\n              <text\n                  ref={textRef}\n                  {...textProps}\n                  x={w / 2}\n                  y={30}\n                  textAnchor=\"middle\"\n                  fontSize=\"1em\"\n                  fontWeight=\"bold\"\n                  lengthAdjust=\"0.3em\"\n                  fill=\"#fff\"\n                  stroke=\"#000\"\n                  strokeWidth=\"0.05em\"\n                  shapeRendering=\"crispEdges\"\n              >\n                  {text}\n              </text>\n              {toggleOff && (\n                  <PowerButton\n                      r={pr}\n                      ri={pri}\n                      cx={w - pr - 4}\n                      cy={pr + 14}\n                      color={color}\n                      strokeWidth={1.8}\n                      off={!enabled}\n                      onClick={toggleOff}\n                  />\n              )}\n            </g>\n        </SvgWidget>\n    )\n}\n","import React, { useState, useEffect, useRef, useCallback } from \"react\"\nimport {\n  RENDER,\n  REPORT_UPDATE,\n  SG90_RESPONSE_SPEED,\n  ServoServer,\n  BaseReg,\n  RelayReg,\n  ServoReg,\n  LedStripVariant,\n  LedReg,\n  bufferEq,\n  JDEventSource,\n} from \"../../../jacdac-ts/src/jacdac\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport useRegister from \"../hooks/useRegister\"\nimport useThrottledValue from \"../hooks/useThrottledValue\"\nimport {useRegisterBoolValue, useRegisterUnpackedValue} from \"../../jacdac/useRegisterValue\"\nimport {FormControlLabel, Grid, Slider, Switch} from \"@mui/material\"\n\nimport FwdLEDWidget from \"../widgets/FwdLEDWidget\"\nimport FwdPumpWidget from \"../widgets/FwdPumpWidget\"\nimport FwdServoWidget from \"../widgets/FwdServoWidget\"\nimport DashboardRegisterValueFallback from \"./DashboardRegisterValueFallback\"\nimport SwitchWithLabel from \"../ui/SwitchWithLabel\"\nimport useChange from \"../../jacdac/useChange\"\nimport ColorButtons from \"../widgets/ColorButtons\"\n\n\nexport function createPumpWidget (props: DashboardServiceProps) {\n    const { service } = props\n    const activeRegister = useRegister(service, RelayReg.Active)\n    const active = useRegisterBoolValue(activeRegister, props)\n\n    const handleClose = (_: unknown, checked: boolean) =>\n        activeRegister?.sendSetBoolAsync(checked, true)\n\n    if (active === undefined)\n        return <DashboardRegisterValueFallback register={activeRegister} />\n\n    return (\n      <>\n        <FwdPumpWidget \n          active={active}\n          size={`clamp(7em, 13vw, 14vh)`}\n        />\n        <SwitchWithLabel\n            label={active ? \"Running\" : \"Stopped\"}\n            checked={active}\n            onChange={handleClose}\n        /> \n      </>\n    )\n}\n\nexport function createServoWidget (props: DashboardServiceProps) {\n    const { service, visible } = props\n\n    const enabledRegister = useRegister(service, ServoReg.Enabled)\n    const enabled = useRegisterBoolValue(enabledRegister, props)\n    const angleRegister = useRegister(service, ServoReg.Angle)\n    const [reportedAngle = 90] = useRegisterUnpackedValue<[number]>(angleRegister, {\n        visible,\n    })\n    // sec/60deg\n    const responseSpeedRegister = useRegister(service, ServoReg.ResponseSpeed)\n    const [responseSpeed = SG90_RESPONSE_SPEED] = useRegisterUnpackedValue<\n        [number]\n    >(responseSpeedRegister, { visible })\n    const rotationalSpeed = 60 / responseSpeed\n    const angle = useThrottledValue(reportedAngle, rotationalSpeed)\n\n    const offsetRegister = useRegister(service, ServoReg.Offset)\n    const [offset] = useRegisterUnpackedValue<[number]>(offsetRegister, props)\n    const clientVariantRegister = useRegister(service, BaseReg.ClientVariant)\n    const [clientVariant] = useRegisterUnpackedValue<[string]>(\n        clientVariantRegister,\n        props\n    )\n    const minAngleRegister = useRegister(service, ServoReg.MinAngle)\n    const [minAngle = 0] = useRegisterUnpackedValue<[number]>(\n        minAngleRegister,\n        props\n    )\n    const maxAngleRegister = useRegister(service, ServoReg.MaxAngle)\n    const [maxAngle = 270] = useRegisterUnpackedValue<[number]>(\n        maxAngleRegister,\n        props\n    )\n\n    const [continuous, setContinuous] = useState( /cont=1/.test(clientVariant) || false )\n    const throttle = ((angle - minAngle) / (maxAngle - minAngle)) * 200 - 100\n\n    const server = useServiceServer<ServoServer>(service)\n    const color = server ? \"secondary\" : \"primary\"\n\n    const toggleOff = () => enabledRegister.sendSetBoolAsync(!enabled, true)\n    const widgetSize = `clamp(7rem, 16vw, 16vh)`\n    const readOnly = false\n\n    const label = continuous ? \"Throttle (%)\" : \"Angle\"\n    const angleFormat = (a: number) => `${Math.round(a)}`\n    const continuousFormat = (throttle: number) => {\n        return Math.round(throttle) + \"%\"\n    }\n    const handleContinuousChange = (\n        ev: unknown,\n        newValue: number | number[]\n    ) => {\n        const newAngle =\n            (0.5 + (newValue as number) / 200) * (maxAngle - minAngle) +\n            minAngle\n        angleRegister.sendSetPackedAsync([newAngle], true)\n    }\n    const handleAngleChange = (ev: unknown, newValue: number | number[]) =>\n        angleRegister.sendSetPackedAsync([newValue as number], true)\n\n    const handleVariantChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const isContinuous = event.target.checked\n        if (clientVariant !== undefined) {\n          clientVariantRegister.sendSetStringAsync(`cont=${isContinuous ? '1' : '0'}`, true)\n        }\n        setContinuous(isContinuous)\n        if (!isContinuous) handleAngleChange(undefined, (maxAngle - minAngle) / 2 + minAngle)\n    }\n\n    return (\n        <Grid container alignContent=\"center\">\n            <Grid item xs={12}>\n                <FormControlLabel\n                  value=\"servo-mode\"\n                  control={<Switch checked={continuous} onChange={handleVariantChange} />}\n                  label={continuous ? \"Continuous\" : \"Positional\"}\n                  labelPlacement=\"end\"\n                />\n                <FwdServoWidget\n                    angle={angle}\n                    offset={offset}\n                    color={color}\n                    enabled={enabled}\n                    toggleOff={toggleOff}\n                    widgetSize={widgetSize}\n                    rotationRate={continuous ? (throttle * rotationalSpeed) / 100 : undefined}\n                    visible={visible}\n                />\n            </Grid>\n            <Grid item xs={12}>\n                {continuous ? (\n                    <Slider\n                        aria-label={label}\n                        color={color}\n                        value={throttle}\n                        valueLabelFormat={continuousFormat}\n                        onChange={readOnly ? undefined : handleContinuousChange}\n                        min={-100}\n                        max={100}\n                        step={10}\n                        valueLabelDisplay=\"auto\"\n                    />\n                ) : (\n                    <Slider\n                        aria-label={label}\n                        color={color}\n                        value={angle}\n                        valueLabelFormat={angleFormat}\n                        onChange={readOnly ? undefined : handleAngleChange}\n                        min={minAngle}\n                        max={maxAngle}\n                        step={5}\n                        valueLabelDisplay=\"auto\"\n                    />\n                )}\n            </Grid>\n        </Grid>\n    )\n}\n\nexport function createLEDWidget (props: DashboardServiceProps) {\n  const { service } = props\n  const pixelsRegister = useRegister(service, LedReg.Pixels)\n  const hasData = useChange(pixelsRegister, _ => !!_?.data)\n  const [penColor, setPenColor] = useState<number>(0x0000ff)\n  const colorsRef = useRef<Uint8Array>(new Uint8Array(0))\n  const clientRef = useRef(new JDEventSource())\n const [ledControls, setLedControls] = useState( false )\n\n  const handleColorChange = (newColor: number) =>\n  setPenColor(current => (newColor === current ? undefined : newColor))\n  const handleLedClick: (index: number) => void = async (index: number) => {\n    const pixels = colorsRef.current\n    if (index >= pixels.length * 3) return\n\n    const newPixels = pixels.slice(0)\n    const k = index * 3\n    let r = (penColor >> 16) & 0xff\n    let g = (penColor >> 8) & 0xff\n    let b = penColor & 0xff\n    if ( newPixels[k] == r && newPixels[k + 1] == g && newPixels[k + 2] == b) {\n      r = 0\n      g = 0\n      b = 0\n    }\n    newPixels[k] = r\n    newPixels[k + 1] = g\n    newPixels[k + 2] = b\n    await pixelsRegister.sendSetPackedAsync([newPixels], true)\n    colorsRef.current = newPixels\n    clientRef.current.emit(RENDER)\n  }\n\n  useEffect(() => {\n    if (!pixelsRegister) return undefined\n    const updatePixels = () => {\n      const [pixels] = pixelsRegister.unpackedValue || []\n      if (pixels && !bufferEq(colorsRef.current, pixels)) {\n        colorsRef.current = pixels.slice(0)\n        clientRef.current.emit(RENDER)\n      }\n    }\n    updatePixels()\n    return pixelsRegister.subscribe(REPORT_UPDATE, updatePixels)\n  }, [pixelsRegister])\n  const colors: () => Uint8Array = useCallback(() => colorsRef.current, [])\n  const numPixelsRegister = useRegister(service, LedReg.NumPixels)\n  const [numPixels] = useRegisterUnpackedValue<[number]>(\n      numPixelsRegister,\n      props\n    )\n\n  const actualBrightnessRegister = useRegister(\n      service,\n      LedReg.ActualBrightness\n    )\n  const [actualBrightness = 0.5] = useRegisterUnpackedValue<[number]>(\n      actualBrightnessRegister,\n      props\n    )\n\n  const subscribeColors = useCallback(\n    handler => clientRef.current.subscribe(RENDER, handler),\n    []\n  )\n\n  const colourPalette = [\n\t\t\t\t\t\t{ name: \"red\", value: 0xff0000 },\n\t\t\t\t\t\t{ name: \"orange\", value: 0xff7f00 },\n\t\t\t\t\t\t{ name: \"yellow\", value: 0xffff00 },\n\t\t\t\t\t\t{ name: \"green\", value: 0x00ff00 },\n\t\t\t\t\t\t{ name: \"blue\", value: 0x0000ff },\n\t\t\t\t\t\t{ name: \"purple\", value: 0xa033e5 },\n\t\t\t\t\t\t{ name: \"pink\", value: 0xff007f },\n\t\t\t\t\t\t{ name: \"white\", value: 0xffffff },\n\t\t\t\t\t\t{ name: \"black\", value: 0x000000 },\n          ]\n\n  const handlePanelToggle = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setLedControls(event.target.checked)\n  }\n\n  const ready = numPixels !== undefined && hasData\n\n  return (\n    <Grid container flexWrap={\"nowrap\"}>\n      <Grid item xs={12}>\n        { ready && <FwdLEDWidget\n          widgetSize={ledControls ? 'clamp(8rem, 12vw, 15vh)' : 'clamp(6rem, 12vw, 15vh)'}\n          colors={colors}\n          subscribeColors={subscribeColors}\n          numPixels={numPixels}\n          lightVariant={LedStripVariant.Ring}\n          actualBrightness={actualBrightness}\n          onLedClick={handleLedClick}\n        /> }\n        <FormControlLabel\n          value=\"led-control\"\n          control={<Switch checked={ledControls} onChange={handlePanelToggle} />}\n          label={\"Palette\"}\n          labelPlacement=\"end\"\n        />\n      </Grid>\n      <Grid item xs={12}>\n        { ledControls && <ColorButtons\n          color={penColor}\n          onColorChange={handleColorChange}\n          colors={colourPalette}\n        /> }\n      </Grid>\n    </Grid>\n  )\n}\n","import React from \"react\"\nimport SvgWidget from \"./SvgWidget\"\nimport useWidgetTheme from \"./useWidgetTheme\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\"\n\nexport default function FwdDialButtonWidget(props: {\n    checked?: boolean\n    label?: string\n    color?: \"primary\" | \"secondary\"\n    size?: string\n    onDown?: () => void\n    onUp?: () => void\n}) {\n    const { checked, label, color, size, onDown, onUp } = props\n    const { background, controlBackground, active } = useWidgetTheme(color)\n\n    const buttonProps = useSvgButtonProps<SVGRectElement>(label, onDown, onUp)\n    const w = 64\n\n    return (\n        <SvgWidget width={w} size={size}>\n            <rect\n                x={w/2 - w*0.06}\n                y={w*0.70}\n                height={w*0.14}\n                width={w*0.12}\n                fill={\"#a2a2a2\"}\n                stroke={\"#5b5b5b\"}\n                strokeWidth={0.5}\n            />\n            <rect\n                x={w/2 - w*0.14}\n                y={w*0.82}\n                height={w*0.08}\n                width={w*0.06}\n                fill={\"#0f5a96\"}\n            />\n            <rect\n                x={w/2 + w*0.08}\n                y={w*0.82}\n                height={w*0.08}\n                width={w*0.06}\n                fill={\"#0f5a96\"}\n            />\n            <rect\n                x={w/2 - w*0.14}\n                y={w*0.79}\n                height={w*0.03}\n                width={w*0.28}\n                fill={\"#1ad672\"}\n            />\n            <rect\n                x={w/2 - w*0.14}\n                y={w*0.77}\n                height={w*0.02}\n                width={w*0.28}\n                fill={\"#a2a2a2\"}\n            />\n            <rect\n                x={w/2 - w*0.08}\n                y={w*0.77}\n                height={w*0.08}\n                width={w*0.16}\n                fill={\"#a2a2a2\"}\n            />\n            <rect\n                x={1}\n                y={w - w/10}\n                rx={1}\n                width={w - 2}\n                height={w/12}\n                fill={\"white\"}\n                stroke={\"black\"}\n                strokeWidth={0.4}\n            />\n            <g  transform={`translate(0 ${checked ? w*0.05 : 0 })`}>\n              <rect\n                  x={w/2 - w*0.15}\n                  y={w*0.25}\n                  height={w*0.45}\n                  width={w*0.3}\n                  fill={\"#deddd8\"}\n                  stroke={\"#5b5b5b\"}\n                  strokeWidth={0.5}\n              />\n              <rect x={w/2 - w*0.108} y={w*0.30} height={w*.28} width={w*0.06} fill={\"#deddd8\"} stroke={\"#5b5b5b\"} strokeWidth={0.5} />\n              <rect x={w/2 + w*0.045} y={w*0.30} height={w*.28} width={w*0.06} fill={\"#deddd8\"} stroke={\"#5b5b5b\"} strokeWidth={0.5} />\n              <rect x={w/2 + w*0.110} y={w*0.30} height={w*.28} width={w*0.05} fill={\"#deddd8\"} stroke={\"#5b5b5b\"} strokeWidth={0.5} />\n              <rect x={w/2 - w*0.160} y={w*0.30} height={w*.28} width={w*0.05} fill={\"#deddd8\"} stroke={\"#5b5b5b\"} strokeWidth={0.5} />\n              <rect x={w/2 - w*0.040} y={w*0.30} height={w*.28}  width={w*0.08} fill={\"#deddd8\"} stroke={\"#5b5b5b\"} strokeWidth={0.5} />\n            </g>\n            <rect x={w*0.15} width={w*0.70} y={0} height={w*0.9} fillOpacity={0} fill={background} {...buttonProps} strokeOpacity={0}/>\n        </SvgWidget>\n    )\n}\n","import React from \"react\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport SvgWidget from \"../widgets/SvgWidget\"\n\nexport default function FwdDialWidget(props: {\n  size: string,\n  color: \"primary\" | \"secondary\",\n  position: number,\n  angle: number\n}) {\n  const { size, color, position, angle } = props\n  const { background, controlBackground, active, textProps } =\n      useWidgetTheme(color)\n  const label = `${position}`\n  const w = 10\n  const r = 0.06\n  const fs = Math.max(0.2, 0.4 - label.length * 0.1)\n\n  return <SvgWidget\n    title={`rotary encoder at position ${position}`}\n    size={size}\n    width={w}\n    height={w}\n    viewBox={\"0 0 1 1\"}\n    >\n    <g transform={ `scale(${1 / ( 1 + 117 + 2*15.5 - 2*9.5 + 2*3.25 + 2*(8-3.25))})` }>\n      <defs>\n        <g id=\"jacdac-connector\" >\n          <path fill=\"#AAA\" d=\"M22.369 14.045H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 12c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.656.173h18.332c.9 0 1.631.712 1.631 1.59v.91c0 .878-.73 1.59-1.631 1.59zM4.124 12c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 12c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077zM4.187 18c0-.404-.167-.791-.464-1.077a1.618 1.618 0 0 0-1.121-.446c-.42 0-.824.16-1.12.446A1.493 1.493 0 0 0 1.016 18c0 .404.167.791.464 1.077.297.285.7.446 1.121.446.42 0 .823-.16 1.12-.446.298-.286.465-.673.465-1.077zm16.157 2.045H4.098a2.692 2.692 0 0 1-2.695.173C.54 19.788 0 18.933 0 18s.54-1.788 1.403-2.218a2.692 2.692 0 0 1 2.695.173h16.246c.915 0 1.656.712 1.656 1.59v.91c0 .878-.741 1.59-1.656 1.59zM24 6.455c0 .878-.73 1.59-1.631 1.59H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 6c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.65.168l.006.005h18.332c.9 0 1.631.712 1.631 1.59ZM4.124 6c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 6c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077z\"/>\n        </g>\n      </defs>\n    <g>\n      <path\n        fill=\"white\"\n        stroke=\"black\"\n        strokeWidth=\"1\"\n        d=\"\n        M 0.5, 0.5\n        m 5.25, 8\n        a 8,8 0 0 1 8,-8\n        h 117\n        a 8,8 0 0 1 8,8\n        v 32\n        a 4.25,4.25 0 0 1 -4.25,4.25\n        h -9.5\n        a 4.25,4.25 0 0 0 -4.25,4.25\n        v 3\n        a 4.25,4.25 0 0 0 4.25,4.25\n        h 15.5\n        a 3.5,3.5 0 0 1 3.5,3.5\n        v 19\n        a 3.5,3.5 0 0 1 -3.5,3.5\n        h -15.5\n        a 4.25,4.25 0 0 0 -4.25,4.25\n        v 3\n        a 4.25,4.25 0 0 0 4.25,4.25\n        h 9.5\n        a 4.25,4.25 0 0 1 4.25,4.25\n        v 32\n        a 8,8 0 0 1 -8,8\n        h -117\n        a 8,8 0 0 1 -8,-8\n        v -32\n        a 4.25,4.25 0 0 1 4.25,-4.25\n        h 9.5\n        a 4.25,4.25 0 0 0 4.25,-4.25\n        v -3\n        a 4.25,4.25 0 0 0 -4.25,-4.25\n        h -15.5\n        a 3.5,3.5 0 0 1 -3.5,-3.5\n        v -19\n        a 3.5,3.5 0 0 1 3.5,-3.5\n        h 15.5\n        a 4.25,4.25 0 0 0 4.25,-4.25\n        v -3\n        a 4.25,4.25 0 0 0 -4.25,-4.25\n        h -9.5\n        a 4.25,4.25 0 0 1 -4.25,-4.25\n        v -16.5\n        a 4.25,4.25 0 0 0 0,-8.5\n        z\n      \" />\n    </g>\n      <g transform=\"translate(125,12)\">\n        <circle fill=\"black\" r=\"1.75\" />\n        <path stroke=\"black\" strokeWidth=\"1.5\" fill=\"none\" d=\"\n          m -2.5 -3\n          a 4 4 0 0 0 0 6\n          M -4 -4.5\n          a 6.25 6.25 0 0 0 0 9\n          M 2.5 -3\n          a 4 4 0 0 1 0 6\n          M 4 -4.5\n          a 6.25 6.25 0 0 1 0 9\n        \" />\n      </g>\n      <use href=\"#jacdac-connector\" transform=\"translate(120 60) scale(0.8)\" />\n      <use href=\"#jacdac-connector\" transform=\"translate(24 60) translate(0 11) rotate(180) scale(0.8) translate(0 -11) \" />\n      <text fontFamily=\"Galano Grotesque Bold\" x={16} y={15} fontSize={10}>Dial</text>\n    </g>\n    <g transform={`translate(0.5 0.5) scale(0.5) rotate(${angle}) translate(-0.5 -0.5)`}>\n      <path\n        fill={background}\n        d=\"M.67.029a.037.037 0 01-.072-.02A.5.5 0 00.538 0a.037.037 0 01-.075 0 .5.5 0 00-.061.008.038.038 0 01-.073.02.5.5 0 00-.056.025.037.037 0 01-.064.04A.5.5 0 00.16.13.037.037 0 01.11.186a.5.5 0 00-.035.05.037.037 0 01-.035.066.5.5 0 00-.02.058.037.037 0 01-.016.074A.5.5 0 000 .495.037.037 0 01.005.57a.5.5 0 00.013.06.038.038 0 01.025.07.5.5 0 00.028.056.037.037 0 01.043.06.5.5 0 00.042.046.037.037 0 01.058.047.5.5 0 00.053.032.037.037 0 01.069.03.5.5 0 00.059.016.037.037 0 01.074.01.5.5 0 00.062 0 .037.037 0 01.074-.01.5.5 0 00.06-.016.037.037 0 01.068-.03.5.5 0 00.053-.032.037.037 0 01.058-.047.5.5 0 00.042-.045.037.037 0 01.043-.061A.5.5 0 00.957.7.037.037 0 01.982.63.5.5 0 00.995.57.037.037 0 011 .495.5.5 0 00.996.434.038.038 0 01.98.36.5.5 0 00.96.302.037.037 0 01.925.236.5.5 0 00.89.186.037.037 0 01.839.13.5.5 0 00.79.092.037.037 0 01.727.053.5.5 0 00.671.03z\"\n      />\n      <path\n        fill={controlBackground}\n        d=\"M.1.499a.4.4 0 10.8 0 .4.4 0 10-.8 0z\"\n      />\n      <circle cx={0.5} cy={0.19} r={r} fill={active} />\n    </g>\n    <text x={0.5} y={0.5} fontFamily=\"Galano Grotesque Bold\" fontSize={fs} {...textProps}>\n      {label}\n    </text>\n  </SvgWidget>\n}\n","import React from \"react\"\nimport SvgWidget from \"./SvgWidget\"\nimport useWidgetTheme from \"./useWidgetTheme\"\n\nexport default function FwdLineWidget(props: {\n  size: string,\n  color: \"primary\" | \"secondary\",\n  value: number,\n  buttonProps: React.SVGProps<SVGRectElement>,\n}) {\n  const {\n    size,\n    color,\n    value,\n    buttonProps\n  } = props\n\n  const { background, controlBackground, active } = useWidgetTheme(color)\n\n  const w = 48\n  const h = 48\n  const m = 4\n  const sw = 20\n  const dx = w >> 1\n  const x = (w - sw - dx) / 2\n  const sh = 32\n  const dark = \"#000\"\n  const bright = active\n\n  const isLit = value > 0.5\n\n  return (\n    <SvgWidget width={w} height={h} size={size}>\n      <g transform={`translate(${x}, ${h - m - sh})`}>\n        <rect\n          x={0}\n          y={5.5*sh/8}\n          width={2*sw}\n          height={sh/5}\n          fill={\"#a4a4a4\"}\n        />\n        <rect\n          x={0}\n          y={sh/8}\n          width={2*sw}\n          height={sh/5}\n          fill={\"#a4a4a4\"}\n        />\n        <rect\n          x={sw/2}\n          y={0}\n          rx={1}\n          width={sw}\n          height={sh}\n          fill={background}\n          {...buttonProps}\n        />\n        <rect\n          x={sw*0.6}\n          y={sh*0.10}\n          height={sh/3}\n          width={sw*0.8}\n          fill={isLit ? bright : dark}\n          stroke={controlBackground}\n          strokeWidth={1}\n          style={{ userSelect: \"none\", pointerEvents: \"none\" }}\n        />\n        <rect\n          x={sw*0.6}\n          y={sh*0.60}\n          height={sh/3}\n          width={sw*0.8}\n          fill={isLit ? bright : dark}\n          stroke={controlBackground}\n          strokeWidth={1}\n          style={{ userSelect: \"none\", pointerEvents: \"none\" }}\n        />\n        </g>\n    </SvgWidget>\n  )\n}\n","import React from \"react\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport { useId } from \"react\"\nimport \"./fwd-edu.css\"\n\nexport default function FwdSoilMoistureWidget(props: {\n    value: number\n    color: \"primary\" | \"secondary\"\n    size?: string\n}) {\n    const { value, color, size } = props\n    const { active, textProps } =\n        useWidgetTheme(color)\n    const clipId = useId()\n\n    const hasValue = !isNaN(value)\n    const tvalue = hasValue ? `${Math.round(value * 100)}%` : `--`\n\n    const w = 3\n    const h = 6\n    const ch = 5.4 * value\n\n    return (\n      <SvgWidget width={w} height={h} size={size}>\n        <g className={\"fwdEduWidget\"}>\n          {hasValue && (\n              <defs>\n              <clipPath id={clipId}>\n              <rect x={0} y={h - ch} width={w} height={ch} />\n              </clipPath>\n              </defs>\n              )}\n          <path\n            fill=\"white\"\n            stroke=\"black\"\n            strokeWidth={0.02}\n            d=\" M 0.05 -.05 v 0.05 a .2 .2 0 00 .1 .2 h .35 v 4.4 l .9 1 l .9 -1 v -4.4 h .35 a .2 -.2 0 00 .1 -.2 v -0.05 Z \"\n          />\n          <path\n            stroke=\"black\"\n            strokeWidth={0.02}\n            fill={active}\n            d=\" M 0.05 -.05 v 0.05 a .2 .2 0 00 .1 .2 h .35 v 4.4 l .9 1 l .9 -1 v -4.4 h .35 a .2 -.2 0 00 .1 -.2 v -0.05 Z \"\n            clipPath={`url(#${clipId})`}\n          />\n          <path\n            stroke=\"#000000\"\n            strokeLinecap=\"butt\"\n            strokeWidth=\".02\"\n            shapeRendering=\"crispEdges\"\n            d=\" M .6 .5 h 1.6\n            \"\n          />\n          <text\n            className=\"galanoAltA\"\n            fill=\"black\"\n            x=\"1.4\"\n            y=\".5\"\n            fontSize=\".25\"\n            letterSpacing=\"-.01em\"\n            textAnchor=\"middle\"\n            dominantBaseline=\"ideographic\"\n            shapeRendering=\"crispEdges\"\n            >\n            max\n          </text>\n          <text\n            x={w / 2}\n            y={h * 0.5}\n            fontSize=\"0.6\"\n            strokeWidth=\".02\"\n            stroke={value > .5 ? \"#000\" : \"#fff\"}\n            {...textProps}\n            fill={value > .5? \"#fff\" : \"#000\"}\n          >\n            {tvalue}\n          </text>\n        </g>\n      </SvgWidget>\n    )\n}\n","import React from \"react\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport { useId } from \"react\"\nimport \"./fwd-edu.css\"\n\nexport default function FwdSolarWidget(props: {\n    value: number\n    color: \"primary\" | \"secondary\"\n    size?: string\n}) {\n    const { value, color, size } = props\n    const { active, textProps } =\n        useWidgetTheme(color)\n    const clipId = useId()\n\n    const hasValue = !isNaN(value)\n    const tvalue = hasValue ? `${Math.round(value * 100)}%` : `--`\n\n    const w = 64\n    const widgetScale = 0.45\n\n    return (\n      <SvgWidget width={w} height={w} size={size}>\n        <g className={\"fwdEduWidget\"}>\n          <g transform={ `scale(${w / ( 1 + 117 + 2*15.5 - 2*9.5 + 2*3.25 + 2*(8-3.25))})` }>\n            <defs>\n              <g id=\"jacdac-connector\" >\n                <path fill=\"#AAA\" d=\"M22.369 14.045H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 12c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.656.173h18.332c.9 0 1.631.712 1.631 1.59v.91c0 .878-.73 1.59-1.631 1.59zM4.124 12c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 12c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077zM4.187 18c0-.404-.167-.791-.464-1.077a1.618 1.618 0 0 0-1.121-.446c-.42 0-.824.16-1.12.446A1.493 1.493 0 0 0 1.016 18c0 .404.167.791.464 1.077.297.285.7.446 1.121.446.42 0 .823-.16 1.12-.446.298-.286.465-.673.465-1.077zm16.157 2.045H4.098a2.692 2.692 0 0 1-2.695.173C.54 19.788 0 18.933 0 18s.54-1.788 1.403-2.218a2.692 2.692 0 0 1 2.695.173h16.246c.915 0 1.656.712 1.656 1.59v.91c0 .878-.741 1.59-1.656 1.59zM24 6.455c0 .878-.73 1.59-1.631 1.59H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 6c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.65.168l.006.005h18.332c.9 0 1.631.712 1.631 1.59ZM4.124 6c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 6c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077z\"/>\n              </g>\n            </defs>\n            <g>\n              <path\n                id=\"outline\"\n                fill=\"white\"\n                stroke=\"black\"\n                strokeWidth=\"1\"\n                d=\"\n                  M 0.5, 0.5\n                  m 5.25, 8\n                  a 8,8 0 0 1 8,-8\n                  h 117\n                  a 8,8 0 0 1 8,8\n                  v 32\n                  a 4.25,4.25 0 0 1 -4.25,4.25\n                  h -9.5\n                  a 4.25,4.25 0 0 0 -4.25,4.25\n                  v 3\n                  a 4.25,4.25 0 0 0 4.25,4.25\n                  h 15.5\n                  a 3.5,3.5 0 0 1 3.5,3.5\n                  v 19\n                  a 3.5,3.5 0 0 1 -3.5,3.5\n                  h -15.5\n                  a 4.25,4.25 0 0 0 -4.25,4.25\n                  v 3\n                  a 4.25,4.25 0 0 0 4.25,4.25\n                  h 9.5\n                  a 4.25,4.25 0 0 1 4.25,4.25\n                  v 32\n                  a 8,8 0 0 1 -8,8\n                  h -117\n                  a 8,8 0 0 1 -8,-8\n                  v -32\n                  a 4.25,4.25 0 0 1 4.25,-4.25\n                  h 9.5\n                  a 4.25,4.25 0 0 0 4.25,-4.25\n                  v -3\n                  a 4.25,4.25 0 0 0 -4.25,-4.25\n                  h -15.5\n                  a 3.5,3.5 0 0 1 -3.5,-3.5\n                  v -19\n                  a 3.5,3.5 0 0 1 3.5,-3.5\n                  h 15.5\n                  a 4.25,4.25 0 0 0 4.25,-4.25\n                  v -3\n                  a 4.25,4.25 0 0 0 -4.25,-4.25\n                  h -9.5\n                  a 4.25,4.25 0 0 1 -4.25,-4.25\n                  v -16.5\n                  a 4.25,4.25 0 0 0 0,-8.5\n                  z\n                \"\n              >\n              </path>\n            </g>\n            <g transform=\"translate(125,12)\">\n              <circle fill=\"black\" r=\"1.75\" />\n              <path stroke=\"black\" strokeWidth=\"1.5\" fill=\"none\" d=\"\n                m -2.5 -3\n                a 4 4 0 0 0 0 6\n                M -4 -4.5\n                a 6.25 6.25 0 0 0 0 9\n                M 2.5 -3\n                a 4 4 0 0 1 0 6\n                M 4 -4.5\n                a 6.25 6.25 0 0 1 0 9\n              \" />\n            </g>\n            <use href=\"#jacdac-connector\" transform=\"translate(120 60) scale(0.8)\" />\n            <use href=\"#jacdac-connector\" transform=\"translate(24 60) translate(0 11) rotate(180) scale(0.8) translate(0 -11) \" />\n            <text fontFamily=\"Galano Grotesque Bold\" x={16} y={15} fontSize={10}>Solar</text>\n          </g>\n          <g transform={ `scale(${widgetScale}) translate(${w/(2*widgetScale)} ${w/(2*widgetScale)})` } x={w/(2*widgetScale)} y={w/(2*widgetScale)}>\n            <path stroke=\"black\" fill={active} fillOpacity={value} strokeWidth={1} x={0} y={0}\n             d={`\n              m -9.25 -11.5\n              h 18.5\n              a 15 15 0 0 1 0 20\n              h -18.5\n              a 15 15 0 0 1 0 -20\n              z\n              `}\n             />\n            <path stroke=\"black\" strokeWidth={0.5} fill=\"none\" x={0} y={0}\n             d={`\n              m -11.5 -9\n              h 15\n              a 1.25 1.25 0 0 1 0 2.5\n              h -7.5\n              a 1.25 1.25 0 0 0 0 2.5\n              h 7.5\n              a 1.25 1.25 0 0 1 0 2.5\n              h -7.5\n              a 1.25 1.25 0 0 0 0 2.5\n              h 7.5\n              a 1.25 1.25 0 0 1 0 2.5\n              h -7.5\n              a 1.25 1.25 0 0 0 0 2.5\n              h 15\n              `}\n             />\n          </g>\n          <text\n            className=\"galanoAltA\"\n            x={w / 2}\n            y={w * 0.7}\n            fontSize=\"8\"\n            lengthAdjust=\".5em\"\n            {...textProps}\n            fill={\"#000\"}\n          >\n            {tvalue}\n          </text>\n        </g>\n      </SvgWidget>\n    )\n}\n","import React from \"react\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport { useId } from \"react\"\nimport \"./fwd-edu.css\"\n\nexport default function FwdSonarWidget(props: {\n    value: number\n    color: \"primary\" | \"secondary\"\n    min?: number\n    max?: number\n    size?: string\n}) {\n    const { value, color, size } = props\n    const { active, textProps } =\n        useWidgetTheme(color)\n    const clipId = useId()\n\n    const hasValue = !isNaN(value)\n    const tvalue = hasValue ? `${(value / 100).toFixed(2)} m` : `--`\n\n    const w = 60\n\n    return (\n      <SvgWidget width={w} height={w*1.2} size={size}>\n        <g className=\"fwdEduWidget\">\n          <g transform={ `scale(${w / ( 1 + 141 + 2*15.5 - 2*9.5 + 2*3.25 + 2*(8-3.25))})` }>\n            <defs>\n              <g id=\"jacdac-connector\" >\n                <path fill=\"#AAA\" d=\"M22.369 14.045H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 12c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.656.173h18.332c.9 0 1.631.712 1.631 1.59v.91c0 .878-.73 1.59-1.631 1.59zM4.124 12c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 12c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077zM4.187 18c0-.404-.167-.791-.464-1.077a1.618 1.618 0 0 0-1.121-.446c-.42 0-.824.16-1.12.446A1.493 1.493 0 0 0 1.016 18c0 .404.167.791.464 1.077.297.285.7.446 1.121.446.42 0 .823-.16 1.12-.446.298-.286.465-.673.465-1.077zm16.157 2.045H4.098a2.692 2.692 0 0 1-2.695.173C.54 19.788 0 18.933 0 18s.54-1.788 1.403-2.218a2.692 2.692 0 0 1 2.695.173h16.246c.915 0 1.656.712 1.656 1.59v.91c0 .878-.741 1.59-1.656 1.59zM24 6.455c0 .878-.73 1.59-1.631 1.59H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 6c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.65.168l.006.005h18.332c.9 0 1.631.712 1.631 1.59ZM4.124 6c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 6c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077z\"/>\n              </g>\n            </defs>\n            <g>\n              <path\n                fill=\"white\"\n                stroke=\"black\"\n                strokeWidth=\"1\"\n                transform=\"rotate(180 72.5 69.5) translate(-12 -60)\"\n                d=\"\n                  M 0.5, 0.5\n                  m 5.25, 8\n                  a 8,8 0 0 1 8,-8\n                  h 117\n                  a 8,8 0 0 1 8,8\n                  v 32\n                  a 4.25,4.25 0 0 1 -4.25,4.25\n                  h -9.5\n                  a 4.25,4.25 0 0 0 -4.25,4.25\n                  v 3\n                  a 4.25,4.25 0 0 0 4.25,4.25\n                  h 15.5\n                  a 3.5,3.5 0 0 1 3.5,3.5\n                  v 19\n                  a 3.5,3.5 0 0 1 -3.5,3.5\n                  h -15.5\n                  a 4.25,4.25 0 0 0 -4.25,4.25\n                  v 3\n                  a 4.25,4.25 0 0 0 4.25,4.25\n  \n                  h 21.5\n                  a 4.25,4.25 0 0 1 4.25,4.25\n                  v 66.75\n                  a 8,8 0 0 1 -8,8\n                  h -141\n                  a 8,8 0 0 1 -8,-8\n                  v -66.75\n                  a 4.25,4.25 0 0 1 4.25,-4.25\n                  h 21.5\n  \n                  a 4.25,4.25 0 0 0 4.25,-4.25\n                  v -3\n                  a 4.25,4.25 0 0 0 -4.25,-4.25\n                  h -15.5\n                  a 3.5,3.5 0 0 1 -3.5,-3.5\n                  v -19\n                  a 3.5,3.5 0 0 1 3.5,-3.5\n                  h 15.5\n                  a 4.25,4.25 0 0 0 4.25,-4.25\n                  v -3\n                  a 4.25,4.25 0 0 0 -4.25,-4.25\n                  h -9.5\n                  a 4.25,4.25 0 0 1 -4.25,-4.25\n                  v -16.5\n                  a 4.25,4.25 0 0 0 0,-8.5\n                  z\n                \"\n              >\n              </path>\n            </g>\n            <g>\n              <circle fill=\"#deddd8\" r=\"28\" stroke=\"black\" strokeWidth=\"1\" transform=\"translate(33 38)\" />\n              <circle fill=\"white\" r=\"22\" stroke=\"black\" strokeWidth=\"1\" transform=\"translate(33 38)\" />\n            </g>\n            <g>\n              <circle fill=\"#deddd8\" r=\"28\" stroke=\"black\" strokeWidth=\"1\" transform=\"translate(137 38)\" />\n              <circle fill=\"white\" r=\"22\" stroke=\"black\" strokeWidth=\"1\" transform=\"translate(137 38)\" />\n            </g>\n            <g transform=\"translate(132,185)\">\n              <circle fill=\"black\" r=\"1.75\" transform=\"scale(1.2)\"/>\n              <path stroke=\"black\" strokeWidth=\"1.5\" fill=\"none\" transform=\"scale(1.2)\" d=\"\n                m -2.5 -3\n                a 4 4 0 0 0 0 6\n                M -4 -4.5\n                a 6.25 6.25 0 0 0 0 9\n                M 2.5 -3\n                a 4 4 0 0 1 0 6\n                M 4 -4.5\n                a 6.25 6.25 0 0 1 0 9\n              \" />\n            </g>\n            <use href=\"#jacdac-connector\" transform=\"translate(132 120) scale(0.8)\" />\n            <use href=\"#jacdac-connector\" transform=\"translate(38 120) translate(0 11) rotate(180) scale(0.8) translate(0 -11) \" />\n            <text className={\"galanoAltA\"} x={26} y={190} fontSize={11}>Sonar</text>\n          </g>\n          <text\n            x={w / 2}\n            y={w / 2}\n            fontSize=\"8\"\n            {...textProps}\n            fill={\"#000\"}\n          >\n            {tvalue}\n          </text>\n        </g>\n      </SvgWidget>\n    )\n}\n","import React from \"react\"\nimport SvgWidget from \"./SvgWidget\"\nimport useWidgetTheme from \"./useWidgetTheme\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\"\nimport {act} from \"@react-three/fiber\"\n\nexport default function FwdTouchWidget(props: {\n    checked?: boolean\n    label?: string\n    color?: \"primary\" | \"secondary\"\n    size?: string\n    onDown?: () => void\n    onUp?: () => void\n}) {\n    const { checked, label, color, size, onDown, onUp } = props\n    const { background, controlBackground, active } = useWidgetTheme(color)\n\n    const buttonProps = useSvgButtonProps<SVGCircleElement>(label, onDown, onUp)\n    const w = 90\n    const mo = checked ? 3 : 5\n    const r = w / 2\n    const cx = r\n    const cy = r\n    const ri = r - mo\n    const rn = 8\n    return (\n      <SvgWidget width={w} height={w} size={size}>\n        <g className=\"fwdEduWidget\">\n          <g transform={ `scale(${w / ( 1 + 117 + 2*15.5 - 2*9.5 + 2*3.25 + 2*(8-3.25))})` }>\n            <defs>\n              <g id=\"jacdac-connector\" >\n                <path fill=\"#AAA\" d=\"M22.369 14.045H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 12c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.656.173h18.332c.9 0 1.631.712 1.631 1.59v.91c0 .878-.73 1.59-1.631 1.59zM4.124 12c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 12c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077zM4.187 18c0-.404-.167-.791-.464-1.077a1.618 1.618 0 0 0-1.121-.446c-.42 0-.824.16-1.12.446A1.493 1.493 0 0 0 1.016 18c0 .404.167.791.464 1.077.297.285.7.446 1.121.446.42 0 .823-.16 1.12-.446.298-.286.465-.673.465-1.077zm16.157 2.045H4.098a2.692 2.692 0 0 1-2.695.173C.54 19.788 0 18.933 0 18s.54-1.788 1.403-2.218a2.692 2.692 0 0 1 2.695.173h16.246c.915 0 1.656.712 1.656 1.59v.91c0 .878-.741 1.59-1.656 1.59zM24 6.455c0 .878-.73 1.59-1.631 1.59H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 6c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.65.168l.006.005h18.332c.9 0 1.631.712 1.631 1.59ZM4.124 6c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 6c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077z\"/>\n              </g>\n            </defs>\n            <g>\n              <path\n                id=\"outline\"\n                fill=\"white\"\n                stroke=\"black\"\n                strokeWidth=\"1\"\n                d=\"\n                  M 0.5, 0.5\n                  m 5.25, 8\n                  a 8,8 0 0 1 8,-8\n                  h 117\n                  a 8,8 0 0 1 8,8\n                  v 32\n                  a 4.25,4.25 0 0 1 -4.25,4.25\n                  h -9.5\n                  a 4.25,4.25 0 0 0 -4.25,4.25\n                  v 3\n                  a 4.25,4.25 0 0 0 4.25,4.25\n                  h 15.5\n                  a 3.5,3.5 0 0 1 3.5,3.5\n                  v 19\n                  a 3.5,3.5 0 0 1 -3.5,3.5\n                  h -15.5\n                  a 4.25,4.25 0 0 0 -4.25,4.25\n                  v 3\n                  a 4.25,4.25 0 0 0 4.25,4.25\n                  h 9.5\n                  a 4.25,4.25 0 0 1 4.25,4.25\n                  v 32\n                  a 8,8 0 0 1 -8,8\n                  h -117\n                  a 8,8 0 0 1 -8,-8\n                  v -32\n                  a 4.25,4.25 0 0 1 4.25,-4.25\n                  h 9.5\n                  a 4.25,4.25 0 0 0 4.25,-4.25\n                  v -3\n                  a 4.25,4.25 0 0 0 -4.25,-4.25\n                  h -15.5\n                  a 3.5,3.5 0 0 1 -3.5,-3.5\n                  v -19\n                  a 3.5,3.5 0 0 1 3.5,-3.5\n                  h 15.5\n                  a 4.25,4.25 0 0 0 4.25,-4.25\n                  v -3\n                  a 4.25,4.25 0 0 0 -4.25,-4.25\n                  h -9.5\n                  a 4.25,4.25 0 0 1 -4.25,-4.25\n                  v -16.5\n                  a 4.25,4.25 0 0 0 0,-8.5\n                  z\n                \"\n              >\n              </path>\n            </g>\n            <g transform=\"translate(125,12)\">\n              <circle fill=\"black\" r=\"1.75\" />\n              <path stroke=\"black\" strokeWidth=\"1.5\" fill=\"none\" d=\"\n                m -2.5 -3\n                a 4 4 0 0 0 0 6\n                M -4 -4.5\n                a 6.25 6.25 0 0 0 0 9\n                M 2.5 -3\n                a 4 4 0 0 1 0 6\n                M 4 -4.5\n                a 6.25 6.25 0 0 1 0 9\n              \" />\n            </g>\n            <use href=\"#jacdac-connector\" transform=\"translate(120 60) scale(0.8)\" />\n            <use href=\"#jacdac-connector\" transform=\"translate(24 60) translate(0 11) rotate(180) scale(0.8) translate(0 -11) \" />\n            <text x={16} y={15} fontSize={10}>Touch</text>\n          </g>\n          <g transform={ `translate(${w/2} ${w/2 + w*0.125}) scale(0.45)` } {...buttonProps}>\n            <rect x={-w/2} y={-2*w/3} rx=\"10\" width={w} height={4*w/3} fill=\"white\" fillOpacity=\"0\" stroke=\"#CCC\" strokeWidth=\"1.2\"/>\n            <circle x=\"0\" y=\"0\" r={3*w/8} fill={checked ? active : \"white\"}stroke=\"black\" strokeWidth=\"2\" />\n            <circle x=\"0\" y=\"0\" r={2*w/8} fill=\"none\" stroke=\"black\" strokeWidth=\"2\" />\n            <circle x=\"0\" y=\"0\" r={w/8} fill=\"none\" stroke=\"black\" strokeWidth=\"2\" />\n          </g>\n        </g>\n      </SvgWidget>\n    )\n}\n","import React, { createElement, useState, useEffect } from \"react\"\nimport useDeviceProductIdentifier from \"../../jacdac/useDeviceProductIdentifier\"\nimport useDeviceSpecifications from \"../devices/useDeviceSpecifications\"\nimport {\n  JDDevice,\n  JDService,\n  SRV_DISTANCE,\n  SRV_LIGHT_LEVEL,\n  SRV_SOIL_MOISTURE,\n  SRV_BUTTON,\n  SRV_ROTARY_ENCODER,\n  SRV_RELAY,\n  SRV_REFLECTED_LIGHT,\n  SRV_SERVO,\n  SRV_LED,\n  EVENT,\n  ButtonEvent,\n  ButtonServer,\n  ReflectedLightServer,\n  JDRegister,\n  RotaryEncoderReg,\n} from \"../../../jacdac-ts/src/jacdac\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport DashboardServiceDefaultWidget from \"./DashboardServiceDefaultWidget\"\nimport useRegister from \"../hooks/useRegister\"\nimport { useRegisterUnpackedValue } from \"../../jacdac/useRegisterValue\"\nimport Suspense from \"../ui/Suspense\"\nimport { CircularProgress } from \"@mui/material\"\n\nimport { createLEDWidget, createPumpWidget, createServoWidget } from \"./DashboardFwdUniqueComponents\"\nimport FwdDialButtonWidget from \"../widgets/FwdDialButtonWidget\"\nimport FwdDialWidget from \"../widgets/FwdDialWidget\"\nimport FwdLineWidget from \"../widgets/FwdLineWidget\"\nimport FwdSoilMoistureWidget from \"../widgets/FwdSoilMoistureWidget\"\nimport FwdSolarWidget from \"../widgets/FwdSolarWidget\"\nimport FwdSonarWidget from \"../widgets/FwdSonarWidget\"\nimport FwdTouchWidget from \"../widgets/FwdTouchWidget\"\nimport useEvent from \"../hooks/useEvent\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\"\n\n\nexport function isFwdEdu (device: JDDevice): boolean {\n  const FwdEduDevices = useDeviceSpecifications()\n      .filter( device => device?.productIdentifiers && device.company.match(/(fwd|forward) ?edu(cation)?/i) )\n      .flatMap( device => device.productIdentifiers )\n  const deviceId = useDeviceProductIdentifier(device)\n  return FwdEduDevices.includes( deviceId )\n}\n\nfunction isRotaryVariant (service: JDService): boolean {\n  return service.serviceIndex > 1 && service.device.serviceClassAt(service.serviceIndex - 1) == SRV_ROTARY_ENCODER\n}\n\nfunction buttonWidgetProps (service: JDService, server?: ButtonServer) {\n  const [pressed, setPressed] = useState<boolean>(false)\n  const downEvent = useEvent(service, ButtonEvent.Down)\n  const upEvent = useEvent(service, ButtonEvent.Up)\n  useEffect(\n      () => downEvent.subscribe(EVENT, () => setPressed(true)),\n      [downEvent]\n  )\n  useEffect(\n      () => upEvent.subscribe(EVENT, () => setPressed(false)),\n      [upEvent]\n  )\n\n  return {\n    onDown: () => server?.down(),\n    onUp: () => server?.up(),\n    checked: pressed,\n    label: `button ${pressed ? `down` : `up`}`\n  }\n}\n\nfunction lineWidgetProps (value: number, register: JDRegister, server: ReflectedLightServer) {\n const handleDown = () => {\n    server.reading.setValues([value > 0 ? 0 : 1.0])\n    register.refresh()\n  }\n  return {\n    buttonProps: useSvgButtonProps(\"line detector\", server && handleDown)\n  }\n}\n\nfunction dialWidgetProps (value: number, service: JDService) {\n  const clicksPerTurnRegister = useRegister(service, RotaryEncoderReg.ClicksPerTurn)\n  const [clicksPerTurn = 20] = useRegisterUnpackedValue<[number]>(clicksPerTurnRegister)\n\n  return {\n    position: value,\n    angle: (value / clicksPerTurn) * 360\n  }\n}\n\nexport function lazifyWidget (widget, widgetProps) {\n  return (\n    <Suspense\n      fallback={\n        <CircularProgress\n          aria-label={`loading...`}\n          color={widgetProps.color}\n          disableShrink={true}\n          variant={\"indeterminate\"}\n          size={\"1rem\"}\n        />\n      }\n    >\n      {createElement(widget, widgetProps)}\n    </Suspense>\n  )\n}\n\nexport function FwdEduSubstituteWidget (dashboardProps: DashboardServiceProps) {\n  const { service } = dashboardProps\n  switch (service.serviceClass) {\n    case SRV_RELAY : return createPumpWidget( dashboardProps );\n    case SRV_SERVO : return createServoWidget( dashboardProps );\n    case SRV_LED   : return createLEDWidget( dashboardProps );\n    default: break;\n  }\n\n  const server = useServiceServer(service)\n  const color = server ? \"secondary\" : \"primary\" as \"primary\" | \"secondary\"\n  const size = 'clamp(6rem, 12vw, 14vh)'\n\n  // semi-generics\n  const registerNumber = service.readingRegister.specification.identifier || 257\n  const valueReg = useRegister(service, registerNumber)\n  const [value] = useRegisterUnpackedValue<[number]>(valueReg, dashboardProps)\n  const widgetProps = { color: color, size: size, value: value }\n\n  switch (service.serviceClass) {\n    case SRV_DISTANCE:\n      return lazifyWidget(FwdSonarWidget, {color: widgetProps.color, value: widgetProps.value*100, size: 'clamp(6rem, 15vw, 20vh'})\n    case SRV_LIGHT_LEVEL:\n      return lazifyWidget(FwdSolarWidget, widgetProps)\n    case SRV_SOIL_MOISTURE:\n      return lazifyWidget(FwdSoilMoistureWidget, {...widgetProps, size: 'clamp(14rem, 12vw, 16vh)'} )\n    case SRV_BUTTON:\n      return lazifyWidget(isRotaryVariant(service) ? FwdDialButtonWidget : FwdTouchWidget,\n        { ...widgetProps, ...buttonWidgetProps(service, server as ButtonServer) }\n      )\n    case SRV_REFLECTED_LIGHT:\n      return lazifyWidget(FwdLineWidget,\n        { ...widgetProps, size: 'clamp(4rem, 8vw, 12vh)', ...lineWidgetProps(value, valueReg, server as ReflectedLightServer) }\n      )\n    case SRV_ROTARY_ENCODER:\n      return lazifyWidget(FwdDialWidget, {...widgetProps, ...dialWidgetProps(value, service)})\n    // case SRV_RELAY:\n    // case SRV_SERVO:\n    // case SRV_LED:\n    default:\n      return DashboardServiceDefaultWidget(dashboardProps)\n  }\n}\n","import React, { useEffect, useMemo, useState } from \"react\"\nimport {\n    ButtonEvent,\n    ButtonReg,\n    EVENT,\n    SystemReg,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport { ButtonServer } from \"../../../jacdac-ts/src/servers/buttonserver\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport ButtonWidget from \"../widgets/ButtonWidget\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport {\n    useRegisterBoolValue,\n    useRegisterUnpackedValue,\n} from \"../../jacdac/useRegisterValue\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport { describeArc } from \"../widgets/svgutils\"\nimport useAnimationFrame from \"../hooks/useAnimationFrame\"\nimport useRegister from \"../hooks/useRegister\"\nimport useEvent from \"../hooks/useEvent\"\nimport { roundWithPrecision } from \"../../../jacdac-ts/src/jdom/utils\"\nimport OptionalTooltip from \"../widgets/OptionalTooltip\"\n\nexport default function DashboardButton(props: DashboardServiceProps) {\n    const { service } = props\n    const [pressed, setPressed] = useState<boolean>(false)\n    const analogRegister = useRegister(service, ButtonReg.Analog)\n    const analog = useRegisterBoolValue(analogRegister)\n    // don't track reading, use events only\n    const downEvent = useEvent(service, ButtonEvent.Down)\n    const upEvent = useEvent(service, ButtonEvent.Up)\n    useEffect(\n        () => downEvent.subscribe(EVENT, () => setPressed(true)),\n        [downEvent]\n    )\n    useEffect(\n        () => upEvent.subscribe(EVENT, () => setPressed(false)),\n        [upEvent]\n    )\n\n    if (!analog) return <BinaryButton {...props} pressed={pressed} />\n    else return <AnalogButton {...props} pressed={pressed} />\n}\n\nfunction BinaryButton(props: { pressed: boolean } & DashboardServiceProps) {\n    const { service, pressed } = props\n\n    const server = useServiceServer<ButtonServer>(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const label = `button ${pressed ? `down` : `up`}`\n    const handleDown = () => server?.down()\n    const handleUp = () => server?.up()\n    const widgetSize = `clamp(3rem, 10vw, 10vh)`\n\n    return (\n        <OptionalTooltip\n            title={!server ? \"Use the physical button!\" : undefined}\n        >\n            <ButtonWidget\n                checked={!!pressed}\n                color={color}\n                onDown={server ? handleDown : undefined}\n                onUp={server ? handleUp : undefined}\n                label={label}\n                size={widgetSize}\n            />\n        </OptionalTooltip>\n    )\n}\n\nconst ACTIVE_SPEED = 0.05\nconst INACTIVE_SPEED = 0.1\nconst LABEL_PRECISION = 2\n\nfunction AnalogButton(props: { pressed: boolean } & DashboardServiceProps) {\n    const { service, pressed, visible } = props\n    const { mixins } = service\n    const pressureRegister = useRegister(service, ButtonReg.Pressure)\n    const [pressure] = useRegisterUnpackedValue<[number]>(pressureRegister, {\n        visible,\n    })\n    // find threshold if any\n    const thresholdRegister = useMemo(\n        () =>\n            mixins\n                .find(cfg => !!cfg.register(SystemReg.ActiveThreshold))\n                ?.register(SystemReg.ActiveThreshold),\n        [service]\n    )\n    const [threshold] = useRegisterUnpackedValue(thresholdRegister, { visible })\n\n    const widgetSize = `clamp(3rem, 10vw, 10vh)`\n    const server = useServiceServer<ButtonServer>(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const label = `button pressure ${roundWithPrecision(\n        pressure,\n        LABEL_PRECISION\n    )}`\n    const { background, controlBackground, active } = useWidgetTheme(color)\n    const [down, setDown] = useState(false)\n    const handleDown = () => {\n        setDown(true)\n    }\n    const handleUp = () => {\n        setDown(false)\n    }\n    const buttonProps = useSvgButtonProps<SVGCircleElement>(\n        label,\n        server && handleDown,\n        server && handleUp\n    )\n\n    useAnimationFrame(() => {\n        if (!server) return false\n        const [p] = server.reading.values()\n        let keepAnimating = true\n        if (down) {\n            if (p > 1 - ACTIVE_SPEED) {\n                server.reading.setValues([1])\n                keepAnimating = false\n            } else server.reading.setValues([p + ACTIVE_SPEED])\n        } else {\n            if (p < INACTIVE_SPEED) {\n                server.reading.setValues([0])\n                keepAnimating = false\n            } else server.reading.setValues([p - INACTIVE_SPEED])\n        }\n        server.reading.sendGetAsync() // refresh ui\n        return keepAnimating\n    }, [down])\n\n    const w = 64\n    const mo = pressed ? 3 : 5\n    const r = w / 2\n    const cx = r\n    const cy = r\n    const rp = r - mo\n    const ri = rp - mo\n    const ps = mo\n\n    const range = 360\n\n    /*\n        {buttonVariant === AnalogButtonVariant.Capacitive && <path transform={`translate(20,20)`} aria-hidden={true}\n            pointerEvents=\"none\"\n            style={{ userSelect: \"none\" }}\n            fill={background}\n            d=\"M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z\"></path>}\n            */\n\n    return (\n        <SvgWidget width={w} size={widgetSize}>\n            <rect\n                x={0}\n                y={0}\n                rx={2}\n                ry={2}\n                width={w}\n                height={w}\n                fill={background}\n            />\n            {pressure && (\n                <path\n                    d={describeArc(cx, cy, rp, 0, pressure * range)}\n                    stroke={active}\n                    strokeLinecap={\"round\"}\n                    strokeWidth={ps}\n                />\n            )}\n            {threshold !== undefined && (\n                <circle\n                    cx={cx}\n                    cy={mo}\n                    r={mo / 3}\n                    aria-label={`active threshold ${roundWithPrecision(\n                        threshold,\n                        LABEL_PRECISION\n                    )}`}\n                    fill={controlBackground}\n                    transform={`rotate(${range * threshold}, ${cx}, ${cy})`}\n                />\n            )}\n            <circle\n                cx={cx}\n                cy={cy}\n                r={ri}\n                fill={pressed ? active : controlBackground}\n                {...buttonProps}\n            />\n        </SvgWidget>\n    )\n}\n","import React from \"react\"\nimport { RotaryEncoderReg } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport { useRegisterUnpackedValue } from \"../../jacdac/useRegisterValue\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport { RotaryEncoderServer } from \"../../../jacdac-ts/src/servers/rotaryencoderserver\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport { Grid, Slider } from \"@mui/material\"\nimport useThrottledValue from \"../hooks/useThrottledValue\"\nimport useRegister from \"../hooks/useRegister\"\n\nexport default function DashboardRotaryEncoder(props: DashboardServiceProps) {\n    const { service } = props\n    const positionRegister = useRegister(service, RotaryEncoderReg.Position)\n    const [position = 0] = useRegisterUnpackedValue<[number]>(\n        positionRegister,\n        props\n    )\n    const clicksPerTurnRegister = useRegister(\n        service,\n        RotaryEncoderReg.ClicksPerTurn\n    )\n    const [clicksPerTurn = 12] = useRegisterUnpackedValue<[number]>(\n        clicksPerTurnRegister,\n        props\n    )\n    const server = useServiceServer<RotaryEncoderServer>(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const { background, controlBackground, active, textProps } =\n        useWidgetTheme(color)\n    const label = \"\" + position\n    const widgetSize = `clamp(6rem, 15vw, 15vh)`\n\n    const w = 37.794\n    const r = 0.06\n    const fs = Math.max(0.2, 0.5 - label.length * 0.1)\n\n    const handleChange = async (ev: unknown, newValue: number | number[]) => {\n        server?.reading.setValues([newValue as number])\n        positionRegister.refresh()\n        clicksPerTurnRegister.refresh()\n    }\n\n    const throttled = useThrottledValue(position, clicksPerTurn, 1.5)\n    const angle = (throttled / clicksPerTurn) * 360\n\n    const range = Math.abs(Math.round(position / clicksPerTurn))\n    const min = (-range - 1) * clicksPerTurn\n    const max = (range + 1) * clicksPerTurn\n    const marks = [{ value: 0 }]\n\n    return (\n        <Grid container direction=\"column\">\n            <Grid item>\n                <SvgWidget\n                    title={`rotary encoder at position ${position}`}\n                    size={widgetSize}\n                    width={w}\n                    height={w}\n                    viewBox={\"0 0 1 1\"}\n                >\n                    <g transform={`rotate(${angle}, 0.5, 0.5)`}>\n                        <path\n                            fill={background}\n                            d=\"M.67.029a.037.037 0 01-.072-.02A.5.5 0 00.538 0a.037.037 0 01-.075 0 .5.5 0 00-.061.008.038.038 0 01-.073.02.5.5 0 00-.056.025.037.037 0 01-.064.04A.5.5 0 00.16.13.037.037 0 01.11.186a.5.5 0 00-.035.05.037.037 0 01-.035.066.5.5 0 00-.02.058.037.037 0 01-.016.074A.5.5 0 000 .495.037.037 0 01.005.57a.5.5 0 00.013.06.038.038 0 01.025.07.5.5 0 00.028.056.037.037 0 01.043.06.5.5 0 00.042.046.037.037 0 01.058.047.5.5 0 00.053.032.037.037 0 01.069.03.5.5 0 00.059.016.037.037 0 01.074.01.5.5 0 00.062 0 .037.037 0 01.074-.01.5.5 0 00.06-.016.037.037 0 01.068-.03.5.5 0 00.053-.032.037.037 0 01.058-.047.5.5 0 00.042-.045.037.037 0 01.043-.061A.5.5 0 00.957.7.037.037 0 01.982.63.5.5 0 00.995.57.037.037 0 011 .495.5.5 0 00.996.434.038.038 0 01.98.36.5.5 0 00.96.302.037.037 0 01.925.236.5.5 0 00.89.186.037.037 0 01.839.13.5.5 0 00.79.092.037.037 0 01.727.053.5.5 0 00.671.03z\"\n                        />\n                        <path\n                            fill={controlBackground}\n                            d=\"M.1.499a.4.4 0 10.8 0 .4.4 0 10-.8 0z\"\n                        />\n                        <circle cx={0.5} cy={0.19} r={r} fill={active} />\n                    </g>\n                    <text x={0.5} y={0.5} fontSize={fs} {...textProps}>\n                        {label}\n                    </text>\n                </SvgWidget>\n            </Grid>\n            {server && (\n                <Grid item>\n                    <Slider\n                        color={color}\n                        min={min}\n                        max={max}\n                        step={1}\n                        value={position}\n                        valueLabelDisplay=\"off\"\n                        onChange={handleChange}\n                        marks={marks}\n                    />\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n","import { SwitchReg, SwitchVariant } from \"../../../jacdac-ts/src/jdom/constants\"\nimport {\n    useRegisterBoolValue,\n    useRegisterUnpackedValue,\n} from \"../../jacdac/useRegisterValue\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport { SwitchServer } from \"../../../jacdac-ts/src/servers/switchserver\"\nimport React from \"react\"\nimport { Switch } from \"@mui/material\"\nimport { useId } from \"react\"\nimport ButtonWidget from \"../widgets/ButtonWidget\"\nimport useRegister from \"../hooks/useRegister\"\nimport OptionalTooltip from \"../widgets/OptionalTooltip\"\nimport DashboardRegisterValueFallback from \"./DashboardRegisterValueFallback\"\n\nexport default function DashboardSwitch(props: DashboardServiceProps) {\n    const { service } = props\n\n    const labelId = useId()\n    const activeRegister = useRegister(service, SwitchReg.Active)\n    const variantRegister = useRegister(service, SwitchReg.Variant)\n    const on = useRegisterBoolValue(activeRegister, props)\n    const [switchVariant] = useRegisterUnpackedValue<[SwitchVariant]>(\n        variantRegister,\n        props\n    )\n    const server = useServiceServer<SwitchServer>(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const widgetSize = `clamp(5em, 25vw, 100%)`\n    const title = !server ? \"Use the physical switch!\" : undefined\n\n    const handleToggle = () => server?.toggle?.()\n\n    if (on === undefined)\n        return <DashboardRegisterValueFallback register={activeRegister} />\n\n    switch (switchVariant) {\n        case SwitchVariant.PushButton:\n            return (\n                <OptionalTooltip title={title}>\n                    <ButtonWidget\n                        checked={on}\n                        color={color}\n                        label={on ? \"active\" : \"inactive\"}\n                        onDown={server && handleToggle}\n                        size={widgetSize}\n                    />\n                </OptionalTooltip>\n            )\n        default:\n            return (\n                <>\n                    <OptionalTooltip title={title}>\n                        <Switch\n                            aria-labelledby={labelId}\n                            color={color}\n                            checked={on}\n                            onChange={server && handleToggle}\n                        />\n                    </OptionalTooltip>\n                    <label id={labelId}>{on ? \"on\" : \"off\"}</label>\n                </>\n            )\n    }\n}\n","import React, { CSSProperties, useMemo, useRef, useState } from \"react\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport { useRegisterUnpackedValue } from \"../../jacdac/useRegisterValue\"\nimport {\n    GamepadServer,\n    GAMEPAD_DPAD_BUTTONS,\n    GAMEPAD_GAMEPAD_EXTRA_BUTTONS,\n} from \"../../../jacdac-ts/src/servers/gamepadserver\"\nimport {\n    GamepadButtons,\n    GamepadReg,\n    GamepadVariant,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\"\nimport useAnimationFrame from \"../hooks/useAnimationFrame\"\nimport useRegister from \"../hooks/useRegister\"\nimport OptionalTooltip from \"../widgets/OptionalTooltip\"\nimport DashboardRegisterValueFallback from \"./DashboardRegisterValueFallback\"\n\nconst buttonLabels = {\n    [GamepadButtons.Left]: \"\\u25C4\",\n    [GamepadButtons.Up]: \"\\u25B2\",\n    [GamepadButtons.Down]: \"\\u25BC\",\n    [GamepadButtons.Right]: \"\\u25BA\",\n}\n\nfunction decay(value: number, rate: number, precision: number) {\n    let nv = value * rate\n    if (Math.abs(nv) < precision) nv = 0\n    return nv\n}\n\nfunction GamepadWidget(props: DashboardServiceProps) {\n    const { service } = props\n    const register = useRegister(service, GamepadReg.Direction)\n    const [buttons, x, y] = useRegisterUnpackedValue<\n        [GamepadButtons, number, number]\n    >(register, props)\n    const server = useServiceServer<GamepadServer>(service)\n    const color = server ? \"secondary\" : \"primary\"\n\n    const hostValues = (): [number, number] => {\n        const [, x, y] = server.reading.values()\n        return [x, y]\n    }\n    const onUpdate = (newx: number, newy: number) => {\n        server.updateDirection(newx, newy)\n        register.refresh()\n    }\n    const { active, background, controlBackground } = useWidgetTheme(color)\n    const dragSurfaceRef = useRef<SVGCircleElement>()\n    const [grabbing, setGrabbing] = useState(false)\n\n    const w = 40\n    const w2 = w >> 1\n    const cx = w2\n    const cy = w2\n    const rp = 2\n    const rc = 6\n    const rj = 10\n    const pw = 12\n    const ph = 8\n\n    const jx = cx + (x || 0) * rj\n    const jy = cy + (y || 0) * rj\n    const jw = 1\n\n    const updateGamepadDrag = (x: number, y: number) => {\n        const bounds = dragSurfaceRef.current.getBoundingClientRect()\n\n        const dx = (x - bounds.left) * (w / bounds.width) - w2\n        const dy = (y - bounds.top) * (w / bounds.height) - w2\n\n        const angle = Math.atan2(dy, dx)\n        const distance =\n            Math.min(Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2)), rj) / rj\n\n        const newx = distance * Math.cos(angle)\n        const newy = distance * Math.sin(angle)\n\n        onUpdate(newx, newy)\n    }\n\n    const handlePointerDown = async (\n        ev: React.PointerEvent<SVGCircleElement>\n    ) => {\n        ev.preventDefault()\n        const circle = ev.target as SVGCircleElement\n        circle.setPointerCapture(ev.pointerId)\n        setGrabbing(true)\n        updateGamepadDrag(ev.clientX, ev.clientY)\n    }\n    const handlePointerUp = (ev: React.PointerEvent<SVGCircleElement>) => {\n        ev.preventDefault()\n        const circle = ev.target as SVGCircleElement\n        circle.releasePointerCapture(ev.pointerId)\n        setGrabbing(false)\n    }\n    const handlePointerMove = async (\n        ev: React.PointerEvent<SVGCircleElement>\n    ) => {\n        ev.preventDefault()\n        if (grabbing) updateGamepadDrag(ev.clientX, ev.clientY)\n    }\n\n    useAnimationFrame(() => {\n        if (!server || grabbing) return false // let use do its thing\n        const [ax, ay] = hostValues()\n        const nx = decay(ax, 0.95, 16)\n        const ny = decay(ay, 0.95, 16)\n\n        // async\n        onUpdate(nx, ny)\n\n        return nx !== 0 || ny !== 0\n    }, [server, grabbing])\n\n    const handleStyle: CSSProperties = {\n        cursor: grabbing ? \"grabbing\" : \"grab\",\n    }\n\n    return (\n        <>\n            <circle\n                ref={dragSurfaceRef}\n                className=\"Gamepad-background\"\n                cx={cx}\n                cy={cy}\n                r=\"16\"\n                fill={background}\n            ></circle>\n            <rect\n                className=\"dpad-up\"\n                x={\"16\"}\n                y=\"6\"\n                width={ph}\n                height={pw}\n                rx={rp}\n                fill={buttons & GamepadButtons.Up ? active : controlBackground}\n            ></rect>\n            <rect\n                className=\"dpad-down\"\n                x=\"16\"\n                y=\"22\"\n                width={ph}\n                height={pw}\n                rx={rp}\n                fill={\n                    buttons & GamepadButtons.Down ? active : controlBackground\n                }\n            ></rect>\n            <rect\n                className=\"dpad-right\"\n                x=\"22\"\n                y=\"16\"\n                width={pw}\n                height={ph}\n                ry={rp}\n                fill={\n                    buttons & GamepadButtons.Right ? active : controlBackground\n                }\n            ></rect>\n            <rect\n                className=\"dpad-left\"\n                x=\"6\"\n                y=\"16\"\n                width={pw}\n                height={ph}\n                ry={rp}\n                fill={\n                    buttons & GamepadButtons.Left ? active : controlBackground\n                }\n            ></rect>\n            <circle\n                className=\"dpad-center\"\n                cx={cx}\n                cy={cy}\n                r={rc}\n                fill={controlBackground}\n            ></circle>\n            {server ? (\n                <circle\n                    className=\"Gamepad-handle\"\n                    cx={jx}\n                    cy={jy}\n                    r={rc}\n                    fill={background}\n                    stroke={active}\n                    strokeWidth={jw}\n                    tabIndex={0}\n                    role=\"button\"\n                    aria-label=\"Gamepad handle\"\n                    arial-live=\"polite\"\n                    onPointerMove={handlePointerMove}\n                    onPointerDown={handlePointerDown}\n                    onPointerUp={handlePointerUp}\n                    style={handleStyle}\n                />\n            ) : (\n                <circle\n                    className=\"Gamepad-handle\"\n                    cx={jx}\n                    cy={jy}\n                    r={rc}\n                    fill={background}\n                    stroke={active}\n                    strokeWidth={jw}\n                    role=\"button\"\n                    aria-label=\"Gamepad handle\"\n                    arial-live=\"polite\"\n                />\n            )}\n        </>\n    )\n}\n\nfunction ArcadeButton(props: {\n    cx: number\n    cy: number\n    ro: number\n    ri: number\n    pressure: number\n    button: GamepadButtons\n    server: GamepadServer\n    onRefresh: () => void\n    color?: \"primary\" | \"secondary\"\n}) {\n    const { cx, cy, ro, color, pressure, ri, button, server, onRefresh } = props\n    const { textProps, active, background, controlBackground } =\n        useWidgetTheme(color)\n    const checked = (pressure || 0) > 0\n    const title = GamepadButtons[button]\n    const label = buttonLabels[button] || title[0]\n\n    const handleDown = server\n        ? () => {\n              server.down(button) //, 0.7)\n              onRefresh()\n          }\n        : undefined\n    const handleUp = server\n        ? () => {\n              server.up(button)\n              onRefresh()\n          }\n        : undefined\n    const buttonProps = useSvgButtonProps<SVGCircleElement>(\n        title,\n        handleDown,\n        handleUp\n    )\n\n    return (\n        <g\n            transform={`translate(${cx},${cy})`}\n            role=\"button\"\n            aria-live=\"polite\"\n            aria-label={`button ${title} ${checked ? \"down\" : \"up\"}`}\n        >\n            <circle cx={0} cy={0} r={ro} fill={background} />\n            <circle\n                cx={0}\n                cy={0}\n                r={ri}\n                fill={checked ? active : controlBackground}\n                {...buttonProps}\n            >\n                <title>{title}</title>\n            </circle>\n            <text cx={0} cy={0} fontSize={ri} {...textProps}>\n                {label}\n            </text>\n        </g>\n    )\n}\n\nexport default function DashboardGamepad(props: DashboardServiceProps) {\n    const { service } = props\n    const variantRegister = useRegister(service, GamepadReg.Variant)\n    let [variant] = useRegisterUnpackedValue<[GamepadVariant]>(\n        variantRegister,\n        props\n    )\n    const buttonsAvailableRegister = useRegister(\n        service,\n        GamepadReg.ButtonsAvailable\n    )\n    const [buttonsAvailable] = useRegisterUnpackedValue<[GamepadButtons]>(\n        buttonsAvailableRegister,\n        props\n    )\n\n    // if variant is not specific, infer from buttons\n    if (variant === undefined) {\n        if (buttonsAvailable & GAMEPAD_GAMEPAD_EXTRA_BUTTONS)\n            variant = GamepadVariant.Gamepad\n        else if (!buttonsAvailable || buttonsAvailable === GamepadButtons.A)\n            variant = GamepadVariant.Thumb\n    }\n    const directionRegister = useRegister(service, GamepadReg.Direction)\n    const [buttons] = useRegisterUnpackedValue<\n        [GamepadButtons, number, number]\n    >(directionRegister, props)\n    const server = useServiceServer<GamepadServer>(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const { background } = useWidgetTheme(color)\n\n    // buttonsAvailable should be defined by now\n    const analog = !(buttonsAvailable & GAMEPAD_DPAD_BUTTONS)\n    const hasABButtons = !!(\n        buttonsAvailable &\n        (GamepadButtons.A | GamepadButtons.B)\n    )\n\n    const w = 256\n    const h = 128\n\n    const cw = w / 12\n    const ch = h / 4\n\n    const ro = cw - 2\n    const ri = ro - 4\n\n    const sro = ro - 10\n    const sri = sro - 2\n    const scy = sro\n\n    const pos = useMemo(\n        () =>\n            [\n                {\n                    id: GamepadButtons.Left,\n                    cx: cw * 1.5,\n                    cy: 2 * ch,\n                    small: false,\n                },\n                { id: GamepadButtons.Up, cx: cw * 3, cy: ch, small: false },\n                {\n                    id: GamepadButtons.Right,\n                    cx: cw * 4.5,\n                    cy: 2 * ch,\n                    small: false,\n                },\n                {\n                    id: GamepadButtons.Down,\n                    cx: cw * 3,\n                    cy: 3 * ch,\n                    small: false,\n                },\n                {\n                    id: GamepadButtons.A,\n                    cx: cw * 10.5,\n                    cy: ch * 1.25,\n                    small: false,\n                },\n                {\n                    id: GamepadButtons.B,\n                    cx: cw * 9.5,\n                    cy: ch * 2.75,\n                    small: false,\n                },\n                {\n                    id: GamepadButtons.X,\n                    cx: cw * 8.5,\n                    cy: ch * 0.75,\n                    small: false,\n                },\n                {\n                    id: GamepadButtons.Y,\n                    cx: cw * 7.5,\n                    cy: ch * 2.25,\n                    small: false,\n                },\n                { id: GamepadButtons.Menu, cx: cw * 6, cy: scy, small: true },\n                {\n                    id: GamepadButtons.Select,\n                    cx: cw * 5,\n                    cy: scy,\n                    small: true,\n                },\n\n                { id: GamepadButtons.Exit, cx: cw * 7, cy: scy, small: true },\n                { id: GamepadButtons.Reset, cx: cw * 8, cy: scy, small: true },\n            ].filter(p => !!(p.id & buttonsAvailable)),\n        [buttonsAvailable]\n    )\n\n    const handleRefresh = async () => await directionRegister.refresh()\n\n    const abx = cw * 8 + 1\n    const aby = ch * 3 + 4\n\n    const abr = cw / 2\n    const abw = cw * 5 - 6\n    const padcx = 3 * cw\n    const padcy = 2 * ch\n    const padr = 2.6 * cw\n\n    // need button info\n    if (buttonsAvailable === undefined)\n        return (\n            <DashboardRegisterValueFallback\n                register={buttonsAvailableRegister}\n            />\n        )\n\n    return (\n        <OptionalTooltip\n            title={!server ? \"Use the physical Gamepad!\" : undefined}\n        >\n            <SvgWidget width={w} height={h}>\n                {!analog && (\n                    <circle\n                        cx={padcx}\n                        cy={padcy}\n                        r={padr}\n                        fill=\"none\"\n                        stroke={background}\n                        strokeWidth={4}\n                    />\n                )}\n                {analog && (\n                    <g\n                        transform={`scale(${\n                            padr / 16\n                        }) translate(${-1.8},${-1.8})`}\n                    >\n                        <GamepadWidget {...props} />\n                    </g>\n                )}\n                {hasABButtons && (\n                    <rect\n                        transform={`rotate(-66, ${abx}, ${aby})`}\n                        x={abx}\n                        y={aby}\n                        rx={abr}\n                        ry={abr}\n                        width={abw}\n                        height={cw * 2.2}\n                        fill=\"none\"\n                        stroke={background}\n                        strokeWidth={4}\n                    />\n                )}\n                {pos.map(({ id, cx, cy, small }) => (\n                    <ArcadeButton\n                        key={id}\n                        cx={cx}\n                        cy={cy}\n                        ro={small ? sro : ro}\n                        ri={small ? sri : ri}\n                        button={id}\n                        server={server}\n                        onRefresh={handleRefresh}\n                        pressure={buttons & id ? 1 : 0}\n                        color={color}\n                    />\n                ))}\n            </SvgWidget>\n        </OptionalTooltip>\n    )\n}\n","import React, { createElement, FunctionComponent, lazy } from \"react\"\nimport {\n    SRV_ACCELEROMETER,\n    SRV_BUTTON,\n    SRV_BUZZER,\n    SRV_CHARACTER_SCREEN,\n    SRV_COLOR,\n    SRV_COMPASS,\n    SRV_GYROSCOPE,\n    SRV_GAMEPAD,\n    SRV_LED,\n    SRV_DOT_MATRIX,\n    SRV_LED_STRIP,\n    SRV_LED_SINGLE,\n    SRV_MATRIX_KEYPAD,\n    SRV_MOTION,\n    SRV_POWER,\n    SRV_RAIN_GAUGE,\n    SRV_REAL_TIME_CLOCK,\n    SRV_REFLECTED_LIGHT,\n    SRV_RNG,\n    SRV_ROLE_MANAGER,\n    SRV_ROTARY_ENCODER,\n    SRV_SERVO,\n    SRV_SEVEN_SEGMENT_DISPLAY,\n    SRV_SOIL_MOISTURE,\n    SRV_SOLENOID,\n    SRV_SOUND_LEVEL,\n    SRV_SOUND_PLAYER,\n    SRV_SOUND_SPECTRUM,\n    SRV_SPEECH_SYNTHESIS,\n    SRV_SWITCH,\n    SRV_TRAFFIC_LIGHT,\n    SRV_WATER_LEVEL,\n    SRV_WIND_DIRECTION,\n    SRV_BIT_RADIO,\n    SRV_HID_KEYBOARD,\n    SRV_HID_MOUSE,\n    SRV_CLOUD_CONFIGURATION,\n    SRV_WIFI,\n    SRV_VIBRATION_MOTOR,\n    SRV_CODAL_MESSAGE_BUS,\n    SRV_RELAY,\n    SRV_LIGHT_BULB,\n    SRV_BRAILLE_DISPLAY,\n    SRV_DEVICE_SCRIPT_MANAGER,\n    SRV_HID_JOYSTICK,\n    SRV_CLOUD_ADAPTER,\n    SRV_SAT_NAV,\n    SRV_PLANAR_POSITION,\n    SRV_SERIAL,\n    SRV_GPIO,\n    SRV_ROS,\n    SRV_INDEXED_SCREEN,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport { CircularProgress, SvgIconProps } from \"@mui/material\"\n\nimport { FwdEduSubstituteWidget, isFwdEdu } from \"./DashboardFwdEduWidgets\"\n\n// bundled\nimport DashboardButton from \"./DashboardButton\"\nimport DashboardRotaryEncoder from \"./DashboardRotaryEncoder\"\nimport DashboardSwitch from \"./DashboardSwitch\"\nimport DashboardGamepad from \"./DashboardGamepad\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport Suspense from \"../ui/Suspense\"\nimport DashboardServiceDefaultWidget from \"./DashboardServiceDefaultWidget\"\n\n// lazy devices\nconst DashboardServo = lazy(() => import(\"./DashboardServo\"))\nconst DashboardAccelerometer = lazy(() => import(\"./DashboardAccelerometer\"))\nconst DashboardBuzzer = lazy(() => import(\"./DashboardBuzzer\"))\nconst DashboardLED = lazy(() => import(\"./DashboardLED\"))\nconst DashboardLEDStrip = lazy(() => import(\"./DashboardLEDStrip\"))\nconst DashboardLEDSingle = lazy(() => import(\"./DashboardLEDSingle\"))\nconst DashboardRoleManager = lazy(() => import(\"./DashboardRoleManager\"))\nconst DashboardTrafficLight = lazy(() => import(\"./DashboardTrafficLight\"))\nconst DashboardCharacterScreen = lazy(\n    () => import(\"./DashboardCharacterScreen\")\n)\nconst DashboardBrailleDisplay = lazy(() => import(\"./DashboardBrailleDisplay\"))\nconst DashboardRainGauge = lazy(() => import(\"./DashboardRainGauge\"))\nconst DashboardDotMatrix = lazy(() => import(\"./DashboardDotMatrix\"))\nconst DashboardWindDirection = lazy(() => import(\"./DashboardWindDirection\"))\nconst DashboardMatrixKeypad = lazy(() => import(\"./DashboardMatrixKeypad\"))\nconst DashboardReflectedLight = lazy(() => import(\"./DashboardReflectedLight\"))\nconst DashboardPower = lazy(() => import(\"./DashboardPower\"))\nconst DashboardSpeechSynthesis = lazy(\n    () => import(\"./DashboardSpeechSynthesis\")\n)\nconst DashboardSoilMoisture = lazy(() => import(\"./DashboardSoilMoisture\"))\nconst DashboardRealTimeClock = lazy(() => import(\"./DashboardRealTimeClock\"))\nconst DashboardSatNav = lazy(() => import(\"./DashboardSatNav\"))\nconst DashboardSevenSegmentDisplay = lazy(\n    () => import(\"./DashboardSevenSegmentDisplay\")\n)\nconst DashboardMotion = lazy(() => import(\"./DashboardMotion\"))\nconst DashboardWaterLevel = lazy(() => import(\"./DashboardWaterLevel\"))\nconst DashboardColor = lazy(() => import(\"./DashboardColor\"))\nconst DashboardSoundPlayer = lazy(() => import(\"./DashboardSoundPlayer\"))\nconst DashboardSoundLevel = lazy(() => import(\"./DashboardSoundLevel\"))\nconst DashboardSoundSpectrum = lazy(() => import(\"./DashboardSoundSpectrum\"))\nconst DashboardRandomNumberGenerator = lazy(\n    () => import(\"./DashboardRandomNumberGenerator\")\n)\nconst DashboardCompass = lazy(() => import(\"./DashboardCompass\"))\nconst DashboardGyroscope = lazy(() => import(\"./DashboardGyroscope\"))\nconst DashboardSolenoid = lazy(() => import(\"./DashboardSolenoid\"))\nconst DashboardBitRadio = lazy(() => import(\"./DashboardBitRadio\"))\nconst DashboardHIDKeyboard = lazy(() => import(\"./DashboardHIDKeyboard\"))\nconst DashboardHIDMouse = lazy(() => import(\"./DashboardHIDMouse\"))\nconst DashboardHIDJoystick = lazy(() => import(\"./DashboardHIDJoystick\"))\nconst DashboardCloudConfiguration = lazy(\n    () => import(\"./DashboardCloudConfiguration\")\n)\nconst DashboardWifi = lazy(() => import(\"./DashboardWifi\"))\nconst DashboardVibrationMotor = lazy(() => import(\"./DashboardVibrationMotor\"))\nconst DashboardCODALMessageBus = lazy(\n    () => import(\"./DashboardCODALMessageBus\")\n)\nconst DashboardRelay = lazy(() => import(\"./DashboardRelay\"))\nconst DashboardGPIO = lazy(() => import(\"./DashboardGPIO\"))\nconst DashboardLightBulb = lazy(() => import(\"./DashboardLightBulb\"))\nconst DashboardDeviceScriptManager = lazy(\n    () => import(\"./DashboardDeviceScriptManager\")\n)\nconst DashboardCloudAdapter = lazy(() => import(\"./DashboardCloudAdapter\"))\nconst DashboardPlanarPosition = lazy(() => import(\"./DashboardPlanarPosition\"))\nconst DashboardSerial = lazy(() => import(\"./DashboardSerial\"))\nconst DashboardRos = lazy(() => import(\"./DashboardRos\"))\nconst DashboardIndexedScreen = lazy(() => import(\"./DashboardIndexedScreen\"))\n\n// icons\nconst PowerSettingsNewIcon = lazy(\n    () => import(\"@mui/icons-material/PowerSettingsNew\")\n)\nconst MusicNoteIcon = lazy(() => import(\"@mui/icons-material/MusicNote\"))\nconst AppsIcon = lazy(() => import(\"@mui/icons-material/Apps\"))\nconst SensorsIcon = lazy(() => import(\"@mui/icons-material/Sensors\"))\nconst MemoryIcon = lazy(() => import(\"@mui/icons-material/Memory\"))\nconst CloudQueueIcon = lazy(() => import(\"@mui/icons-material/CloudQueue\"))\nconst SerialIcon = lazy(() => import(\"../icons/SerialIcon\"))\n\nexport interface DashboardServiceProps {\n    service: JDService\n    expanded?: boolean\n    // all widget services\n    services?: JDService[]\n    variant?: \"icon\" | \"\"\n    // the dashboard html element is in the view\n    visible?: boolean\n    // a programming experience is controlling the device\n    controlled?: boolean\n    // show a button to toggle an advanced interaction mode\n    expandable?: boolean\n    icon?: DashboardIcon\n}\nexport type DashboardServiceComponent = FunctionComponent<DashboardServiceProps>\nexport type DashboardIcon = FunctionComponent<SvgIconProps>\n\nconst serviceViews: {\n    [serviceClass: number]: {\n        component: DashboardServiceComponent\n        bundled?: boolean\n        weight?: (service: JDService) => number\n        // show a button to toggle an advanced interaction mode\n        expandable?: boolean\n        icon?: DashboardIcon\n    }\n} = {\n    [SRV_ROLE_MANAGER]: {\n        component: DashboardRoleManager,\n        weight: () => 2,\n    },\n    [SRV_BUZZER]: {\n        component: DashboardBuzzer,\n        weight: () => 4,\n        expandable: true,\n        icon: MusicNoteIcon,\n    },\n    [SRV_LED_STRIP]: {\n        component: DashboardLEDStrip,\n        weight: () => 3,\n        expandable: true,\n    },\n    [SRV_INDEXED_SCREEN]: {\n        component: DashboardIndexedScreen,\n        weight: () => 3,\n        expandable: true\n    },\n    [SRV_LED]: {\n        component: DashboardLED,\n        weight: () => 3,\n        expandable: true,\n    },\n    [SRV_ACCELEROMETER]: {\n        component: DashboardAccelerometer,\n        weight: () => 3,\n        expandable: true,\n    },\n    [SRV_ROTARY_ENCODER]: {\n        component: DashboardRotaryEncoder,\n        bundled: true,\n        weight: () => 2,\n    },\n    [SRV_BUTTON]: {\n        component: DashboardButton,\n        bundled: true,\n    },\n    [SRV_SERVO]: {\n        component: DashboardServo,\n    },\n    [SRV_SWITCH]: {\n        component: DashboardSwitch,\n        bundled: true,\n    },\n    [SRV_TRAFFIC_LIGHT]: {\n        component: DashboardTrafficLight,\n    },\n    [SRV_CHARACTER_SCREEN]: {\n        component: DashboardCharacterScreen,\n        weight: () => 3,\n        expandable: true,\n    },\n    [SRV_BRAILLE_DISPLAY]: {\n        component: DashboardBrailleDisplay,\n        weight: () => 2,\n        expandable: true,\n    },\n    [SRV_RAIN_GAUGE]: {\n        component: DashboardRainGauge,\n    },\n    [SRV_DOT_MATRIX]: {\n        component: DashboardDotMatrix,\n        weight: () => 3,\n        expandable: true,\n        icon: AppsIcon,\n    },\n    [SRV_WIND_DIRECTION]: {\n        component: DashboardWindDirection,\n    },\n    [SRV_MATRIX_KEYPAD]: {\n        component: DashboardMatrixKeypad,\n    },\n    [SRV_REFLECTED_LIGHT]: {\n        component: DashboardReflectedLight,\n    },\n    [SRV_POWER]: {\n        component: DashboardPower,\n        expandable: true,\n        icon: PowerSettingsNewIcon,\n    },\n    [SRV_SPEECH_SYNTHESIS]: {\n        component: DashboardSpeechSynthesis,\n    },\n    [SRV_SOIL_MOISTURE]: {\n        component: DashboardSoilMoisture,\n    },\n    [SRV_REAL_TIME_CLOCK]: {\n        component: DashboardRealTimeClock,\n        expandable: true,\n    },\n    [SRV_SAT_NAV]: {\n        component: DashboardSatNav,\n    },\n    [SRV_LED_SINGLE]: {\n        component: DashboardLEDSingle,\n    },\n    [SRV_GAMEPAD]: {\n        component: DashboardGamepad,\n        bundled: true,\n        weight: () => 3,\n    },\n    [SRV_SEVEN_SEGMENT_DISPLAY]: {\n        component: DashboardSevenSegmentDisplay,\n        expandable: true,\n    },\n    [SRV_MOTION]: {\n        component: DashboardMotion,\n    },\n    [SRV_WATER_LEVEL]: {\n        component: DashboardWaterLevel,\n    },\n    [SRV_COLOR]: {\n        component: DashboardColor,\n        weight: () => 1,\n    },\n    [SRV_SOUND_PLAYER]: {\n        component: DashboardSoundPlayer,\n        weight: () => 1,\n        expandable: true,\n        icon: MusicNoteIcon,\n    },\n    [SRV_SOUND_LEVEL]: {\n        component: DashboardSoundLevel,\n        expandable: true,\n    },\n    [SRV_RNG]: {\n        component: DashboardRandomNumberGenerator,\n    },\n    [SRV_COMPASS]: {\n        component: DashboardCompass,\n    },\n    [SRV_GYROSCOPE]: {\n        component: DashboardGyroscope,\n        weight: () => 3,\n        expandable: true,\n    },\n    [SRV_SOUND_SPECTRUM]: {\n        component: DashboardSoundSpectrum,\n        weight: () => 2,\n    },\n    [SRV_SOLENOID]: {\n        component: DashboardSolenoid,\n    },\n    [SRV_BIT_RADIO]: {\n        component: DashboardBitRadio,\n        weight: () => 4,\n        expandable: true,\n        icon: SensorsIcon,\n    },\n    [SRV_SERIAL]: {\n        component: DashboardSerial,\n        weight: () => 2,\n        icon: SerialIcon,\n    },\n    [SRV_ROS]: {\n        component: DashboardRos,\n        expandable: true,\n        weight: () => 4,\n    },\n    [SRV_HID_KEYBOARD]: {\n        component: DashboardHIDKeyboard,\n        weight: () => 4,\n        expandable: true,\n    },\n    [SRV_HID_MOUSE]: {\n        component: DashboardHIDMouse,\n        weight: () => 2,\n    },\n    [SRV_HID_JOYSTICK]: {\n        component: DashboardHIDJoystick,\n        weight: () => 2,\n    },\n    [SRV_CLOUD_CONFIGURATION]: {\n        component: DashboardCloudConfiguration,\n        weight: () => 2,\n    },\n    [SRV_WIFI]: {\n        component: DashboardWifi,\n        weight: () => 4,\n    },\n    [SRV_VIBRATION_MOTOR]: {\n        component: DashboardVibrationMotor,\n        weight: () => 3,\n    },\n    [SRV_CODAL_MESSAGE_BUS]: {\n        component: DashboardCODALMessageBus,\n        weight: () => 2,\n    },\n    [SRV_RELAY]: {\n        component: DashboardRelay,\n    },\n    [SRV_GPIO]: {\n        component: DashboardGPIO,\n        weight: () => 4,\n    },\n    [SRV_LIGHT_BULB]: {\n        component: DashboardLightBulb,\n    },\n    [SRV_PLANAR_POSITION]: {\n        component: DashboardPlanarPosition,\n        weight: () => 1,\n    },\n    [SRV_DEVICE_SCRIPT_MANAGER]: {\n        component: DashboardDeviceScriptManager,\n        expandable: true,\n        icon: MemoryIcon,\n    },\n    [SRV_CLOUD_ADAPTER]: {\n        component: DashboardCloudAdapter,\n        weight: () => 4,\n        expandable: true,\n        icon: CloudQueueIcon,\n    },\n}\n\nexport function isExpandableView(serviceClass: number) {\n    return !!serviceViews[serviceClass]?.expandable\n}\n\nexport function hasServiceView(serviceClass: number) {\n    return !!serviceViews[serviceClass]\n}\n\nexport default function DashboardServiceWidget(\n    props: React.Attributes & DashboardServiceProps\n): JSX.Element {\n    const { service } = props\n    const { specification } = service\n    const { component, bundled } =\n        serviceViews[specification.classIdentifier] || {}\n    const server = useServiceServer(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const useFwdWidget = isFwdEdu(service.device)\n\n    // for FwdEdu widgets that replace Default widgets\n    if (useFwdWidget) return createElement(FwdEduSubstituteWidget, props)\n\n    // no special support\n    if (!component) return createElement(DashboardServiceDefaultWidget, props)\n\n    // precompiled\n    if (bundled) return createElement(component, props)\n\n    // lazy loading\n    return (\n        <Suspense\n            fallback={\n                <CircularProgress\n                    aria-label={`loading...`}\n                    color={color}\n                    disableShrink={true}\n                    variant={\"indeterminate\"}\n                    size={\"1rem\"}\n                />\n            }\n        >\n            {createElement(component, props)}\n        </Suspense>\n    )\n}\n\nexport function dashboardServiceWeight(service: JDService) {\n    const view = serviceViews[service.serviceClass]\n    return view?.weight?.(service)\n}\n\nexport function dashboardServiceIcon(serviceClass: number) {\n    return serviceViews[serviceClass]?.icon\n}\n","import React from \"react\"\nimport { Typography } from \"@mui/material\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport { RegisterOptions } from \"../../jacdac/useRegisterValue\"\nimport useStatusCode from \"./useStatusCode\"\nimport {\n    SRV_WIFI,\n    SystemStatusCodes,\n} from \"../../../jacdac-ts/jacdac-spec/dist/specconstants\"\nimport { humanify } from \"../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\nimport Alert from \"../ui/Alert\"\n\nconst codes: Record<number, Record<number, (srv: JDService) => string>> = {\n    [SRV_WIFI]: {\n        [SystemStatusCodes.WaitingForInput]: () =>\n            \"Waiting for WiFi credentials.\",\n    },\n}\nconst severities: Record<number, \"error\" | \"warning\" | \"info\"> = {\n    [SystemStatusCodes.Sleeping]: \"info\",\n    [SystemStatusCodes.Initializing]: \"info\",\n    [SystemStatusCodes.Calibrating]: \"info\",\n}\n\nexport default function StatusCodeAlert(\n    props: {\n        service: JDService\n    } & RegisterOptions\n) {\n    const { service, ...rest } = props\n    const { serviceClass } = service\n    const { code, vendorCode } = useStatusCode(service, rest)\n    if (\n        (code === SystemStatusCodes.Ready ||\n            code === SystemStatusCodes.Sleeping ||\n            code === SystemStatusCodes.Initializing) &&\n        vendorCode === 0\n    )\n        return null\n    const severity = severities[code] || \"warning\"\n    return (\n        <Alert severity={severity}>\n            {!!code && (\n                <Typography variant=\"caption\">\n                    {humanify(\n                        codes[serviceClass]?.[code]?.(service) ||\n                            SystemStatusCodes[code] ||\n                            \"?\"\n                    )}\n                </Typography>\n            )}\n            {!!vendorCode && (\n                <Typography variant=\"caption\">\n                    vendor error: 0x{vendorCode.toString(16)}\n                </Typography>\n            )}\n        </Alert>\n    )\n}\n","import { ROLE_CHANGE } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport useEventRaised from \"../../jacdac/useEventRaised\"\n\nexport default function useServiceRole(service: JDService): string {\n    return useEventRaised(ROLE_CHANGE, service, _ => _?.role)\n}\n","import { Button, styled } from \"@mui/material\"\nimport React, { lazy, useState } from \"react\"\nimport { isDeviceId, shortDeviceId } from \"../../../jacdac-ts/src/jdom/pretty\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport { ellipse } from \"../../../jacdac-ts/src/jdom/utils\"\nimport useChange from \"../../jacdac/useChange\"\nimport Suspense from \"../ui/Suspense\"\nimport useRoleManagerClient from \"./useRoleManagerClient\"\nimport useServiceRole from \"./useServiceRole\"\nimport { escapeRoleName } from \"../../../jacdac-ts/src/jdom/rolemanager\"\nconst SelectRoleDialog = lazy(() => import(\"../dialogs/SelectRoleDialog\"))\n\nconst MAX_NAME_LENGTH = 20\n\nconst RoleButton = styled(Button)({\n    textTransform: \"none\",\n})\n\nexport default function ServiceRole(props: { service: JDService }) {\n    const { service } = props\n\n    const [showSelectRoleDialog, setShowSelectRoleDialog] = useState(false)\n    const roleManager = useRoleManagerClient()\n    const role = useServiceRole(service)\n    const handleOpen = () => setShowSelectRoleDialog(true)\n    const handleClose = () => setShowSelectRoleDialog(false)\n\n    const hasRoleForService = useChange(\n        roleManager,\n        _ => _?.hasRoleForService(service),\n        [service]\n    )\n    // hide if no role manager or role not compatible with required roles\n    if (!hasRoleForService) return null\n\n    const name = isDeviceId(role)\n        ? shortDeviceId(role)\n        : ellipse(escapeRoleName(role), MAX_NAME_LENGTH) || \"...\"\n    return (\n        <>\n            <RoleButton\n                title={role || \"Choose role for service\"}\n                size=\"small\"\n                onClick={handleOpen}\n            >\n                {name}\n            </RoleButton>\n            {showSelectRoleDialog && (\n                <Suspense>\n                    <SelectRoleDialog service={service} onClose={handleClose} />\n                </Suspense>\n            )}\n        </>\n    )\n}\n","import { Grid, SvgIconProps, Tooltip, Typography } from \"@mui/material\"\nimport React, { createElement, Suspense } from \"react\"\nimport {\n    dashboardServiceIcon,\n    DashboardServiceProps,\n} from \"./DashboardServiceWidget\"\nimport ServiceRole from \"../services/ServiceRole\"\nimport useInstanceName from \"../services/useInstanceName\"\nimport IconButtonWithTooltip from \"../ui/IconButtonWithTooltip\"\nimport EditIcon from \"@mui/icons-material/Edit\"\nimport { serviceName } from \"../../../jacdac-ts/src/jdom/pretty\"\n\nexport default function DashboardServiceWidgetItemHeader(\n    props: {\n        toggleExpanded: () => void\n    } & React.Attributes &\n        DashboardServiceProps\n): JSX.Element {\n    const { service, expanded, toggleExpanded, ...rest } = props\n    const { serviceClass } = service\n    const instanceName = useInstanceName(service, rest)\n    const icon = dashboardServiceIcon(serviceClass)\n    const iconProps: SvgIconProps = {\n        titleAccess: serviceName(serviceClass),\n        color: \"disabled\",\n    }\n    return (\n        <Grid container spacing={1} alignItems=\"center\">\n            {icon && (\n                <Grid item>\n                    <Tooltip title={serviceName(serviceClass)}>\n                        <Suspense fallback={null}>\n                            {createElement(icon, iconProps)}\n                        </Suspense>\n                    </Tooltip>\n                </Grid>\n            )}\n            <Grid item xs>\n                <ServiceRole service={service} />\n            </Grid>\n            {instanceName && (\n                <Grid item>\n                    <Typography\n                        className=\"no-pointer-events\"\n                        variant=\"caption\"\n                        component=\"span\"\n                        style={{ float: \"right\" }}\n                    >\n                        {instanceName}\n                    </Typography>\n                </Grid>\n            )}\n            {expanded !== undefined && (\n                <Grid item>\n                    <Grid item>\n                        <IconButtonWithTooltip\n                            size=\"small\"\n                            title={\n                                expanded\n                                    ? \"Hide configuration\"\n                                    : \"Show configuration\"\n                            }\n                            onClick={toggleExpanded}\n                        >\n                            <EditIcon />\n                        </IconButtonWithTooltip>\n                    </Grid>\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n","import { Grid } from \"@mui/material\"\nimport React, { useEffect, useState } from \"react\"\nimport DashboardServiceWidget, {\n    DashboardServiceProps,\n    isExpandableView,\n} from \"./DashboardServiceWidget\"\nimport StatusCodeAlert from \"../services/StatusCodeAlert\"\nimport DashboardServiceWidgetItemHeader from \"./DashboardServiceWidgetItemHeader\"\n\nexport default function DashboardServiceWidgetItem(\n    props: React.Attributes & DashboardServiceProps\n): JSX.Element {\n    const { service, controlled, ...rest } = props\n    const { serviceClass } = service\n    const expandable = props.expandable || isExpandableView(serviceClass)\n    const [expanded, setExpanded] = useState<boolean>(\n        !controlled && expandable ? false : undefined\n    )\n    const statusCodeAlert = <StatusCodeAlert service={service} {...rest} />\n    const toggleExpanded = () => setExpanded(e => !e)\n    useEffect(() => {\n        setExpanded(!controlled && expandable ? false : undefined)\n    }, [controlled, expandable])\n\n    return (\n        <Grid item>\n            <DashboardServiceWidgetItemHeader\n                {...props}\n                expanded={expanded}\n                toggleExpanded={toggleExpanded}\n            />\n            {statusCodeAlert}\n            <DashboardServiceWidget {...props} expanded={expanded} />\n        </Grid>\n    )\n}\n","import { useEffect, useState, RefObject } from \"react\"\n\nexport interface Args extends IntersectionObserverInit {\n    freezeOnceVisible?: boolean\n}\n\nexport default function useIntersectionObserver(\n    elementRef: RefObject<Element>,\n    options?: { freezeOnceVisible?: boolean } & IntersectionObserverInit\n): IntersectionObserverEntry | undefined {\n    const [entry, setEntry] = useState<IntersectionObserverEntry>()\n    const {\n        threshold = 0,\n        root = null,\n        rootMargin = \"0%\",\n        freezeOnceVisible,\n    } = options || {}\n\n    const frozen = entry?.isIntersecting && freezeOnceVisible\n\n    const updateEntry = ([entry]: IntersectionObserverEntry[]): void => {\n        setEntry(entry)\n    }\n\n    useEffect(() => {\n        const node = elementRef?.current // DOM Ref\n        const hasIOSupport = !!window.IntersectionObserver\n\n        if (!hasIOSupport || frozen || !node) return\n\n        const observerParams = { threshold, root, rootMargin }\n        const observer = new IntersectionObserver(updateEntry, observerParams)\n\n        //console.log(`observe`, { node })\n        observer.observe(node)\n\n        return () => observer.disconnect()\n    }, [elementRef, threshold, root, rootMargin, frozen])\n\n    return entry\n}\n","import React from \"react\"\nimport { LOST, FOUND } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport useChange from \"../../jacdac/useChange\"\nimport useEventRaised from \"../../jacdac/useEventRaised\"\nimport Alert from \"../ui/Alert\"\n\nexport function DeviceLostAlert(props: { device: JDDevice }) {\n    const { device } = props\n    const lost = useEventRaised([LOST, FOUND], device, dev => !!dev?.lost)\n    const flashing = useChange(\n        device,\n        _ => _?.bootloader || !!_?.firmwareUpdater\n    )\n    if (!lost || flashing) return null\n    return <Alert severity=\"info\">Device lost...</Alert>\n}\n","import { CardHeader, Typography } from \"@mui/material\"\nimport React from \"react\"\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport DeviceName from \"../devices/DeviceName\"\nimport DeviceAvatar from \"../devices/DeviceAvatar\"\nimport DeviceActions from \"../devices/DeviceActions\"\nimport useDeviceDescription from \"../../jacdac/useDeviceDescription\"\n\nexport default function DashboardDeviceCardHeader(props: {\n    device: JDDevice\n    showAvatar?: boolean\n    showReset?: boolean\n}) {\n    const { device, showAvatar, showReset } = props\n    const description = useDeviceDescription(device)\n\n    return (\n        <CardHeader\n            style={{ paddingBottom: 0 }}\n            avatar={showAvatar && <DeviceAvatar device={device} />}\n            action={\n                <DeviceActions\n                    device={device}\n                    showStop={true}\n                    hideIdentity={true}\n                    showReset={showReset}\n                    showSettings={false}\n                />\n            }\n            title={<DeviceName showShortId={false} device={device} />}\n            subheader={\n                <>\n                    {description && (\n                        <Typography variant=\"caption\" gutterBottom>\n                            {description}\n                        </Typography>\n                    )}\n                </>\n            }\n        />\n    )\n}\n","import { Card, CardContent, Grid, Paper } from \"@mui/material\"\nimport React, { useCallback, useRef, lazy } from \"react\"\nimport {\n    SRV_CONTROL,\n    SRV_INFRASTRUCTURE,\n    SRV_LOGGER,\n    SRV_PROTO_TEST,\n    SRV_PROXY,\n    SRV_SETTINGS,\n    SRV_UNIQUE_BRAIN,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport useChange from \"../../jacdac/useChange\"\nimport DashboardServiceWidgetItem from \"./DashboardServiceWidgetItem\"\nimport useDeviceName from \"../devices/useDeviceName\"\nimport { DashboardDeviceProps } from \"./Dashboard\"\nimport useIntersectionObserver from \"../hooks/useIntersectionObserver\"\nimport { dependencyId } from \"../../../jacdac-ts/src/jdom/eventsource\"\nimport { DeviceLostAlert } from \"../alert/DeviceLostAlert\"\nimport Suspense from \"../ui/Suspense\"\nimport DashboardDeviceCardHeader from \"./DashboardDeviceCardHeader\"\nconst DeviceProxyAlert = lazy(() => import(\"../alert/DeviceProxyAlert\"))\nconst DeviceBootloaderAlert = lazy(\n    () => import(\"../alert/DeviceBootloaderAlert\")\n)\n\nconst ignoredServices = [\n    SRV_CONTROL,\n    SRV_LOGGER,\n    SRV_SETTINGS,\n    SRV_PROTO_TEST,\n    SRV_PROXY,\n    SRV_INFRASTRUCTURE,\n    SRV_UNIQUE_BRAIN,\n]\n\nexport default function DashboardDevice(\n    props: {\n        device: JDDevice\n    } & DashboardDeviceProps\n) {\n    const {\n        device,\n        serviceFilter,\n        variant,\n        showAvatar,\n        showHeader,\n        showReset,\n        showDeviceProxyAlert,\n        alwaysVisible,\n        controlled,\n    } = props\n\n    const name = useDeviceName(device)\n    const services = useChange(device, _ =>\n        _?.services({ specification: true }).filter(\n            service =>\n                ignoredServices.indexOf(service.serviceClass) < 0 &&\n                !service.isMixin &&\n                (!serviceFilter || serviceFilter(service))\n        )\n    )\n\n    // refresh when visible\n    const serviceGridRef = useRef<HTMLDivElement>()\n    const intersection = useIntersectionObserver(serviceGridRef)\n    const visible =\n        alwaysVisible || !intersection || !!intersection.isIntersecting\n\n    const ServiceWidgets = useCallback(\n        () => (\n            <Grid\n                ref={serviceGridRef}\n                component=\"div\"\n                container\n                spacing={2}\n                justifyContent=\"center\"\n                alignItems=\"flex-end\"\n                alignContent=\"space-between\"\n            >\n                {services?.map(service => (\n                    <DashboardServiceWidgetItem\n                        key={service.nodeId}\n                        service={service}\n                        services={services}\n                        variant={variant}\n                        visible={visible}\n                        controlled={controlled}\n                    />\n                ))}\n            </Grid>\n        ),\n        [dependencyId(services), variant, visible, controlled]\n    )\n\n    if (!showHeader)\n        return (\n            <Paper style={{ padding: \"0.25em\" }} variant=\"outlined\">\n                <ServiceWidgets />\n            </Paper>\n        )\n\n    return (\n        <Card aria-live=\"polite\" aria-label={`device ${name} started`}>\n            <DashboardDeviceCardHeader\n                device={device}\n                showAvatar={showAvatar}\n                showReset={showReset}\n            />\n            <CardContent style={{ paddingTop: 0 }}>\n                <DeviceLostAlert device={device} />\n                <Suspense fallback={null}>\n                    <DeviceBootloaderAlert device={device} />\n                </Suspense>\n                {showDeviceProxyAlert && (\n                    <Suspense>\n                        <DeviceProxyAlert device={device} />\n                    </Suspense>\n                )}\n                <ServiceWidgets />\n            </CardContent>\n        </Card>\n    )\n}\n","import { Grid } from \"@mui/material\"\nimport React, { useContext } from \"react\"\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport DashboardDevice from \"./DashboardDevice\"\nimport { GridBreakpoints } from \"../useGridBreakpoints\"\nimport { DashboardDeviceProps } from \"./Dashboard\"\nimport useChange from \"../../jacdac/useChange\"\nimport { dashboardServiceWeight } from \"./DashboardServiceWidget\"\nimport AppContext, { DrawerType } from \"../AppContext\"\n\nexport default function DashboardDeviceItem(\n    props: {\n        device: JDDevice\n        alwaysVisible?: boolean\n    } & DashboardDeviceProps\n) {\n    const { device, ...other } = props\n    const { drawerType } = useContext(AppContext)\n    const breakpoints: GridBreakpoints = useChange(\n        device,\n        () => {\n            const breakpointWeight = device\n                .services()\n                .map(srv => {\n                    return (\n                        dashboardServiceWeight(srv) ||\n                        (srv.readingRegister ||\n                        srv.valueRegister ||\n                        srv.intensityRegister\n                            ? 1\n                            : 0)\n                    )\n                })\n                .reduce((c: number, v) => c + v, 0)\n\n            if (breakpointWeight > 3 || drawerType !== DrawerType.None)\n                return { xs: 12, sm: 12, md: 12, lg: 6, xl: 6 }\n            else if (breakpointWeight == 3)\n                return { xs: 12, sm: 12, md: 4, lg: 4, xl: 4 }\n            else if (breakpointWeight == 2)\n                return { xs: 12, sm: 6, md: 4, lg: 3, xl: 4 }\n            else\n                return {\n                    xs: 6,\n                    sm: 4,\n                    md: 3,\n                    lg: 2,\n                    xl: \"auto\",\n                }\n        },\n        [drawerType],\n        (a, b) =>\n            a.xs == b.xs &&\n            a.sm == b.sm &&\n            a.md == b.md &&\n            a.sm == b.sm &&\n            a.lg == b.lg &&\n            a.xl == b.xl\n    )\n\n    // based on size, expanded or reduce widget size\n    return (\n        <Grid item {...breakpoints}>\n            <DashboardDevice device={device} {...other} />\n        </Grid>\n    )\n}\n","import { Grid } from \"@mui/material\"\nimport React from \"react\"\nimport { useId } from \"react\"\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport GridHeader from \"../ui/GridHeader\"\nimport { DashboardDeviceProps } from \"./Dashboard\"\nimport DashboardDeviceItem from \"./DashboardDeviceItem\"\n\nexport default function DeviceGroup(\n    props: {\n        title: string\n        action?: JSX.Element\n        devices: JDDevice[]\n        children?: JSX.Element | JSX.Element[]\n    } & DashboardDeviceProps\n) {\n    const { title, action, devices, children, ...other } = props\n    const sectionId = useId()\n\n    if (!action && !devices?.length) return null\n\n    return (\n        <section id={sectionId}>\n            <Grid sx={{ mb: 1 }} container spacing={1}>\n                <GridHeader title={title} action={action} />\n                {children}\n                {devices?.map(device => (\n                    <DashboardDeviceItem\n                        key={device.id}\n                        device={device}\n                        {...other}\n                    />\n                ))}\n            </Grid>\n        </section>\n    )\n}\n","import React, { useContext } from \"react\"\nimport {\n    SRV_BUTTON,\n    SRV_BUZZER,\n    SRV_HUMIDITY,\n    SRV_GAMEPAD,\n    SRV_LED,\n    SRV_POTENTIOMETER,\n    SRV_SOIL_MOISTURE,\n    SRV_TEMPERATURE,\n    SRV_TRAFFIC_LIGHT,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport { startServiceProviderFromServiceClass } from \"../../../jacdac-ts/src/servers/servers\"\nimport IconButtonWithTooltip from \"../ui/IconButtonWithTooltip\"\nimport AddIcon from \"@mui/icons-material/Add\"\nimport Alert from \"../ui/Alert\"\nimport SimulatorDialogsContext from \"../SimulatorsDialogContext\"\nimport useBus from \"../../jacdac/useBus\"\nimport RadioButtonCheckedIcon from \"@mui/icons-material/RadioButtonChecked\"\nimport WaterIcon from \"@mui/icons-material/Water\"\nimport DeviceThermostatIcon from \"@mui/icons-material/DeviceThermostat\"\nimport GrassIcon from \"@mui/icons-material/Grass\"\nimport MusicNoteIcon from \"@mui/icons-material/MusicNote\"\nimport LinearScaleIcon from \"@mui/icons-material/LinearScale\"\nimport VideogameAssetIcon from \"@mui/icons-material/VideogameAsset\"\nimport TungstenIcon from \"@mui/icons-material/Tungsten\"\nimport TrafficIcon from \"@mui/icons-material/Traffic\"\n\nexport function SimulateDeviceHint() {\n    const bus = useBus()\n    const handleStartSimulator = (serviceClass: number) => () =>\n        startServiceProviderFromServiceClass(bus, serviceClass)\n    const { toggleShowDeviceHostsDialog } = useContext(SimulatorDialogsContext)\n    const handleShowStartSimulator = () => toggleShowDeviceHostsDialog()\n    return (\n        <>\n            Simulate\n            <IconButtonWithTooltip\n                trackName=\"simulator.hint.button\"\n                onClick={handleStartSimulator(SRV_BUTTON)}\n                title=\"button\"\n                aria-label=\"start button simulator\"\n            >\n                <RadioButtonCheckedIcon />\n            </IconButtonWithTooltip>\n            <IconButtonWithTooltip\n                trackName=\"simulator.hint.humidity\"\n                onClick={handleStartSimulator(SRV_HUMIDITY)}\n                title=\"humidity\"\n                aria-label=\"start humidity sensor\"\n            >\n                <WaterIcon />\n            </IconButtonWithTooltip>\n            <IconButtonWithTooltip\n                trackName=\"simulator.hint.thermometer\"\n                onClick={handleStartSimulator(SRV_TEMPERATURE)}\n                title=\"thermometer\"\n                aria-label=\"start thermometer\"\n            >\n                <DeviceThermostatIcon />\n            </IconButtonWithTooltip>\n            <IconButtonWithTooltip\n                trackName=\"simulator.hint.soilmoisture\"\n                onClick={handleStartSimulator(SRV_SOIL_MOISTURE)}\n                title=\"soil moisture\"\n                aria-label=\"start soil moisture simulator\"\n            >\n                <GrassIcon />\n            </IconButtonWithTooltip>\n            <IconButtonWithTooltip\n                trackName=\"simulator.hint.buzzer\"\n                onClick={handleStartSimulator(SRV_BUZZER)}\n                title=\"buzzer\"\n                aria-label=\"start buzzer simulator\"\n            >\n                <MusicNoteIcon />\n            </IconButtonWithTooltip>\n            <IconButtonWithTooltip\n                trackName=\"simulator.hint.potentiometer\"\n                onClick={handleStartSimulator(SRV_POTENTIOMETER)}\n                title=\"slider\"\n                aria-label=\"start slider simulator\"\n            >\n                <LinearScaleIcon />\n            </IconButtonWithTooltip>\n            <IconButtonWithTooltip\n                trackName=\"simulator.hint.led\"\n                onClick={handleStartSimulator(SRV_LED)}\n                title=\"LED\"\n                aria-label=\"start LED simulator\"\n            >\n                <TungstenIcon />\n            </IconButtonWithTooltip>\n            or click &nbsp;\n            <IconButtonWithTooltip\n                trackName=\"simulator.hint.start\"\n                title=\"start simulator\"\n                onClick={handleShowStartSimulator}\n            >\n                <AddIcon />\n            </IconButtonWithTooltip>\n            .\n        </>\n    )\n}\n\nexport default function SimulateDeviceAlert() {\n    return (\n        <Alert severity=\"info\">\n            <SimulateDeviceHint />\n        </Alert>\n    )\n}\n","import React from \"react\"\nimport IconButtonWithTooltip from \"../ui/IconButtonWithTooltip\"\nimport AddIcon from \"@mui/icons-material/Add\"\nimport { useContext } from \"react\"\nimport SimulatorDialogsContext from \"../SimulatorsDialogContext\"\nimport { Chip } from \"@mui/material\"\n\nexport default function StartSimulatorButton(props: {\n    trackName?: string\n    useChip?: boolean\n}) {\n    const { trackName, useChip } = props\n    const { toggleShowDeviceHostsDialog } = useContext(SimulatorDialogsContext)\n    const handleShowStartSimulator = () =>\n        toggleShowDeviceHostsDialog({ trackName })\n\n    if (useChip)\n        return (\n            <Chip\n                label=\"simulator\"\n                title=\"start simulator\"\n                variant=\"outlined\"\n                icon={<AddIcon />}\n                onClick={handleShowStartSimulator}\n            />\n        )\n    else\n        return (\n            <IconButtonWithTooltip\n                title=\"start simulator\"\n                trackName={trackName}\n                onClick={handleShowStartSimulator}\n            >\n                <AddIcon />\n            </IconButtonWithTooltip>\n        )\n}\n","import { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport { isReading, isValueOrIntensity } from \"../../../jacdac-ts/src/jdom/spec\"\nimport { strcmp } from \"../../../jacdac-ts/src/jdom/utils\"\n\nexport function defaultDeviceSort(l: JDDevice, r: JDDevice): number {\n    const srvScore = (srv: jdspec.ServiceSpec) =>\n        srv.packets.reduce(\n            (prev, pkt) =>\n                prev + (isReading(pkt) ? 10 : isValueOrIntensity(pkt) ? 1 : 0),\n            0\n        ) || 0\n    const score = (srvs: jdspec.ServiceSpec[]) =>\n        srvs.reduce((prev, srv) => srvScore(srv), 0)\n\n    const ls = score(\n        l\n            .services()\n            .slice(1)\n            .map(srv => srv.specification)\n            .filter(spec => !!spec)\n    )\n    const rs = score(\n        r\n            .services()\n            .slice(1)\n            .map(srv => srv.specification)\n            .filter(spec => !!spec)\n    )\n    if (ls !== rs) return -ls + rs\n    return strcmp(l.deviceId, r.deviceId)\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function defaultDeviceFilter(d: JDDevice): boolean {\n    return true\n}\n","import { useEffect } from \"react\"\nimport useBus from \"./useBus\"\n\n/**\n * Grabs the Jacdac singleton bus from the current Jacdac context and configures it.\n * Throws an error if bus is missing.\n */\nexport default function useBusWithMode(options: {\n    passive?: boolean\n    streaming?: boolean\n    autoConnect?: boolean\n}) {\n    const { autoConnect, passive, streaming } = options\n    const bus = useBus()\n\n    // enable auto-connect if needed\n    useEffect(() => {\n        const unsubs: (() => void)[] = []\n        if (streaming) {\n            bus.streaming = true\n            unsubs.push(() => {\n                bus.streaming = false\n            })\n        }\n        if (passive) {\n            bus.passive = true\n            unsubs.push(() => {\n                bus.passive = false\n            })\n        }\n        if (autoConnect) {\n            bus.autoConnect = true\n            unsubs.push(() => {\n                bus.autoConnect = false\n            })\n        }\n        return () => unsubs.forEach(unsub => unsub())\n    }, [autoConnect, passive, streaming])\n    return bus\n}\n","import {\n    PowerPowerStatus,\n    PowerReg,\n    SRV_POWER,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport React from \"react\"\nimport DeviceAvatar from \"./DeviceAvatar\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport { Chip } from \"@mui/material\"\nimport useRegister from \"../hooks/useRegister\"\nimport {\n    useRegisterBoolValue,\n    useRegisterUnpackedValue,\n} from \"../../jacdac/useRegisterValue\"\nimport { humanify } from \"../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\n\nfunction ServicePowerChip(props: { service: JDService }) {\n    const { service } = props\n    const allowedRegister = useRegister(service, PowerReg.Allowed)\n    const powerStatusRegister = useRegister(service, PowerReg.PowerStatus)\n    const allowed = useRegisterBoolValue(allowedRegister, { visible: true })\n    const [powerStatus] = useRegisterUnpackedValue<[PowerPowerStatus]>(\n        powerStatusRegister,\n        { visible: true }\n    )\n    const deviceName = service.device.shortId\n\n    if (allowed === undefined || powerStatus === undefined) return null\n\n    const off = !allowed\n    const on = !off && powerStatus === PowerPowerStatus.Powering\n    const status = off\n        ? \"off\"\n        : on\n        ? \"on\"\n        : humanify(PowerPowerStatus[powerStatus])?.toLowerCase()\n    return (\n        <Chip\n            sx={{ mr: 0.5 }}\n            label={status}\n            variant={\"outlined\"}\n            title={`${deviceName}: power '${status}'`}\n            avatar={<DeviceAvatar device={service.device} />}\n        />\n    )\n}\n\nexport default function DevicePowerChips(props: { devices: JDDevice[] }) {\n    const { devices } = props\n    const powers = devices.flatMap(dev =>\n        dev.services({ serviceClass: SRV_POWER })\n    )\n\n    if (!powers?.length) return null\n\n    return (\n        <>\n            {powers.map(service => (\n                <ServicePowerChip key={service.id} service={service} />\n            ))}\n        </>\n    )\n}\n","import { Grid } from \"@mui/material\"\nimport React, { useContext } from \"react\"\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport { splitFilter } from \"../../../jacdac-ts/src/jdom/utils\"\nimport useDevices from \"../hooks/useDevices\"\nimport IconButtonWithTooltip from \"../ui/IconButtonWithTooltip\"\nimport DashboardDeviceGroup from \"./DashboardDeviceGroup\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport ClearIcon from \"@mui/icons-material/Clear\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport ConnectAlert from \"../alert/ConnectAlert\"\nimport ConnectButtons from \"../buttons/ConnectButtons\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport SimulateDeviceAlert from \"../alert/SimulateDeviceAlert\"\nimport { Flags } from \"../../../jacdac-ts/src/jdom/flags\"\nimport StartSimulatorButton from \"../buttons/StartSimulatorButton\"\nimport { defaultDeviceFilter, defaultDeviceSort } from \"./filters\"\nimport useHostedSimulators from \"../HostedSimulatorsContext\"\nimport StartMissingSimulatorsButton from \"../buttons/StartMissingSimulatorsButton\"\nimport useBusWithMode from \"../../jacdac/useBusWithMode\"\nimport PacketsContext from \"../PacketsContext\"\nimport DevicePowerChips from \"../devices/DevicePowerChips\"\n\nexport interface DashboardDeviceProps {\n    showHeader?: boolean\n    showAvatar?: boolean\n    showReset?: boolean\n    showDeviceProxyAlert?: boolean\n    controlled?: boolean\n    serviceFilter?: (srv: JDService) => boolean\n    variant?: \"icon\" | \"\"\n    alwaysVisible?: boolean\n}\nexport interface DashboardProps extends DashboardDeviceProps {\n    hideSimulators?: boolean\n    showSimulatorHeader?: boolean\n    showSimulatorAvatar?: boolean\n    showDeviceHeader?: boolean\n    showDeviceAvatar?: boolean\n    showStartSimulators?: boolean\n    showStartRoleSimulators?: boolean\n    showConnect?: boolean\n    deviceFilter?: (d: JDDevice) => boolean\n    deviceSort?: (l: JDDevice, r: JDDevice) => number\n}\n\nexport default function Dashboard(props: DashboardProps) {\n    const {\n        hideSimulators,\n        showConnect,\n        showStartSimulators,\n        showStartRoleSimulators,\n        showHeader,\n        showAvatar,\n        showSimulatorHeader,\n        showSimulatorAvatar,\n        showDeviceHeader,\n        showDeviceAvatar,\n        deviceSort = defaultDeviceSort,\n        deviceFilter = defaultDeviceFilter,\n        ...other\n    } = props\n    const { tracing } = useContext(PacketsContext)\n    const bus = useBusWithMode({ autoConnect: !tracing })\n    const { isHostedSimulator, clearHostedSimulators } = useHostedSimulators()\n    const devices = useDevices({\n        announced: true,\n        ignoreInfrastructure: !Flags.diagnostics,\n    })\n        .filter(deviceFilter)\n        .sort(deviceSort)\n    const [simulators, physicals] = splitFilter(\n        devices,\n        d =>\n            !!bus.findServiceProvider(d.deviceId) ||\n            isHostedSimulator(d.deviceId)\n    )\n    const handleClearSimulators = () => {\n        clearHostedSimulators()\n        bus.clearServiceProviders()\n    }\n\n    return (\n        <>\n            {!hideSimulators && (\n                <DashboardDeviceGroup\n                    title=\"Simulators\"\n                    action={\n                        <>\n                            {showStartRoleSimulators && (\n                                <StartMissingSimulatorsButton\n                                    trackName=\"dashboard.simulators.missing\"\n                                    disabledChildren={null}\n                                >\n                                    Auto start\n                                </StartMissingSimulatorsButton>\n                            )}\n                            <StartSimulatorButton trackName=\"dashboard.simulators.start\" />\n                            <IconButtonWithTooltip\n                                trackName=\"dashboard.simulators.clear\"\n                                title=\"clear simulators\"\n                                onClick={handleClearSimulators}\n                            >\n                                <ClearIcon />\n                            </IconButtonWithTooltip>{\" \"}\n                            <DevicePowerChips devices={simulators} />\n                        </>\n                    }\n                    devices={simulators}\n                    showHeader={showHeader || showSimulatorHeader}\n                    showAvatar={showAvatar || showSimulatorAvatar}\n                    {...other}\n                >\n                    {showStartSimulators && !simulators?.length && (\n                        <Grid item xs={12}>\n                            <SimulateDeviceAlert />\n                        </Grid>\n                    )}\n                </DashboardDeviceGroup>\n            )}\n            <DashboardDeviceGroup\n                title=\"Devices\"\n                action={\n                    <>\n                        {showConnect && (\n                            <ConnectButtons\n                                full={\"disconnected\"}\n                                transparent={true}\n                            />\n                        )}\n                        <DevicePowerChips devices={physicals} />\n                    </>\n                }\n                devices={physicals}\n                showHeader={showHeader || showDeviceHeader}\n                showAvatar={showAvatar || showDeviceAvatar}\n                {...other}\n            >\n                {showConnect && !physicals.length && (\n                    <Grid item xs={12}>\n                        <ConnectAlert closeable={true} />\n                    </Grid>\n                )}\n            </DashboardDeviceGroup>\n        </>\n    )\n}\n","import React, { useEffect } from \"react\"\nimport { humanify } from \"../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\nimport { JDRegister } from \"../../../jacdac-ts/src/jdom/register\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport IconButtonWithProgress from \"../ui/IconButtonWithProgress\"\n\nexport default function DashboardRegisterValueFallback(props: {\n    register: JDRegister\n}) {\n    const { register } = props\n    const service = register.service\n    const server = useServiceServer(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const handleRefresh = () => register?.sendGetAsync()\n    const registerName = humanify(register.name)\n\n    // try forcing a refresh\n    useEffect(() => { register?.sendGetAsync() }, [register])\n\n    return (\n        <IconButtonWithProgress\n            color={color}\n            title={`refresh ${registerName}`}\n            indeterminate={true}\n            onClick={handleRefresh}\n        />\n    )\n}\n","import React from \"react\"\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport FingerprintIcon from \"@mui/icons-material/Fingerprint\"\nimport CmdButton from \"../CmdButton\"\nimport useServiceProvider from \"../hooks/useServiceProvider\"\nimport CloseIcon from \"@mui/icons-material/Close\"\nimport SettingsIcon from \"@mui/icons-material/Settings\"\nimport {\n    SRV_SETTINGS,\n    SRV_UNIQUE_BRAIN,\n} from \"../../../jacdac-ts/jacdac-spec/dist/specconstants\"\nimport useChange from \"../../jacdac/useChange\"\nimport { navigate } from \"gatsby-link\"\nimport CableIcon from \"@mui/icons-material/Cable\"\nimport DeviceResetButton from \"./DeviceResetButton\"\nimport useHostedSimulators from \"../HostedSimulatorsContext\"\nimport useBus from \"../../jacdac/useBus\"\nexport default function DeviceActions(props: {\n    device: JDDevice\n    showSettings?: boolean\n    showReset?: boolean\n    showStop?: boolean\n    showProxy?: boolean\n    hideIdentity?: boolean\n    children?: JSX.Element | JSX.Element[]\n}) {\n    const {\n        device,\n        showSettings,\n        showReset,\n        children,\n        hideIdentity,\n        showStop,\n        showProxy,\n    } = props\n    const bus = useBus()\n    const { removeHostedSimulator, isHostedSimulator } = useHostedSimulators()\n    const { deviceId } = device\n    const provider = useServiceProvider(device)\n    const settings = useChange(\n        device,\n        _ => _.services({ serviceClass: SRV_SETTINGS })?.[0]\n    )\n    const _showProxy = useChange(\n        device,\n        _ => showProxy && _.hasService(SRV_UNIQUE_BRAIN)\n    )\n\n    const handleIdentify = async () => await device.identify()\n    const handleProxy = async () => await device.startProxy()\n    const handleStop = async () => {\n        removeHostedSimulator(deviceId)\n        bus.removeServiceProvider(provider)\n        bus.removeDevice(deviceId)\n    }\n    const handleSettings = async () => {\n        navigate(\"/tools/settings\")\n    }\n    return (\n        <>\n            {children}\n            {showStop && (provider || isHostedSimulator(deviceId)) && (\n                <CmdButton\n                    trackName=\"device.stop\"\n                    size=\"small\"\n                    title=\"stop simulator\"\n                    onClick={handleStop}\n                    icon={<CloseIcon />}\n                />\n            )}\n            {!hideIdentity && (\n                <CmdButton\n                    trackName=\"device.identify\"\n                    size=\"small\"\n                    title=\"identify\"\n                    onClick={handleIdentify}\n                    icon={<FingerprintIcon />}\n                />\n            )}\n            {showSettings && !!settings && (\n                <CmdButton\n                    trackName=\"device.settings\"\n                    size=\"small\"\n                    title=\"settings\"\n                    onClick={handleSettings}\n                    icon={<SettingsIcon />}\n                />\n            )}\n            {_showProxy && (\n                <CmdButton\n                    trackName=\"device.proxy\"\n                    size=\"small\"\n                    title=\"enter dongle mode\"\n                    onClick={handleProxy}\n                    icon={<CableIcon />}\n                />\n            )}\n            {showReset && <DeviceResetButton device={device} />}\n        </>\n    )\n}\n","import { Dialog, DialogContent, Grid, Typography } from \"@mui/material\"\nimport { Link } from \"gatsby-theme-material-ui\"\nimport React, { lazy, useCallback } from \"react\"\nimport { identifierToUrlPath } from \"../../../jacdac-ts/src/jdom/catalog\"\nimport { ControlAnnounceFlags } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport useDeviceDescription from \"../../jacdac/useDeviceDescription\"\nimport useDeviceSpecification from \"../../jacdac/useDeviceSpecification\"\nimport DeviceName from \"../devices/DeviceName\"\nimport useInterval from \"../hooks/useInterval\"\nimport Alert from \"../ui/Alert\"\nimport DialogTitleWithClose from \"../ui/DialogTitleWithClose\"\nimport Suspense from \"../ui/Suspense\"\nconst LazyDeviceImage = lazy(() => import(\"../devices/LazyDeviceImage\"))\n\nexport default function IdentifyDialog(props: {\n    device: JDDevice\n    open: boolean\n    onClose: () => void\n}) {\n    const { device, open, onClose } = props\n    const description = useDeviceDescription(device)\n    const handleSendIdentify = useCallback(\n        async () => await device.identify(),\n        [device]\n    )\n    const handleCloseIdentify = () => onClose()\n    const { statusLightFlags } = device\n    const blue =\n        statusLightFlags === ControlAnnounceFlags.StatusLightRgbFade ||\n        statusLightFlags === ControlAnnounceFlags.StatusLightRgbNoFade\n    useInterval(open, handleSendIdentify, 5000, [device])\n    const specification = useDeviceSpecification(device)\n\n    return (\n        <Dialog open={open} onClose={handleCloseIdentify}>\n            <DialogTitleWithClose onClose={handleCloseIdentify}>\n                Identifying{\" \"}\n                <DeviceName device={device} onLinkClick={handleCloseIdentify} />\n                ...\n            </DialogTitleWithClose>\n            <DialogContent>\n                <Grid container alignItems=\"center\" alignContent={\"center\"}>\n                    {specification && (\n                        <Grid item xs={12}>\n                            <Link\n                                color=\"textPrimary\"\n                                to={`/devices/${identifierToUrlPath(\n                                    specification.id\n                                )}/`}\n                                underline=\"hover\"\n                            >\n                                <Typography variant=\"subtitle1\">\n                                    {[\n                                        specification.company,\n                                        description || specification.name,\n                                        specification?.version\n                                            ? `v${specification.version}`\n                                            : undefined,\n                                    ]\n                                        .filter(s => !!s)\n                                        .join(\" \")}\n                                </Typography>\n                            </Link>\n                        </Grid>\n                    )}\n                    <Grid item xs={12}>\n                        <Suspense>\n                            <LazyDeviceImage device={device} />\n                        </Suspense>\n                    </Grid>\n                    <Grid item xs>\n                        <Alert severity=\"info\">\n                            Look for four blinks in around 2 seconds with the\n                            {blue ? \" blue\" : \" \"} LED.\n                        </Alert>\n                    </Grid>\n                </Grid>\n            </DialogContent>\n        </Dialog>\n    )\n}\n","import React, { CSSProperties, useState } from \"react\"\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport CmdButton from \"../CmdButton\"\nimport useServiceProvider from \"../hooks/useServiceProvider\"\nimport useDeviceName from \"./useDeviceName\"\nimport { rgbaToHtmlColor } from \"../../../jacdac-ts/src/jdom/utils\"\nimport useChange from \"../../jacdac/useChange\"\nimport IdentifyDialog from \"../dialogs/IdentifyDialog\"\nimport { JDServerServiceProvider } from \"../../../jacdac-ts/src/jdom/servers/serverserviceprovider\"\nimport DeviceIcon from \"./DeviceIcon\"\n\nexport default function DeviceAvatar(props: {\n    device: JDDevice\n    size?: \"small\" | \"large\"\n    center?: boolean\n}) {\n    const { device, size, center } = props\n    const [identifyDialog, setIdentifyDialog] = useState(false)\n    const name = useDeviceName(device)\n    const server = useServiceProvider<JDServerServiceProvider>(device)\n    const statusLight = useChange(device, _ => _?.statusLight)\n    const color = useChange(statusLight, _ => _?.color)\n    const style: CSSProperties = color\n        ? {\n              outlineColor: rgbaToHtmlColor(color, 0.4),\n              outlineStyle: \"solid\",\n              outlineWidth: \"3px\",\n          }\n        : undefined\n    const handleOpenIdentify = async () => setIdentifyDialog(true)\n    const handleCloseIdentify = () => setIdentifyDialog(false)\n    return (\n        <>\n            <CmdButton\n                trackName=\"device.identify\"\n                style={style}\n                size=\"small\"\n                title={`identify ${server ? \"simulator\" : \"device\"} ${name}`}\n                onClick={handleOpenIdentify}\n                icon={\n                    <DeviceIcon\n                        device={device}\n                        size={size}\n                        avatar={center !== false}\n                    />\n                }\n            />\n            {identifyDialog && (\n                <IdentifyDialog\n                    device={device}\n                    open={identifyDialog}\n                    onClose={handleCloseIdentify}\n                />\n            )}\n        </>\n    )\n}\n","import { Typography } from \"@mui/material\"\nimport { Link } from \"gatsby-material-ui-components\"\nimport React from \"react\"\nimport { identifierToUrlPath } from \"../../../jacdac-ts/src/jdom/catalog\"\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport useDeviceSpecification from \"../../jacdac/useDeviceSpecification\"\nimport useDeviceName from \"./useDeviceName\"\n\nexport default function DeviceName(props: {\n    device: JDDevice\n    serviceIndex?: number\n    expanded?: boolean\n    showShortId?: boolean\n    linkToSpecification?: boolean\n    onLinkClick?: () => void\n}) {\n    const {\n        device,\n        serviceIndex,\n        showShortId,\n        linkToSpecification,\n        onLinkClick,\n    } = props\n    const specification = useDeviceSpecification(device)\n    const name = useDeviceName(device) || \"\"\n    const { shortId } = device\n    const Name = () => (\n        <>\n            <span>{name}</span>\n            {!name && showShortId && shortId}\n            {showShortId && name && name !== shortId && (\n                <Typography component=\"span\" variant=\"body2\" spellCheck={false}>\n                    {\" \"}\n                    {shortId}\n                </Typography>\n            )}\n            {serviceIndex !== undefined && `[${serviceIndex}]`}\n        </>\n    )\n    if (linkToSpecification && specification)\n        return (\n            <Link\n                onClick={onLinkClick}\n                color=\"textPrimary\"\n                to={`/devices/${identifierToUrlPath(specification.id)}/`}\n                underline=\"hover\"\n            >\n                <Name />\n            </Link>\n        )\n    else return <Name />\n}\n","import { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport React from \"react\"\nimport CmdButton from \"../CmdButton\"\nimport RestartAltIcon from \"@mui/icons-material/RestartAlt\"\n\nexport default function DeviceResetButton(props: {\n    device: JDDevice\n    showLabel?: boolean\n}) {\n    const { device, showLabel } = props\n    const handleReset = async () => await device.reset()\n    return (\n        <CmdButton\n            disabled={!device}\n            trackName=\"device.reset\"\n            size=\"small\"\n            title=\"reset\"\n            onClick={handleReset}\n            icon={<RestartAltIcon />}\n        >\n            {showLabel ? \"Reset\" : null}\n        </CmdButton>\n    )\n}\n","import { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\n\nexport default function useDeviceName(\n    device: JDDevice,\n    includeShortId?: boolean\n) {\n    const name = device.friendlyName\n    let r = name\n    if (includeShortId && name && name !== device.shortId)\n        r += ` (${device.shortId})`\n    return r\n}\n","import { DependencyList, useEffect, useRef } from \"react\"\n\nexport default function useAnimationFrame(\n    callback: (time: number) => boolean,\n    deps?: DependencyList\n) {\n    const requestRef = useRef<number>()\n    const previousTimeRef = useRef<number>()\n\n    const animate = (time: number) => {\n        let active = true\n        if (previousTimeRef.current != undefined) {\n            const deltaTime = time - previousTimeRef.current\n            active = callback(deltaTime)\n        }\n        previousTimeRef.current = time\n        if (active) requestRef.current = requestAnimationFrame(animate)\n        // we're done\n        else requestRef.current = undefined\n    }\n\n    useEffect(() => {\n        if (callback) {\n            previousTimeRef.current = undefined\n            requestRef.current = requestAnimationFrame(animate)\n        }\n        return () =>\n            requestRef.current !== undefined &&\n            cancelAnimationFrame(requestRef.current)\n    }, deps || [])\n}\n","import { useMemo } from \"react\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\n\nexport default function useEvent(service: JDService, identifier: number) {\n    return useMemo(() => service?.event(identifier), [service, identifier])\n}\n","import { DependencyList, useEffect } from \"react\"\n\nexport default function useInterval(\n    enabled: boolean,\n    handler: () => void,\n    delay: number,\n    deps?: DependencyList\n) {\n    useEffect(() => {\n        if (enabled && delay > 0) {\n            const id = setInterval(handler, delay)\n            handler()\n            return () => clearInterval(id)\n        }\n    }, [enabled, handler, delay, ...(deps || [])])\n}\n","import { DependencyList, useMemo } from \"react\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport { JDServiceServer } from \"../../../jacdac-ts/src/jdom/servers/serviceserver\"\nimport useServiceProvider from \"./useServiceProvider\"\n\nexport default function useServiceServer<T extends JDServiceServer>(\n    service: JDService,\n    createTwin?: () => T,\n    deps?: DependencyList\n) {\n    const device = service?.device\n    const provider = useServiceProvider(device)\n    const twin = useMemo<T>(() => {\n        if (provider) return undefined\n        let twin = service?.twin as T\n        if (!twin && service && createTwin) {\n            twin = createTwin()\n            if (twin) service.twin = twin\n        }\n        return twin\n    }, [device, provider, service?.changeId, ...(deps || [])])\n    return (provider?.service(service?.serviceIndex) as T) || twin\n}\n","import { SVGProps } from \"react\"\nimport useFireKey from \"./useFireKey\"\n\nexport default function useSvgButtonProps<T extends SVGElement>(\n    label: string,\n    onDown?: (event: React.PointerEvent<T>) => void,\n    onUp?: (event: React.PointerEvent<T>) => void\n): SVGProps<T> {\n    const disabled = !onDown && !onUp\n    const fireDownOnEnter = useFireKey(onDown)\n    const fireUpOnEnter = useFireKey(onUp)\n\n    const preventify = (handler: (event: React.PointerEvent<T>) => void) => {\n        if (handler)\n            return (event: React.PointerEvent<T>) => {\n                event.preventDefault()\n                handler(event)\n            }\n        else return undefined\n    }\n\n    return {\n        className: disabled ? undefined : \"clickeable\",\n        role: disabled ? undefined : \"button\",\n        tabIndex: disabled ? undefined : 0,\n        [\"aria-label\"]: label,\n        onPointerDown: preventify(onDown),\n        onPointerUp: preventify(onUp),\n        onPointerLeave: preventify(onUp),\n        onKeyDown: fireDownOnEnter,\n        onKeyUp: fireUpOnEnter,\n    }\n}\n","import { useState } from \"react\"\nimport useAnimationFrame from \"./useAnimationFrame\"\n\nexport default function useThrottledValue(\n    value: number,\n    maxRate: number,\n    maxCycles = 2\n) {\n    const [actual, setActual] = useState<number>(value)\n\n    let animated = actual\n    useAnimationFrame(\n        time => {\n            // no valid rate\n            if (isNaN(maxRate) || isNaN(animated)) {\n                setActual(value)\n                return false\n            }\n\n            // not a value yet\n            if (isNaN(value)) {\n                return false\n            }\n\n            // increment towards value\n            const dt = time / 1000 // s\n            const error = value - animated\n            const maxError = maxRate * dt // deg\n            let active = true\n            animated += Math.sign(error) * Math.min(Math.abs(error), maxError)\n            // close to goal, finish animation\n            if (Math.abs(value - animated) / maxRate < 0.01) {\n                animated = value\n                active = false\n            }\n            // very far from goal, get closer immediately\n            if (!isNaN(maxCycles)) {\n                const maxErrorRange = maxRate * maxCycles\n                animated = Math.max(\n                    value - maxErrorRange,\n                    Math.min(value + maxErrorRange, animated)\n                )\n            }\n            // store and update ui\n            setActual(animated)\n            return active\n        },\n        [value, maxRate, maxCycles]\n    )\n\n    return actual\n}\n","import { SystemReg } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport {\n    RegisterOptions,\n    useRegisterUnpackedValue,\n} from \"../../jacdac/useRegisterValue\"\nimport useRegister from \"../hooks/useRegister\"\n\nexport default function useInstanceName(\n    service: JDService,\n    options?: RegisterOptions\n) {\n    const instanceNameRegister = useRegister(service, SystemReg.InstanceName)\n    const [instanceName] = useRegisterUnpackedValue<[string]>(\n        instanceNameRegister,\n        options\n    )\n    return instanceName\n}\n","import { useEffect, useState } from \"react\"\nimport { ROLE_MANAGER_CHANGE } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { RoleManagerClient } from \"../../../jacdac-ts/src/jdom/clients/rolemanagerclient\"\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport useBus from \"../../jacdac/useBus\"\n\nexport default function useRoleManagerClient(): RoleManagerClient {\n    const bus = useBus()\n    const [mgr, setMgr] = useState<RoleManagerClient>(bus.roleManager)\n    useEffect(\n        () => bus.subscribe(ROLE_MANAGER_CHANGE, () => setMgr(bus.roleManager)),\n        [bus]\n    )\n    return mgr\n}\n","import { SystemReg } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport {\n    RegisterOptions,\n    useRegisterUnpackedValue,\n} from \"../../jacdac/useRegisterValue\"\nimport useRegister from \"../hooks/useRegister\"\n\nexport default function useStatusCode(\n    service: JDService,\n    options?: RegisterOptions\n) {\n    const register = useRegister(service, SystemReg.StatusCode)\n    const [code = 0, vendorCode = 0] = useRegisterUnpackedValue<[number, number]>(\n        register,\n        options\n    )\n    return { code, vendorCode }\n}\n","import { CircularProgress } from \"@mui/material\"\nimport React from \"react\"\n\nexport default function LoadingProgress(props: { size?: string }) {\n    const { size } = props\n    return (\n        <CircularProgress\n            disableShrink\n            variant=\"indeterminate\"\n            size={size || \"1em\"}\n            aria-label=\"loading\"\n        />\n    )\n}\n","import React from \"react\"\nimport SvgWidget from \"./SvgWidget\"\nimport useWidgetTheme from \"./useWidgetTheme\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\"\n\nexport default function ButtonWidget(props: {\n    checked?: boolean\n    label?: string\n    color?: \"primary\" | \"secondary\"\n    size?: string\n    onDown?: () => void\n    onUp?: () => void\n}) {\n    const { checked, label, color, size, onDown, onUp } = props\n    const { background, controlBackground, active } = useWidgetTheme(color)\n\n    const buttonProps = useSvgButtonProps<SVGCircleElement>(label, onDown, onUp)\n    const w = 64\n    const mo = checked ? 3 : 5\n    const r = w / 2\n    const cx = r\n    const cy = r\n    const ri = r - mo\n    const rn = 8\n    return (\n        <SvgWidget width={w} size={size}>\n            <rect\n                x={0}\n                y={0}\n                rx={2}\n                ry={2}\n                width={w}\n                height={w}\n                fill={background}\n            />\n            <circle cx={rn} cy={rn} r={rn >> 1} fill={controlBackground} />\n            <circle cx={w - rn} cy={rn} r={rn >> 1} fill={controlBackground} />\n            <circle\n                cx={w - rn}\n                cy={w - rn}\n                r={rn >> 1}\n                fill={controlBackground}\n            />\n            <circle cx={rn} cy={w - rn} r={rn >> 1} fill={controlBackground} />\n            <circle\n                cx={cx}\n                cy={cy}\n                r={ri}\n                fill={checked ? active : controlBackground}\n                {...buttonProps}\n            />\n        </SvgWidget>\n    )\n}\n","import { Grid, IconButton, useTheme } from \"@mui/material\"\nimport React, { ReactNode } from \"react\"\nimport { rgbToHtmlColor } from \"../../../jacdac-ts/src/jdom/utils\"\nimport CircleIcon from \"@mui/icons-material/Circle\"\n\nexport const DEFAULT_COLORS = [\n    {\n        name: \"red\",\n        value: 0xff0000,\n    },\n    { name: \"blue\", value: 0x0000ff },\n    { name: \"green\", value: 0x00ff00 },\n    { name: \"black\", value: 0x010101 },\n]\n\nexport default function ColorButtons(props: {\n    children?: ReactNode\n    colors?: { name: string; value: number }[]\n    color: number\n    onColorChange?: (newLedColor: number) => void\n}) {\n    const theme = useTheme()\n\n    const { children, colors = DEFAULT_COLORS, color, onColorChange } = props\n    const handleSetColor = (col: number) => () => onColorChange(col)\n    return (\n        <Grid container spacing={1}>\n            {colors.map(({ name, value }) => {\n                const selected = value === color\n                const c = rgbToHtmlColor(value)\n                const title = value === color ? `${name} (selected)` : name\n                return (\n                    <Grid key={name} item xs>\n                        <IconButton\n                            style={{ color: c }}\n                            onClick={handleSetColor(value)}\n                            aria-label={title}\n                            title={title}\n                            sx={{\n                                backgroundColor: selected\n                                    ? c\n                                    : theme.palette.grey[300],\n                            }}\n                        >\n                            <CircleIcon />\n                        </IconButton>\n                    </Grid>\n                )\n            })}\n            {children}\n        </Grid>\n    )\n}\n","import React, { CSSProperties, SVGAttributes, useRef } from \"react\"\nimport useWidgetTheme from \"./useWidgetTheme\"\nimport SvgWidget from \"./SvgWidget\"\nimport { closestPoint, describeArc, svgPointerPoint } from \"./svgutils\"\nimport PowerButton from \"./PowerButton\"\nimport { Grid, Slider } from \"@mui/material\"\n\nexport default function GaugeWidget(props: {\n    value: number\n    min: number\n    max: number\n    step?: number\n    label?: string\n    color?: \"primary\" | \"secondary\"\n    size?: string\n    variant?: \"fountain\"\n    tabIndex?: number\n    valueLabel?: (v: number) => string\n    onChange?: (newValue: number) => void\n    off?: boolean\n    toggleOff?: () => void\n}) {\n    const {\n        value,\n        color,\n        size,\n        min,\n        max,\n        step,\n        variant,\n        valueLabel,\n        off,\n        toggleOff,\n        onChange,\n        tabIndex,\n        label,\n    } = props\n    const { active, textProps, controlBackground } =\n        useWidgetTheme(color)\n\n    const sliderPathRef = useRef<SVGPathElement>()\n    const w = 120\n    const h = 120\n    const m = 8\n    const roff = 20\n    const riff = 10\n    const sw = m << 1\n    const cx = w >> 1\n    const cy = h >> 1\n    const r = (w >> 1) - m\n    const sa = -135\n    const ea = 135\n    const _step = step || (max - min) / 10\n    const displayValue = value //useThrottledValue(value, (max - min) * 10)\n\n    const computeArc = (v: number) => {\n        if (variant === \"fountain\") {\n            const mid = (ea + sa) / 2\n            const fraction = (v / (max - min)) * (ea - sa)\n            if (fraction < 0) return describeArc(cx, cy, r, mid + fraction, mid)\n            else return describeArc(cx, cy, r, mid, mid + fraction)\n        } else {\n            const fraction = (v - min) / (max - min)\n            const va = sa + fraction * (ea - sa)\n            return describeArc(cx, cy, r, sa, va)\n        }\n    }\n\n    const db = describeArc(cx, cy, r, sa, ea)\n    const dvalue = computeArc(value)\n    const dactual = computeArc(displayValue)\n    const lineCap = \"round\"\n    const tvalue =\n        valueLabel !== undefined\n            ? valueLabel(value)\n            : value === undefined\n            ? \"\"\n            : value + \"\"\n    const clickeable = !!onChange\n\n    const handlePointerDown = (ev: React.PointerEvent<SVGPathElement>) => {\n        ev.preventDefault()\n        if (!ev.buttons) return\n        const svg = sliderPathRef.current.ownerSVGElement\n        const pos = svgPointerPoint(svg, ev)\n        const closest = closestPoint(sliderPathRef.current, _step, pos)\n        onChange(min + (1 - closest) * (max - min))\n    }\n    const pointerStyle: CSSProperties = clickeable && {\n        cursor: \"pointer\",\n    }\n    const pathProps: SVGAttributes<SVGPathElement> = {\n        onPointerDown: clickeable ? handlePointerDown : undefined,\n        onPointerMove: clickeable ? handlePointerDown : undefined,\n        style: clickeable ? pointerStyle : undefined,\n    }\n    const handleSliderChange = (ev: unknown, newValue: number | number[]) =>\n        onChange(newValue as number)\n\n    return (\n        <Grid container direction=\"column\">\n            <Grid item>\n                <SvgWidget tabIndex={tabIndex} width={w} height={h} size={size}>\n                    <path\n                        ref={sliderPathRef}\n                        strokeWidth={sw}\n                        stroke={controlBackground}\n                        d={db}\n                        strokeLinecap={lineCap}\n                        fill=\"transparent\"\n                        {...pathProps}\n                    />\n                    {!off && (\n                        <path\n                            strokeWidth={sw}\n                            stroke={active}\n                            strokeLinecap={lineCap}\n                            d={dvalue}\n                            opacity={0.2}\n                            fill=\"transparent\"\n                            {...pathProps}\n                        />\n                    )}\n                    {!off && (\n                        <path\n                            strokeWidth={sw}\n                            stroke={active}\n                            strokeLinecap={lineCap}\n                            d={dactual}\n                            fill=\"transparent\"\n                            {...pathProps}\n                        />\n                    )}\n                    {off !== undefined ? (\n                        <PowerButton\n                            off={off}\n                            label={tvalue}\n                            cx={cx}\n                            cy={cy}\n                            r={roff}\n                            ri={riff}\n                            color={color}\n                            onClick={toggleOff}\n                        />\n                    ) : (\n                        <text {...textProps} x={cx} y={cy} aria-label={tvalue}>\n                            {tvalue}\n                        </text>\n                    )}\n                </SvgWidget>\n            </Grid>\n            {clickeable && (\n                <Grid item>\n                    <Slider\n                        aria-label={label}\n                        disabled={off}\n                        color={color}\n                        min={min}\n                        max={max}\n                        step={_step}\n                        valueLabelDisplay=\"off\"\n                        value={value}\n                        onChange={onChange ? handleSliderChange : undefined}\n                    />\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n","import { Tooltip } from \"@mui/material\"\nimport React from \"react\"\n\nexport default function OptionalTooltip(props: {\n    children: JSX.Element\n    title: string\n    placement?:\n        | \"bottom-end\"\n        | \"bottom-start\"\n        | \"bottom\"\n        | \"left-end\"\n        | \"left-start\"\n        | \"left\"\n        | \"right-end\"\n        | \"right-start\"\n        | \"right\"\n        | \"top-end\"\n        | \"top-start\"\n        | \"top\"\n}) {\n    const { children, title, placement } = props\n    if (!title) return children\n    return (\n        <Tooltip describeChild={true} title={title} placement={placement}>\n            <span>{children}</span>\n        </Tooltip>\n    )\n}\n","import React from \"react\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\"\nimport { describeArc } from \"./svgutils\"\nimport useWidgetTheme from \"./useWidgetTheme\"\n\nexport default function PowerButton(props: {\n    cx: number\n    cy: number\n    r: number\n    ri: number\n    strokeWidth?: number\n    label?: string\n    color?: \"primary\" | \"secondary\"\n    off?: boolean\n    borderStroke?: string\n    onClick?: () => void\n}) {\n    const {\n        cx,\n        cy,\n        r,\n        ri,\n        onClick,\n        off,\n        color,\n        label,\n        strokeWidth,\n        borderStroke,\n    } = props\n    const { background, active, controlBackground, textProps } =\n        useWidgetTheme(color)\n    const a = 135\n    const d = describeArc(cx, cy, ri, -a, a, true)\n    const btnlabel = off ? \"turn on\" : \"turn off\"\n    const buttonProps = useSvgButtonProps<SVGCircleElement>(btnlabel, onClick)\n    const sw = strokeWidth || 3\n    const iconStroke = off ? background : active\n\n    return (\n        <g aria-label={label}>\n            <title>{btnlabel}</title>\n            <circle\n                cx={cx}\n                cy={cy}\n                r={r}\n                fill={controlBackground}\n                strokeWidth={sw}\n                stroke={borderStroke || background}\n                {...buttonProps}\n            />\n            <g transform={`rotate(180, ${cx}, ${cy})`}>\n                <path\n                    d={d}\n                    strokeLinecap=\"round\"\n                    fill=\"none\"\n                    strokeWidth={sw}\n                    stroke={iconStroke}\n                    style={{ userSelect: \"none\", pointerEvents: \"none\" }}\n                />\n                <line\n                    strokeLinecap=\"round\"\n                    x1={cx}\n                    y1={cy + ri / 4}\n                    x2={cx}\n                    y2={cy + ri}\n                    stroke={iconStroke}\n                    strokeWidth={sw}\n                    style={{ userSelect: \"none\", pointerEvents: \"none\" }}\n                />\n            </g>\n            <text\n                aria-label={label}\n                x={cx}\n                y={cy + r + 8}\n                {...textProps}\n                fontSize={\"80%\"}\n            >\n                {label}\n            </text>\n        </g>\n    )\n}\n","import React, { ReactNode } from \"react\"\n\nexport default function SvgWidget(props: {\n    width: number\n    height?: number\n    size?: string\n    role?: string\n    title?: string\n    viewBox?: string\n    tabIndex?: number\n    background?: string\n    svgRef?: React.MutableRefObject<SVGSVGElement>\n    children: ReactNode\n}) {\n    const {\n        width,\n        height,\n        size = \"100%\",\n        background,\n        children,\n        role,\n        title,\n        viewBox,\n        tabIndex,\n        svgRef,\n    } = props\n    const h = height || width\n    const aspectRatio = width / height\n    const vertical = aspectRatio < 1\n\n    return (\n        <div\n            style={{\n                position: \"relative\",\n                height: vertical ? size : undefined,\n                width: vertical ? undefined : size,\n            }}\n        >\n            <svg\n                ref={svgRef}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                tabIndex={tabIndex}\n                viewBox={viewBox || `0 0 ${width} ${h}`}\n                aria-label={title}\n                style={{\n                    height: vertical ? \"100%\" : undefined,\n                    width: vertical ? undefined : \"100%\",\n                }}\n                role={role || \"group\"}\n            >\n                {background && (\n                    <rect\n                        x={0}\n                        y={0}\n                        width={width}\n                        height={height}\n                        fill={background}\n                        rx={1}\n                        ry={1}\n                    />\n                )}\n                {children}\n            </svg>\n        </div>\n    )\n}\n","import React from \"react\"\n\nexport function svgPointerPoint(\n    svg: SVGSVGElement,\n    event: React.PointerEvent\n): DOMPoint {\n    const point = svg.createSVGPoint()\n    point.x = event.clientX\n    point.y = event.clientY\n    const res = point.matrixTransform(svg.getScreenCTM().inverse())\n    return res\n}\n\nexport function closestPoint(\n    pathNode: SVGPathElement,\n    step: number,\n    point: DOMPoint\n): number {\n    const pathLength = pathNode.getTotalLength()\n\n    const distance2 = (p: DOMPoint) => {\n        const dx = p.x - point.x\n        const dy = p.y - point.y\n        return dx * dx + dy * dy\n    }\n\n    let bestLength = 0\n    let bestDistance = Infinity\n    for (let scanLength = 0; scanLength <= pathLength; scanLength += step) {\n        const scan = pathNode.getPointAtLength(scanLength)\n        const scanDistance = distance2(scan)\n        if (scanDistance < bestDistance) {\n            bestLength = scanLength\n            bestDistance = scanDistance\n        }\n    }\n    return bestLength / pathLength\n}\n\nexport function polarToCartesian(\n    centerX: number,\n    centerY: number,\n    radius: number,\n    angleInDegrees: number\n) {\n    const angleInRadians = ((angleInDegrees - 90) * Math.PI) / 180.0\n\n    return {\n        x: centerX + radius * Math.cos(angleInRadians),\n        y: centerY + radius * Math.sin(angleInRadians),\n    }\n}\n\nexport function describeArc(\n    x: number,\n    y: number,\n    radius: number,\n    startAngle: number,\n    endAngle: number,\n    large?: boolean\n) {\n    const start = polarToCartesian(x, y, radius, endAngle)\n    const end = polarToCartesian(x, y, radius, startAngle)\n\n    const largeArcFlag =\n        large !== true && endAngle - startAngle <= 180 ? \"0\" : \"1\"\n\n    const d = [\n        \"M\",\n        start.x,\n        start.y,\n        \"A\",\n        radius,\n        radius,\n        0,\n        largeArcFlag,\n        0,\n        end.x,\n        end.y,\n    ].join(\" \")\n\n    return d\n}\n","export default function useWidgetSize(\n    variant?: \"icon\" | \"\",\n    widgetCount?: number\n) {\n    const icon = variant === \"icon\"\n\n    const mini = icon\n    let widgetSize: string\n    switch (widgetCount || 1) {\n        case 1:\n        case 2:\n            widgetSize = mini ? \"12em\" : \"16em\"\n            break\n        case 3:\n        case 4:\n        case 5:\n        case 6:\n            widgetSize = mini ? \"10em\" : \"14em\"\n            break\n        default:\n            widgetSize = mini ? \"4em\" : \"5em\"\n            break\n    }\n    return widgetSize\n}\n","import { useTheme } from \"@mui/material\"\nimport { SVGProps, useContext } from \"react\"\nimport DarkModeContext from \"../ui/DarkModeContext\"\n\nexport default function useWidgetTheme(color?: \"primary\" | \"secondary\") {\n    const theme = useTheme()\n    const { palette } = theme\n    const { background } = palette\n    const { darkMode } = useContext(DarkModeContext)\n\n    const active: string =\n        color === \"primary\"\n            ? palette.primary.main\n            : color === \"secondary\"\n            ? palette.secondary.main\n            : palette.info.main\n    const backgroundColor =\n        darkMode === \"dark\" ? background.default : palette.grey[800]\n    const controlBackground =\n        darkMode === \"dark\" ? palette.grey[800] : palette.grey[400]\n    const textPrimary = palette.text.primary\n    const textProps: SVGProps<SVGTextElement> = {\n        fill: textPrimary,\n        alignmentBaseline: \"central\",\n        dominantBaseline: \"middle\",\n        textAnchor: \"middle\",\n        pointerEvents: \"none\",\n        letterSpacing: 0,\n        style: {\n            userSelect: \"none\",\n            pointerEvents: \"none\",\n        },\n    }\n\n    return {\n        background: backgroundColor,\n        controlBackground,\n        active,\n        textPrimary,\n        textProps,\n    }\n}\n","import { ControlReg } from \"../../jacdac-ts/jacdac-spec/dist/specconstants\"\nimport { JDDevice } from \"../../jacdac-ts/src/jdom/device\"\nimport useRegister from \"../components/hooks/useRegister\"\nimport useDeviceSpecification from \"./useDeviceSpecification\"\nimport { useRegisterUnpackedValue } from \"./useRegisterValue\"\n\nexport default function useDeviceDescription(device: JDDevice) {\n    const specification = useDeviceSpecification(device)\n    const reg = useRegister(device?.service(0), ControlReg.DeviceDescription)\n    const [res] = useRegisterUnpackedValue<[string]>(reg)\n    return res || specification?.name\n}\n"],"names":["PREFIX","classes","ack","error","Root","styled","color","fontWeight","theme","backgroundColor","ACK_RESET_DELAY","ERROR_RESET_DELAY","others","bus","useBus","setError","useSnackbar","useState","useAnalytics","mounted","useMounted","_disabled","disabled","run","trackEvent","setAck","setWorking","onClick","ackResetDelay","setAppError","handleClick","ev","statusIcon","modeClassName","elClassName","clsx","useEffect","autoRun","valueTextLength","valueText","debouncedRef","useRef","alpha","Math","name","converter","inverter","useUnitConverter","value","unitConverter","props","min","max","precision","step","hasValue","isNaN","renderWithPrecision","useDebouncedValueTextLength","useWidgetTheme","valueVariant","valueStyle","minWidth","fontVariantNumeric","unitStyle","captionStyle","handleChange","v","iv","unitInverter","onChange","unitName","secondaryLabel","unit","resolveUnit","enumInfo","serviceSpecification","specification","readOnly","controlled","kind","valueString","memberValueToString","serviceMemberSpecification","label","isWidget","variant","widgetSize","useWidgetSize","unitIcon","useUnitIcon","minValue","pick","maxValue","errorValue","roundWithPrecision","prettyUnit","helperText","errorText","prettyMemberUnit","inputId","useId","inputType","isIntegerType","setTextValue","handleChecked","setValue","newValue","r","tryParseMemberValue","setErrorText","handleEnumChange","event","flagsToValue","handleSliderChange","handleSliderWidgetChange","percentValueFormat","valueLabelFormat","percentValueLabelFormat","offFormat","isValueOrIntensity","valueToFlags","Object","n","signed","resolution","digits","nvalue","size","isSet","hasTypicalRange","marks","typicalMin","typicalMax","off","index","c","values","setValues","specifications","Example","timestamp","data","toVector","t","startTimestamp","s","Recording","colors","headers","rows","units","FielddataSet","JDEventSource","id","maxRows","create","fields","arrayConcatMany","registers","reg","palette","i","set","createFromFile","dataSet","row","field","first","last","flatten","indexOf","colorOf","addRow","f","addData","Date","addExample","refreshminmax","toCSV","sep","allheaders","start","csv","options","cell","toJSON","graph","mini","marginTop","marginBottom","display","width","shape","symmetric","useChange","indexes","u","times","ex","maxt","mint","minv","maxv","opposite","rv","margin","h","w","strokeWidth","axisWidth","axisColor","pointRadius","toffset","fontSize","x","y","vph","lastRow","useGradient","yAxis","path","ri","dot","_","vpw","height","gradient","maxHeight","maxWidth","unique","useContext","useMemo","darkMode","DEFAULT_HORIZON","DEFAULT_HEIGHT","horizon","useChartPalette","FieldDataSet","useCallback","interval","register","useInterval","server","useServiceServer","identifier","SystemReg","StreamingPreferredInterval","visible","reading","code","auxilliaryRegister","useRegister","useRegisterUnpackedValue","useRegisterServer","hasSet","hasData","regProps","isReading","isValue","useReadingAuxilliaryValue","readingError","vs","setArgs","handleRefresh","sendArgs","isReadOnlyRegister","hideMissingValues","serviceName","registerName","humanify","showDeviceName","showServiceName","showRegisterName","showTrend","service","roleManagerClient","useRoleManagerClient","allRolesBound","handleStartSimulators","delay","enabledTooltip","disabledTooltip","disabledChildren","collapsedRegisters","hasIntensityBool","intensity","useRegisterBoolValue","toggleOff","intensityRegister","rest","pkt","isRegister","pkts","pk","rspec","MIN_VISIBLE_OPACITY","g","b","cMin","cMax","cDelta","maxAndMin","l","g$","b$","r$","hsl","rgbToHsl","fill","el","radius","nr","pixels","pixelsContainer","pn","ci","pixel","setRgba","opacity","actualBrightness","pathRef","pixelsRef","neoradius","neocircleradius","isJewel","lightVariant","LedStripVariant","isRing","brightnessToOpacity","paint","setRgbaLeds","p","pixelGroup","pixelBoxes","offset","length","extra","MAGIC_NUMBER","box","boxSize","rotation","pos","point","subscribeColors","d","numPixels","neoperimeter","ringradius","hm","Array","onLedClick","fireClick","useFireKey","svgDiameter","impellerRef","impellerRotationRef","impellerRotationRate","useAnimationFrame","active","timeDelta","impeller","continuous","rotationRate","offsetRef","armRef","textRef","cx","cy","a","enabled","angle","transform","pr","pri","text","time","arm","od","drawDiameter","pathDiameter","makePoint","polarToCartesian","segmentOffset","dia","updateDia","drawPoint","gearPath","fwdGearPaths","small","generateGearPath","large","activeRegister","RelayReg","handleClose","enabledRegister","ServoReg","angleRegister","reportedAngle","responseSpeedRegister","responseSpeed","rotationalSpeed","useThrottledValue","offsetRegister","clientVariantRegister","BaseReg","minAngleRegister","minAngle","maxAngleRegister","maxAngle","throttle","angleFormat","continuousFormat","handleContinuousChange","newAngle","handleAngleChange","handleVariantChange","isContinuous","clientVariant","setContinuous","pixelsRegister","LedReg","colorsRef","clientRef","handleColorChange","newColor","setPenColor","current","handleLedClick","newPixels","k","penColor","updatePixels","bufferEq","numPixelsRegister","actualBrightnessRegister","handler","colourPalette","handlePanelToggle","setLedControls","ready","ledControls","buttonProps","useSvgButtonProps","checked","fs","m","sw","dx","sh","dark","bright","isLit","userSelect","pointerEvents","clipId","tvalue","ch","widgetScale","mo","rn","FwdEduDevices","useDeviceSpecifications","device","deviceId","useDeviceProductIdentifier","downEvent","useEvent","ButtonEvent","upEvent","setPressed","onDown","onUp","pressed","handleDown","clicksPerTurnRegister","RotaryEncoderReg","clicksPerTurn","position","widgetProps","createElement","createPumpWidget","createServoWidget","createLEDWidget","registerNumber","valueReg","lazifyWidget","isRotaryVariant","buttonWidgetProps","lineWidgetProps","dialWidgetProps","DashboardServiceDefaultWidget","analogRegister","ButtonReg","analog","handleUp","ACTIVE_SPEED","INACTIVE_SPEED","LABEL_PRECISION","pressureRegister","thresholdRegister","mixins","cfg","setDown","keepAnimating","rp","ps","range","pressure","describeArc","threshold","positionRegister","throttled","labelId","SwitchReg","variantRegister","on","title","handleToggle","SwitchVariant","buttonLabels","GamepadButtons","nv","GamepadReg","hostValues","onUpdate","dragSurfaceRef","w2","rc","rj","pw","ph","jx","jy","jw","updateGamepadDrag","bounds","dy","distance","newx","newy","handlePointerDown","circle","setGrabbing","handlePointerUp","handlePointerMove","nx","decay","ny","handleStyle","cursor","grabbing","buttons","onRefresh","buttonsAvailableRegister","buttonsAvailable","GamepadVariant","directionRegister","hasABButtons","cw","ro","sro","sri","scy","abx","aby","abr","abw","padcx","padcy","padr","DashboardServo","lazy","DashboardAccelerometer","DashboardBuzzer","DashboardLED","DashboardLEDStrip","DashboardLEDSingle","DashboardRoleManager","DashboardTrafficLight","DashboardCharacterScreen","DashboardBrailleDisplay","DashboardRainGauge","DashboardDotMatrix","DashboardWindDirection","DashboardMatrixKeypad","DashboardReflectedLight","DashboardPower","DashboardSpeechSynthesis","DashboardSoilMoisture","DashboardRealTimeClock","DashboardSatNav","DashboardSevenSegmentDisplay","DashboardMotion","DashboardWaterLevel","DashboardColor","DashboardSoundPlayer","DashboardSoundLevel","DashboardSoundSpectrum","DashboardRandomNumberGenerator","DashboardCompass","DashboardGyroscope","DashboardSolenoid","DashboardBitRadio","DashboardHIDKeyboard","DashboardHIDMouse","DashboardHIDJoystick","DashboardCloudConfiguration","DashboardWifi","DashboardVibrationMotor","DashboardCODALMessageBus","DashboardRelay","DashboardGPIO","DashboardLightBulb","DashboardDeviceScriptManager","DashboardCloudAdapter","DashboardPlanarPosition","DashboardSerial","DashboardRos","DashboardIndexedScreen","PowerSettingsNewIcon","MusicNoteIcon","AppsIcon","SensorsIcon","MemoryIcon","CloudQueueIcon","SerialIcon","serviceViews","component","weight","expandable","icon","bundled","useFwdWidget","isFwdEdu","view","codes","SystemStatusCodes","severities","useStatusCode","vendorCode","severity","useEventRaised","SelectRoleDialog","MAX_NAME_LENGTH","RoleButton","textTransform","roleManager","role","useServiceRole","handleOpen","setShowSelectRoleDialog","hasRoleForService","isDeviceId","shortDeviceId","ellipse","escapeRoleName","showSelectRoleDialog","instanceName","useInstanceName","dashboardServiceIcon","iconProps","titleAccess","float","expanded","isExpandableView","statusCodeAlert","toggleExpanded","setExpanded","e","root","rootMargin","frozen","updateEntry","setEntry","node","elementRef","hasIOSupport","window","observerParams","observer","lost","dev","flashing","description","useDeviceDescription","paddingBottom","showAvatar","DeviceProxyAlert","DeviceBootloaderAlert","ignoredServices","useDeviceName","services","serviceFilter","serviceGridRef","intersection","useIntersectionObserver","alwaysVisible","ServiceWidgets","dependencyId","padding","paddingTop","showDeviceProxyAlert","other","breakpoints","breakpointWeight","srv","dashboardServiceWeight","drawerType","DrawerType","xs","sm","md","lg","xl","sectionId","devices","mb","handleStartSimulator","serviceClass","startServiceProviderFromServiceClass","handleShowStartSimulator","toggleShowDeviceHostsDialog","srvScore","prev","score","srvs","ls","spec","rs","strcmp","unsubs","unsub","allowedRegister","PowerReg","powerStatusRegister","allowed","deviceName","powerStatus","PowerPowerStatus","status","mr","powers","deviceSort","deviceFilter","useBusWithMode","autoConnect","useHostedSimulators","useDevices","announced","ignoreInfrastructure","Flags","splitFilter","isHostedSimulator","handleClearSimulators","clearHostedSimulators","showStartRoleSimulators","showHeader","showStartSimulators","simulators","showConnect","physicals","provider","useServiceProvider","settings","_showProxy","showProxy","handleIdentify","handleProxy","handleStop","removeHostedSimulator","handleSettings","navigate","showStop","showSettings","showReset","LazyDeviceImage","handleSendIdentify","handleCloseIdentify","onClose","blue","statusLightFlags","ControlAnnounceFlags","useDeviceSpecification","identifierToUrlPath","statusLight","style","outlineColor","rgbaToHtmlColor","outlineStyle","outlineWidth","handleOpenIdentify","setIdentifyDialog","center","identifyDialog","Name","showShortId","serviceIndex","linkToSpecification","handleReset","showLabel","includeShortId","requestRef","previousTimeRef","animate","deltaTime","callback","requestAnimationFrame","cancelAnimationFrame","deps","setInterval","clearInterval","twin","createTwin","fireDownOnEnter","fireUpOnEnter","preventify","className","tabIndex","onPointerDown","onPointerUp","onPointerLeave","onKeyDown","onKeyUp","maxCycles","animated","setActual","dt","maxError","maxRate","maxErrorRange","instanceNameRegister","setMgr","DEFAULT_COLORS","useTheme","handleSetColor","col","onColorChange","selected","rgbToHtmlColor","sliderPathRef","roff","riff","sa","ea","_step","displayValue","computeArc","mid","fraction","va","db","dvalue","dactual","lineCap","valueLabel","clickeable","svg","svgPointerPoint","closest","closestPoint","pointerStyle","pathProps","onPointerMove","btnlabel","iconStroke","borderStroke","aspectRatio","vertical","viewBox","background","res","pathLength","pathNode","distance2","bestLength","bestDistance","scanLength","scan","scanDistance","angleInRadians","angleInDegrees","centerX","centerY","end","largeArcFlag","endAngle","widgetCount","controlBackground","textPrimary","textProps","alignmentBaseline","dominantBaseline","textAnchor","letterSpacing","ControlReg"],"sourceRoot":""}