"use strict";
(self["webpackChunkjacdac_docs"] = self["webpackChunkjacdac_docs"] || []).push([[3511],{

/***/ 55343:
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

var __webpack_unused_export__;


var _interopRequireDefault = __webpack_require__(95318);
__webpack_unused_export__ = ({
  value: true
});
exports.Z = void 0;
var _createSvgIcon = _interopRequireDefault(__webpack_require__(64938));
var _jsxRuntime = __webpack_require__(85893);
var _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)("path", {
  d: "M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"
}), 'Fullscreen');
exports.Z = _default;

/***/ }),

/***/ 9350:
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

var __webpack_unused_export__;


var _interopRequireDefault = __webpack_require__(95318);
__webpack_unused_export__ = ({
  value: true
});
exports.Z = void 0;
var _createSvgIcon = _interopRequireDefault(__webpack_require__(64938));
var _jsxRuntime = __webpack_require__(85893);
var _default = (0, _createSvgIcon.default)([/*#__PURE__*/(0, _jsxRuntime.jsx)("path", {
  d: "M3 6h18v5h2V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9v-2H3V6z"
}, "0"), /*#__PURE__*/(0, _jsxRuntime.jsx)("path", {
  d: "M15 12 9 8v8zm7.71 6.43c.03-.29.04-.58.01-.86l1.07-.85c.1-.08.12-.21.06-.32l-1.03-1.79c-.06-.11-.19-.15-.31-.11l-1.28.5c-.23-.17-.48-.31-.75-.42l-.2-1.36c-.02-.13-.12-.22-.25-.22h-2.07c-.12 0-.23.09-.25.21l-.2 1.36c-.26.11-.51.26-.74.42l-1.28-.5c-.12-.05-.25 0-.31.11l-1.03 1.79c-.06.11-.04.24.06.32l1.07.86c-.03.29-.04.58-.01.86l-1.07.85c-.1.08-.12.21-.06.32l1.03 1.79c.06.11.19.15.31.11l1.27-.5c.23.17.48.31.75.42l.2 1.36c.02.12.12.21.25.21h2.07c.12 0 .23-.09.25-.21l.2-1.36c.26-.11.51-.26.74-.42l1.28.5c.12.05.25 0 .31-.11l1.03-1.79c.06-.11.04-.24-.06-.32l-1.06-.85zM19 19.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"
}, "1")], 'VideoSettings');
exports.Z = _default;

/***/ }),

/***/ 43511:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": function() { return /* binding */ WebCam; }
});

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
var asyncToGenerator = __webpack_require__(15861);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js
var objectWithoutPropertiesLoose = __webpack_require__(63366);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/extends.js
var esm_extends = __webpack_require__(87462);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(67294);
// EXTERNAL MODULE: ./node_modules/clsx/dist/clsx.m.js
var clsx_m = __webpack_require__(86010);
// EXTERNAL MODULE: ./node_modules/@mui/utils/esm/composeClasses/composeClasses.js
var composeClasses = __webpack_require__(94780);
// EXTERNAL MODULE: ./node_modules/@mui/system/esm/colorManipulator.js
var colorManipulator = __webpack_require__(41796);
// EXTERNAL MODULE: ./node_modules/@mui/material/internal/SwitchBase.js + 1 modules
var SwitchBase = __webpack_require__(32207);
// EXTERNAL MODULE: ./node_modules/@mui/material/utils/createSvgIcon.js
var createSvgIcon = __webpack_require__(82066);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(85893);
;// CONCATENATED MODULE: ./node_modules/@mui/material/internal/svg-icons/CheckBoxOutlineBlank.js



/**
 * @ignore - internal component.
 */

/* harmony default export */ var CheckBoxOutlineBlank = ((0,createSvgIcon/* default */.Z)( /*#__PURE__*/(0,jsx_runtime.jsx)("path", {
  d: "M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"
}), 'CheckBoxOutlineBlank'));
;// CONCATENATED MODULE: ./node_modules/@mui/material/internal/svg-icons/CheckBox.js



/**
 * @ignore - internal component.
 */

/* harmony default export */ var CheckBox = ((0,createSvgIcon/* default */.Z)( /*#__PURE__*/(0,jsx_runtime.jsx)("path", {
  d: "M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
}), 'CheckBox'));
;// CONCATENATED MODULE: ./node_modules/@mui/material/internal/svg-icons/IndeterminateCheckBox.js



/**
 * @ignore - internal component.
 */

/* harmony default export */ var IndeterminateCheckBox = ((0,createSvgIcon/* default */.Z)( /*#__PURE__*/(0,jsx_runtime.jsx)("path", {
  d: "M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"
}), 'IndeterminateCheckBox'));
// EXTERNAL MODULE: ./node_modules/@mui/material/utils/capitalize.js
var capitalize = __webpack_require__(98216);
// EXTERNAL MODULE: ./node_modules/@mui/material/styles/useThemeProps.js
var useThemeProps = __webpack_require__(71657);
// EXTERNAL MODULE: ./node_modules/@mui/material/styles/styled.js
var styled = __webpack_require__(90948);
// EXTERNAL MODULE: ./node_modules/@mui/utils/esm/generateUtilityClasses/generateUtilityClasses.js
var generateUtilityClasses = __webpack_require__(1588);
// EXTERNAL MODULE: ./node_modules/@mui/utils/esm/generateUtilityClass/generateUtilityClass.js
var generateUtilityClass = __webpack_require__(34867);
;// CONCATENATED MODULE: ./node_modules/@mui/material/Checkbox/checkboxClasses.js


function getCheckboxUtilityClass(slot) {
  return (0,generateUtilityClass/* default */.Z)('MuiCheckbox', slot);
}
const checkboxClasses = (0,generateUtilityClasses/* default */.Z)('MuiCheckbox', ['root', 'checked', 'disabled', 'indeterminate', 'colorPrimary', 'colorSecondary']);
/* harmony default export */ var Checkbox_checkboxClasses = (checkboxClasses);
;// CONCATENATED MODULE: ./node_modules/@mui/material/Checkbox/Checkbox.js


const _excluded = ["checkedIcon", "color", "icon", "indeterminate", "indeterminateIcon", "inputProps", "size", "className"];















const useUtilityClasses = ownerState => {
  const {
    classes,
    indeterminate,
    color
  } = ownerState;
  const slots = {
    root: ['root', indeterminate && 'indeterminate', `color${(0,capitalize/* default */.Z)(color)}`]
  };
  const composedClasses = (0,composeClasses/* default */.Z)(slots, getCheckboxUtilityClass, classes);
  return (0,esm_extends/* default */.Z)({}, classes, composedClasses);
};
const CheckboxRoot = (0,styled/* default */.ZP)(SwitchBase/* default */.Z, {
  shouldForwardProp: prop => (0,styled/* rootShouldForwardProp */.FO)(prop) || prop === 'classes',
  name: 'MuiCheckbox',
  slot: 'Root',
  overridesResolver: (props, styles) => {
    const {
      ownerState
    } = props;
    return [styles.root, ownerState.indeterminate && styles.indeterminate, ownerState.color !== 'default' && styles[`color${(0,capitalize/* default */.Z)(ownerState.color)}`]];
  }
})(({
  theme,
  ownerState
}) => (0,esm_extends/* default */.Z)({
  color: (theme.vars || theme).palette.text.secondary
}, !ownerState.disableRipple && {
  '&:hover': {
    backgroundColor: theme.vars ? `rgba(${ownerState.color === 'default' ? theme.vars.palette.action.activeChannel : theme.vars.palette.primary.mainChannel} / ${theme.vars.palette.action.hoverOpacity})` : (0,colorManipulator/* alpha */.Fq)(ownerState.color === 'default' ? theme.palette.action.active : theme.palette[ownerState.color].main, theme.palette.action.hoverOpacity),
    // Reset on touch devices, it doesn't add specificity
    '@media (hover: none)': {
      backgroundColor: 'transparent'
    }
  }
}, ownerState.color !== 'default' && {
  [`&.${Checkbox_checkboxClasses.checked}, &.${Checkbox_checkboxClasses.indeterminate}`]: {
    color: (theme.vars || theme).palette[ownerState.color].main
  },
  [`&.${Checkbox_checkboxClasses.disabled}`]: {
    color: (theme.vars || theme).palette.action.disabled
  }
}));
const defaultCheckedIcon = /*#__PURE__*/(0,jsx_runtime.jsx)(CheckBox, {});
const defaultIcon = /*#__PURE__*/(0,jsx_runtime.jsx)(CheckBoxOutlineBlank, {});
const defaultIndeterminateIcon = /*#__PURE__*/(0,jsx_runtime.jsx)(IndeterminateCheckBox, {});
const Checkbox = /*#__PURE__*/react.forwardRef(function Checkbox(inProps, ref) {
  var _icon$props$fontSize, _indeterminateIcon$pr;
  const props = (0,useThemeProps/* default */.Z)({
    props: inProps,
    name: 'MuiCheckbox'
  });
  const {
      checkedIcon = defaultCheckedIcon,
      color = 'primary',
      icon: iconProp = defaultIcon,
      indeterminate = false,
      indeterminateIcon: indeterminateIconProp = defaultIndeterminateIcon,
      inputProps,
      size = 'medium',
      className
    } = props,
    other = (0,objectWithoutPropertiesLoose/* default */.Z)(props, _excluded);
  const icon = indeterminate ? indeterminateIconProp : iconProp;
  const indeterminateIcon = indeterminate ? indeterminateIconProp : checkedIcon;
  const ownerState = (0,esm_extends/* default */.Z)({}, props, {
    color,
    indeterminate,
    size
  });
  const classes = useUtilityClasses(ownerState);
  return /*#__PURE__*/(0,jsx_runtime.jsx)(CheckboxRoot, (0,esm_extends/* default */.Z)({
    type: "checkbox",
    inputProps: (0,esm_extends/* default */.Z)({
      'data-indeterminate': indeterminate
    }, inputProps),
    icon: /*#__PURE__*/react.cloneElement(icon, {
      fontSize: (_icon$props$fontSize = icon.props.fontSize) != null ? _icon$props$fontSize : size
    }),
    checkedIcon: /*#__PURE__*/react.cloneElement(indeterminateIcon, {
      fontSize: (_indeterminateIcon$pr = indeterminateIcon.props.fontSize) != null ? _indeterminateIcon$pr : size
    }),
    ownerState: ownerState,
    ref: ref,
    className: (0,clsx_m/* default */.Z)(classes.root, className)
  }, other, {
    classes: classes
  }));
});
 false ? 0 : void 0;
/* harmony default export */ var Checkbox_Checkbox = (Checkbox);
// EXTERNAL MODULE: ./node_modules/@mui/material/Grid/Grid.js + 2 modules
var Grid = __webpack_require__(15725);
// EXTERNAL MODULE: ./node_modules/@mui/material/FormControl/FormControl.js + 1 modules
var FormControl = __webpack_require__(76446);
// EXTERNAL MODULE: ./node_modules/@mui/material/Select/Select.js + 5 modules
var Select = __webpack_require__(97920);
// EXTERNAL MODULE: ./node_modules/@mui/material/MenuItem/MenuItem.js + 1 modules
var MenuItem = __webpack_require__(33797);
// EXTERNAL MODULE: ./node_modules/@mui/material/FormControlLabel/FormControlLabel.js + 1 modules
var FormControlLabel = __webpack_require__(50542);
// EXTERNAL MODULE: ./node_modules/@mui/material/CardContent/CardContent.js + 1 modules
var CardContent = __webpack_require__(42643);
// EXTERNAL MODULE: ./src/components/hooks/useLocalStorage.ts
var useLocalStorage = __webpack_require__(10431);
// EXTERNAL MODULE: ./src/components/useEffectAsync.ts
var useEffectAsync = __webpack_require__(60763);
// EXTERNAL MODULE: ./src/components/ui/IconButtonWithTooltip.tsx + 1 modules
var IconButtonWithTooltip = __webpack_require__(48147);
// EXTERNAL MODULE: ./src/components/hooks/useMounted.ts
var useMounted = __webpack_require__(96173);
// EXTERNAL MODULE: ./src/components/AppContext.tsx
var AppContext = __webpack_require__(5355);
// EXTERNAL MODULE: ./node_modules/@mui/material/Alert/Alert.js + 6 modules
var Alert = __webpack_require__(66186);
// EXTERNAL MODULE: ./node_modules/@mui/icons-material/Fullscreen.js
var Fullscreen = __webpack_require__(55343);
// EXTERNAL MODULE: ./src/components/ui/DraggableCard.tsx
var DraggableCard = __webpack_require__(21010);
// EXTERNAL MODULE: ./node_modules/@mui/icons-material/VideoSettings.js
var VideoSettings = __webpack_require__(9350);
// EXTERNAL MODULE: ./node_modules/@mui/icons-material/FiberManualRecord.js
var FiberManualRecord = __webpack_require__(82019);
// EXTERNAL MODULE: ./node_modules/@mui/icons-material/Stop.js
var Stop = __webpack_require__(25195);
// EXTERNAL MODULE: ./jacdac-ts/src/embed/filestorage.ts
var filestorage = __webpack_require__(30116);
// EXTERNAL MODULE: ./src/components/ui/IconButtonWithProgress.tsx + 1 modules
var IconButtonWithProgress = __webpack_require__(14955);
;// CONCATENATED MODULE: ./src/components/ui/MediaRecorderButton.tsx
/* eslint-disable jsx-a11y/media-has-caption */function supportsMediaRecorder(){return typeof MediaRecorder!=="undefined";}function downloadBlob(_x,_x2){return _downloadBlob.apply(this,arguments);}function _downloadBlob(){_downloadBlob=(0,asyncToGenerator/* default */.Z)(function*(blob,name){var url=URL.createObjectURL(blob);console.debug("webcam: download video",{blob,url});yield (0,filestorage/* downloadUrl */.GR)(url,name);window.URL.revokeObjectURL(url);});return _downloadBlob.apply(this,arguments);}function MediaRecorderButton(props){var{stream}=props;var{0:recording,1:setRecording}=(0,react.useState)(false);var recorderRef=(0,react.useRef)(null);var startRecording=/*#__PURE__*/function(){var _ref=(0,asyncToGenerator/* default */.Z)(function*(){console.debug("webcam: start recording");var chunks=[];var options={mimeType:"video/webm;codecs=H264"};var recorder=recorderRef.current=new MediaRecorder(stream,options);recorder.ondataavailable=e=>{console.debug("webcam: recording chunk",{data:e.data});e.data.size&&chunks.push(e.data);};var download=()=>{console.debug("webcam: download webm (chunks: "+chunks.length+")",{chunks});var blob=new Blob(chunks,{type:"video/webm"});downloadBlob(blob,"recording.webm");};recorder.onstop=download;recorder.onerror=download;recorder.start();setRecording(true);});return function startRecording(){return _ref.apply(this,arguments);};}();var stopRecording=()=>{try{var _recorderRef$current;if(((_recorderRef$current=recorderRef.current)===null||_recorderRef$current===void 0?void 0:_recorderRef$current.state)==="recording"){var _recorderRef$current2;console.debug("webcam: stop recording");(_recorderRef$current2=recorderRef.current)===null||_recorderRef$current2===void 0?void 0:_recorderRef$current2.stop();}}catch(e){console.debug(e);}recorderRef.current=undefined;setRecording(false);};(0,react.useEffect)(()=>{stopRecording();return()=>stopRecording();},[stream]);return/*#__PURE__*/react.createElement(IconButtonWithProgress/* default */.Z,{indeterminate:recording,disabled:!stream,title:recording?"Stop recording":"Start recording",onClick:recording?stopRecording:startRecording},recording?/*#__PURE__*/react.createElement(Stop/* default */.Z,null):/*#__PURE__*/react.createElement(FiberManualRecord/* default */.Z,null));}
;// CONCATENATED MODULE: ./src/components/ui/WebCam.tsx
/* eslint-disable jsx-a11y/media-has-caption */function WebCam(){var{setShowWebCam}=(0,react.useContext)(AppContext/* default */.ZP);var{0:devices,1:setDevices}=(0,react.useState)();var[deviceId,setDeviceId]=(0,useLocalStorage/* default */.Z)("webcam_deviceid","");var{0:working,1:setWorking}=(0,react.useState)(false);var[flip,setFlip]=(0,useLocalStorage/* default */.Z)("webcam_flip",false);var streamRef=(0,react.useRef)();var videoRef=(0,react.useRef)();var{0:settingsOpen,1:setSettingsOpen}=(0,react.useState)(false);var mounted=(0,useMounted/* default */.Z)();var supportsFullScreen=typeof document!=="undefined"&&!!document.fullscreenEnabled;var handleClose=/*#__PURE__*/function(){var _ref=(0,asyncToGenerator/* default */.Z)(function*(){return yield setShowWebCam(false);});return function handleClose(){return _ref.apply(this,arguments);};}();var handleSettings=()=>{console.debug("toggle settings",{settingsOpen});setSettingsOpen(!settingsOpen);};var handleFlipChange=event=>{setFlip(event.target.checked);};var handleDeviceChange=ev=>setDeviceId(ev.target.value);var handleFullScreen=()=>{var _videoRef$current;return(_videoRef$current=videoRef.current)===null||_videoRef$current===void 0?void 0:_videoRef$current.requestFullscreen();};var stop=()=>{var stream=streamRef.current;if(stream){console.debug("webcam: stop");try{var tracks=stream.getTracks();if(tracks)tracks.forEach(track=>track.stop());}catch(e){console.debug(e);}streamRef.current=undefined;}var video=videoRef.current;if(video){try{video.srcObject=undefined;}catch(e){console.debug(e);}}};// start camera
(0,useEffectAsync/* default */.Z)(/*#__PURE__*/(0,asyncToGenerator/* default */.Z)(function*(){stop();console.debug("webcam: start '"+(deviceId||"?")+"'");try{setWorking(true);stop();var filter={video:{width:{ideal:1920},height:{ideal:1080},focusMode:"manual",exposureMode:"manual",whiteBalanceMode:"manual"},audio:false};if(deviceId)filter.video.advanced=[{deviceId:deviceId}];var stream=yield navigator.mediaDevices.getUserMedia(filter);// const track = stream.getVideoTracks()[0]
// console.log({
//     capabilities: track.getCapabilities(),
//     constraints: track.getConstraints(),
//     settings: track.getSettings(),
// })
streamRef.current=stream;var video=videoRef.current;video.srcObject=stream;yield video.play();console.debug("webcam: play started");}catch(e){console.debug("webcam: play failed");console.error(e);setSettingsOpen(true);}finally{setWorking(false);}}),[deviceId]);var updateDevices=/*#__PURE__*/function(){var _ref3=(0,asyncToGenerator/* default */.Z)(function*(){console.debug("webcam: update devices");try{// enumerate devices
var _devices=yield navigator.mediaDevices.enumerateDevices();var webcams=_devices.filter(device=>device.kind=="videoinput");if(mounted())setDevices(webcams);}catch(e){console.debug(e);if(mounted())setDevices([]);}});return function updateDevices(){return _ref3.apply(this,arguments);};}();(0,useEffectAsync/* default */.Z)(/*#__PURE__*/(0,asyncToGenerator/* default */.Z)(function*(){if(settingsOpen)yield updateDevices();}),[settingsOpen]);(0,react.useEffect)(()=>{navigator.mediaDevices.addEventListener("devicechange",updateDevices);return()=>navigator.mediaDevices.removeEventListener("devicechange",updateDevices);});// cleanup
(0,react.useEffect)(()=>stop,[]);var style={transform:flip?"rotate(180deg)":undefined};return/*#__PURE__*/react.createElement(DraggableCard/* default */.Z,{onClose:handleClose,title:settingsOpen&&/*#__PURE__*/react.createElement(Grid/* default */.ZP,{container:true,spacing:1},devices&&/*#__PURE__*/react.createElement(Grid/* default */.ZP,{item:true},/*#__PURE__*/react.createElement(FormControl/* default */.Z,{variant:"outlined",size:"small"},/*#__PURE__*/react.createElement(Select/* default */.Z,{title:"select a webcam",onChange:handleDeviceChange,value:deviceId||"",disabled:working},devices===null||devices===void 0?void 0:devices.map(_ref5=>{var{deviceId,label}=_ref5;return/*#__PURE__*/react.createElement(MenuItem/* default */.Z,{key:deviceId,value:deviceId},label);})))),/*#__PURE__*/react.createElement(Grid/* default */.ZP,{item:true},/*#__PURE__*/react.createElement(FormControlLabel/* default */.Z,{label:"rotate 180",control:/*#__PURE__*/react.createElement(Checkbox_Checkbox,{checked:flip,size:"small",onChange:handleFlipChange})}))),actionItems:/*#__PURE__*/react.createElement(react.Fragment,null,supportsMediaRecorder()&&/*#__PURE__*/react.createElement(Grid/* default */.ZP,{item:true},/*#__PURE__*/react.createElement(MediaRecorderButton,{stream:streamRef.current})),supportsFullScreen&&/*#__PURE__*/react.createElement(Grid/* default */.ZP,{item:true},/*#__PURE__*/react.createElement(IconButtonWithTooltip/* default */.Z,{size:"large",onClick:handleFullScreen,title:"full screen",disabled:working},/*#__PURE__*/react.createElement(Fullscreen/* default */.Z,null))),/*#__PURE__*/react.createElement(Grid/* default */.ZP,{item:true},/*#__PURE__*/react.createElement(IconButtonWithTooltip/* default */.Z,{size:"large",onClick:handleSettings,title:"Settings"},/*#__PURE__*/react.createElement(VideoSettings/* default */.Z,null)))),alert:working&&/*#__PURE__*/react.createElement(CardContent/* default */.Z,null,/*#__PURE__*/react.createElement(Alert/* default */.Z,{severity:"info"},"starting camera..."))},/*#__PURE__*/react.createElement("video",{autoPlay:true,playsInline:true,ref:videoRef,muted:true,title:"webcam",style:style}));}

/***/ })

}]);
//# sourceMappingURL=3511-60a27583386c386effb0.js.map